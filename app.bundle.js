/*

ace
---
Copyright (c) 2010, Ajax.org B.V.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of Ajax.org B.V. nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


buffer
---
The MIT License (MIT)

Copyright (c) Feross Aboukhadijeh, and other contributors.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.


Dexie.js
---
Copyright (c) 2014-2017 David Fahlander

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.


dot
---
Copyright (c) 2011 Laura Doktorova

Software includes portions from jQote2 Copyright (c) 2010 aefxx,
http://aefxx.com/ licensed under the MIT license.

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


eruda
---
The MIT License (MIT)

Copyright (c) 2016-present liriliri

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


isomorphic-git
---
Copyright 2017-2018 the 'isomorphic-git' authors

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


Jdenticon
---
MIT License

Copyright (c) 2014-2018 Daniel Mester Pirttijärvi

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


jquery
---
Copyright 2014 jQuery Foundation and other contributors
http://jquery.com/

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


diff
---
Software License Agreement (BSD License)

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

All rights reserved.

Redistribution and use of this software in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of Kevin Decker nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


spck-module
---
The MIT License (MIT)
=====================

Copyright © `2018` `Zeb Zhao`

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the “Software”), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.


js-beautify
---
The MIT License (MIT)

Copyright (c) 2007-2018 Einar Lielmanis, Liam Newman, and contributors.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


spck-ui
---
The MIT License (MIT)
=====================

Copyright © `2017` `Zeb Zhao`

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the “Software”), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.


uikit
---
The MIT License (MIT)

Copyright (c) YOOtheme GmbH

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


minimatch
---
The ISC License

Copyright (c) Isaac Z. Schlueter and Contributors

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR
IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

is-utf8
---
The MIT License (MIT)

Copyright (C) 2014 Wei Fanzhe

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
　　
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


jaro-winkler
---
The MIT License (MIT)

Copyright (c) 2015 Jordan Thomas

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


typescript
---

*****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
*****************************************************************************

----------------- TypeScript ThirdPartyNotices -------------------------------------------------------

The TypeScript software is based on or incorporates material and code from the projects listed below
(collectively "Third Party Code"). Microsoft is not the original author of the
Third Party Code. The original copyright notice and the license, under which
Microsoft received such Third Party Code, are set forth below. Such license and
notices are provided for informational purposes only. Microsoft licenses the Third
Party Code to you under the terms of the Apache 2.0 License.
All Third Party Code licensed by Microsoft under the Apache License, Version 2.0 (the "License"); you
may not use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED WARRANTIES OR
CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions and
limitations under the License.
---------------------------------------------
Third Party Code Components
--------------------------------------------

------------------- DefinitelyTyped --------------------
This file is based on or incorporates material from the projects listed below (collectively "Third Party Code"). Microsoft is not the original author of the Third Party Code. The original copyright notice and the license, under which Microsoft received such Third Party Code, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft, not the third party, licenses the Third Party Code to you under the terms set forth in the EULA for the Microsoft Product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise.
DefinitelyTyped
This project is licensed under the MIT license.
Copyrights are respective of each contributor listed at the beginning of each definition file.
Provided for Informational Purposes Only

MIT License
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the ""Software""), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
--------------------------------------------------------------------------------------

------------------- Unicode --------------------
UNICODE, INC. LICENSE AGREEMENT - DATA FILES AND SOFTWARE

Unicode Data Files include all data files under the directories
http://www.unicode.org/Public/, http://www.unicode.org/reports/,
http://www.unicode.org/cldr/data/, http://source.icu-project.org/repos/icu/, and
http://www.unicode.org/utility/trac/browser/.

Unicode Data Files do not include PDF online code charts under the
directory http://www.unicode.org/Public/.

Software includes any source code published in the Unicode Standard
or under the directories
http://www.unicode.org/Public/, http://www.unicode.org/reports/,
http://www.unicode.org/cldr/data/, http://source.icu-project.org/repos/icu/, and
http://www.unicode.org/utility/trac/browser/.

NOTICE TO USER: Carefully read the following legal agreement.
BY DOWNLOADING, INSTALLING, COPYING OR OTHERWISE USING UNICODE INC.'S
DATA FILES ("DATA FILES"), AND/OR SOFTWARE ("SOFTWARE"),
YOU UNEQUIVOCALLY ACCEPT, AND AGREE TO BE BOUND BY, ALL OF THE
TERMS AND CONDITIONS OF THIS AGREEMENT.
IF YOU DO NOT AGREE, DO NOT DOWNLOAD, INSTALL, COPY, DISTRIBUTE OR USE
THE DATA FILES OR SOFTWARE.

COPYRIGHT AND PERMISSION NOTICE

Copyright (c) 1991-2017 Unicode, Inc. All rights reserved.
Distributed under the Terms of Use in http://www.unicode.org/copyright.html.

Permission is hereby granted, free of charge, to any person obtaining
a copy of the Unicode data files and any associated documentation
(the "Data Files") or Unicode software and any associated documentation
(the "Software") to deal in the Data Files or Software
without restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, and/or sell copies of
the Data Files or Software, and to permit persons to whom the Data Files
or Software are furnished to do so, provided that either
(a) this copyright and permission notice appear with all copies
of the Data Files or Software, or
(b) this copyright and permission notice appear in associated
Documentation.

THE DATA FILES AND SOFTWARE ARE PROVIDED "AS IS", WITHOUT WARRANTY OF
ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT OF THIRD PARTY RIGHTS.
IN NO EVENT SHALL THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS
NOTICE BE LIABLE FOR ANY CLAIM, OR ANY SPECIAL INDIRECT OR CONSEQUENTIAL
DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,
DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THE DATA FILES OR SOFTWARE.

Except as contained in this notice, the name of a copyright holder
shall not be used in advertising or otherwise to promote the sale,
use or other dealings in these Data Files or Software without prior
written authorization of the copyright holder.
--------------------------------------------------------------------------------------

------------- End of ThirdPartyNotices ---------------------------------------------------


vscode-css-languageservice, vscode-nls
---
The MIT License (MIT)

Copyright (c) Microsoft

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


vscode-html-languageservice
---
The MIT License (MIT)

Copyright (c) Microsoft

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

THIRD-PARTY SOFTWARE NOTICES AND INFORMATION

vscode-html-languageservice incorporates third party material from the projects listed below. The original copyright
notice and the license under which Microsoft received such third party material are set forth below. Microsoft
reserves all other rights not expressly granted, whether by implication, estoppel or otherwise.

1. JS Beautifier (https://github.com/beautify-web/js-beautify)

The MIT License (MIT)

Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

2.	HTML 5.1 W3C Working Draft version 08 October 2015 (http://www.w3.org/TR/2015/WD-html51-20151008/)

%% HTML 5.1 W3C Working Draft NOTICES AND INFORMATION BEGIN HERE
=========================================
Copyright © 2015 W3C® (MIT, ERCIM, Keio, Beihang). This software or document includes material copied
from or derived from HTML 5.1 W3C Working Draft (http://www.w3.org/TR/2015/WD-html51-20151008/.)

THIS DOCUMENT IS PROVIDED "AS IS," AND COPYRIGHT HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT
NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF
THE DOCUMENT ARE SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ANY THIRD PARTY
PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.

COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE
DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS THEREOF.

The name and trademarks of copyright holders may NOT be used in advertising or publicity pertaining to this document or its contents
without specific, written prior permission. Title to copyright in this document will at all times remain with copyright holders.
=========================================
END OF HTML 5.1 W3C Working Draft NOTICES AND INFORMATION

3. Ionic documentation version 1.2.4 (https://github.com/driftyco/ionic-site)

%% Ionic documentation NOTICES AND INFORMATION BEGIN HERE
=========================================
Copyright Drifty Co. http://drifty.com/.

Apache License

Version 2.0, January 2004

http://www.apache.org/licenses/

TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

1. Definitions.

"License" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.

"Licensor" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.

"Legal Entity" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, "control" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.

"You" (or "Your") shall mean an individual or Legal Entity exercising permissions granted by this License.

"Source" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.

"Object" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.

"Work" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).

"Derivative Works" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.

"Contribution" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, "submitted" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as "Not a Contribution."

"Contributor" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.

2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.

3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.

4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:

You must give any other recipients of the Work or Derivative Works a copy of this License; and

You must cause any modified files to carry prominent notices stating that You changed the files; and

You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and

If the Work includes a "NOTICE" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.

5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.

6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.

7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.

8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.

9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.

END OF TERMS AND CONDITIONS
=========================================
END OF Ionic documentation NOTICES AND INFORMATION


vscode-languageserver-types, vscode-uri
---
Copyright (c) Microsoft Corporation

All rights reserved.

MIT License

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


themify
---
LICENSE

- Themify Icons font licensed under: http://scripts.sil.org/OFL
- Code licensed under: http://opensource.org/licenses/mit-license.html
- All brand icons are copyright/trademarks of their respective owners.


file-saver
---
The MIT License

Copyright © 2016 [Eli Grey][1].

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

  [1]: http://eligrey.com


zip.js
---
Copyright (c) 2013 Gildas Lormeau. All rights reserved.
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
1. Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the distribution.
3. The names of the authors may not be used to endorse or promote products
derived from this software without specific prior written permission.
THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

function virtualBack(){let e=!1;const t=$(".uk-modal.uk-open").attr("id");if(t)$$(t).close(),e=!0;else{const t=$(".uk-offcanvas.uk-active").attr("id");if(t)$$(t).close(),e=!0;else{const t=$$("mainEditor").$editor;t.isTextSelected()&&(t.clearSelection(),e=!0)}}return e}window.addEventListener("unhandledrejection",e=>{e.preventDefault();const{reason:t,promise:n}=e;window.console.warn("Unhandled promise rejection:",n&&n.stack||t&&t.stack)}),m.debug=!1,window.$checkEnabled=!1,ace.config.set("basePath","ace"),m.module("embed").require("main","settings","urlQuery","remote","path","model","project","session","files").__new__((function(e){e.unprocessedEvents=[],e.port=null,window.onmessage=function(t){if(e.t())return;const n=t.data,i=t.ports&&t.ports[0],o=(t.origin||"-").split("://").pop();"connect"===n&&i?(i.postMessage("connected"),e.port=i):e.unprocessedEvents.push({port:i,data:n,origin:o}),"loaded"===e.__state__&&(e.unprocessedEvents.forEach(t=>e.i(t)),e.unprocessedEvents.length=0)}})).__init__((function(e,{project:t,settings:n,urlQuery:i,remote:o,path:a,main:s,model:r,session:c,files:l}){const u=i.o.bind(i);if(Object.assign(e,{project:t,settings:n,remote:o,path:a,main:s,model:r,session:c,files:l,projectName:u("name")||u("project"),useFiles:u("files"),usePreview:u("preview"),theme:u("theme")}),e.t())return;e.unprocessedEvents.forEach(t=>e.i(t)),e.unprocessedEvents.length=0;const h=s.s();h.observable.subscribe(({action:t,position:n,selectionRanges:i,selectedText:o,path:a})=>{if(e.port)switch(t){case"focus":case"blur":e.port.postMessage({action:t});break;case"edit":e.port.postMessage({action:"textChange",args:[h.getValue(),a]});break;case"positionChange":e.port.postMessage({action:t,args:[n]});break;case"selectionChange":e.port.postMessage({action:t,args:[{selectedText:o,selectionRanges:i}]})}}),l.observable.subscribe(({action:t,path:n})=>{if(e.port)switch(t){case"open":e.port.postMessage({action:"fileOpen",path:n})}}),c.observable.subscribe(({action:t,project:n})=>{if(e.port)switch(t){case"open":e.port.postMessage({action:"projectOpen",project:n});break;case"close":e.port.postMessage({action:"projectClose"})}}),e.useFiles||(s.l().hide(),s.u().hide(),s.p().hide(),s.v().hide(),s.S().hide(),s.s().setScrollMargin(8,24)),e.usePreview||(s._().hide(),s.k().hide(),s.A().hide(),s.I().hide()),e.theme&&n.C(theme)})).def({t:function(){return!window.$embedMode||["spck.io","www.spck.io"].includes(window.location.hostname)},R:async function({projectName:e,files:t,open:n,origin:i}){const o=this;await o.project.T({name:`«${i}»${e}`,currentFilePath:n,uniqueName:!1,buildCallbackAsync:({dir:e})=>Promise.all(t.map(({path:t,text:n,url:i})=>{if(t){const a=PathUtils.join(e,t);return i?o.remote.F(i).then(e=>GFS.write(a,e)):GFS.write(a,n)}}))})},i:function({data:e,port:t,origin:n}){const i=this,o=i.main.s(),a=i.settings,s=[];if("string"==typeof e&&t)switch(e){case"text":t.postMessage(o.getValue());break;case"theme":t.postMessage(o.getTheme());break;case"mode":t.postMessage(o.getMode());break;case"tabSize":t.postMessage(o.getTabSize());break;case"position":t.postMessage(o.getCursorPosition())}else if("object"==typeof e){const{project:t,files:r,appendFiles:c,open:l,editor:u,clearProjects:h}=e,d=i.projectName||t||"Project";if(h&&("boolean"==typeof h?s.push(i.model.j("RISKY_STUFF")):Array.isArray(h)&&s.push(Promise.all(h.map(e=>ENV.filesDirAsync(e).then(e=>i.model.P(e)))))),r?(r.forEach((e,t)=>{if(!e)throw new Error(`Found a '${e} entry at position ${t} of files array.`)}),s.push(ENV.filesDirAsync(d).then(e=>i.model.N(e).then(()=>c?Promise.all(r.map(({path:e,text:t,url:n})=>{if(e){const o=PathUtils.join(dir,e);return n?i.remote.F(n).then(e=>GFS.write(o,e)):GFS.write(o,t)}})):i.model.P(e).then(()=>i.R({projectName:d,open:l,files:r,origin:n})),()=>i.R({projectName:d,open:l,files:r,origin:n}))))):l&&s.push(ENV.filesDirAsync(name).then(e=>i.main.O(PathUtils.join(e,l)))),u){if("object"!=typeof e)throw new Error("Type mismatch: 'editorConfig' property must be an object.");let t=!1;const{mode:n,fontSize:i,tabSize:r,text:c,gutter:l,theme:h,position:d}=u;"string"==typeof h&&(a.C(h),t=!0),"string"==typeof n&&o.setMode(n),i&&(a.U(i),t=!0),void 0!==r&&(a.B(r),t=!0),"string"==typeof c&&o.setValue(c,!0),"boolean"==typeof l&&(a.L(l),t=!0),"object"===d&&(o.navigateTo(d.row,d.column),o.scrollToLine(d.row,!0,!1)),t&&s.push(a.G().then(a.D()))}}return Promise.all(s)}}),UIkit2.support.mutationobserver=null,UI.ready((function(){m.module("views").require("embed","main","urlQuery","cookieBanner","logger");const e=m.modules,{urlQuery:t,projects:n,session:i,model:o,main:a,prompt:s,settings:r,menu:c}=e,l=t.o.bind(t),u={embedMode:window.$embedMode,fileName:l("fileName"),externalPath:l("externalPath"),fileContent:l("fileContent")};Promise.resolve().then((function(){if("serviceWorker"in navigator)return navigator.serviceWorker.register("service.worker.js").catch($LOG.error.bind($LOG,"[SW ERROR]"))})).then((function(){return m.initialize("views")})).then((function(){return r.D()})).then((function(){if(n.M(),c.switcher().switchToTab("projects"),!u.embedMode&&!u.fileName)return o.W("currentProjectDir").then((function(e){e?i.V(e):i.H()}),(function(){return s.q({en:"Incognito mode detected!",es:"Modo de incógnito detectado!",ja:"シークレットモードが検出されました!",pt:"Modo de navegação anônima detectado!",zh:"检测到无痕模式!",zhTW:"檢測到無痕模式!"},null,{message:{en:"Your browser is operating in incognito, and the editor will not function properly in this mode. Please restart in a normal browsing session."},hideCancel:!0}),n.container().showBatch("empty"),i.H()}))})).then((function(){setTimeout((function(){UI.removeClass(document.getElementById("appContainer"),"uk-invisible");const e=document.getElementById("preloader");e&&e.parentNode&&document.body.removeChild(e)}),350),a.initAsync(u)}))}));const i18nCaseFor=(e,t)=>"string"==typeof t?t:t[e];var RES_I18N={Actions:{New:e=>({en:`New ${e.en}`,es:`${i18nCaseFor(e.$.es,{m:"Nuevo",f:"Nueva"})} ${e.es}`,ja:`新規${e.ja}`,pt:`${i18nCaseFor(e.$.pt,{m:"Novo",f:"Nova"})} ${e.pt}`,ru:`${i18nCaseFor(e.$.ru,{m:"Новая",f:"Hовый"})} ${i18nCaseFor("a",e.ru)}`,zh:`新建${e.zh}`,zhTW:`新增${e.zhTW}`}),Upload:e=>({en:`Upload ${e.en}`,es:`Subir ${e.es}`,ja:`${e.ja} Upload`,pt:`Subir ${e.pt}`,ru:`Загрузить ${i18nCaseFor("a",e.ru)}`,zh:`上传${e.zh}`,zhTW:`上传${e.zhTW}`}),Delete:e=>({en:`Delete ${e.en}`,es:`Borrar ${e.es}`,ja:`${e.ja}を削除`,pt:`Excluir ${e.pt}`,ru:`Удалить ${i18nCaseFor("a",e.ru)}`,zh:`删除${e.zh}`,zhTW:`删除${e.zhTW}`}),Rename:e=>({en:`Rename ${e.en}`,es:`Renombrar ${e.es}`,ja:`${e.ja}を名前を変更`,pt:`Renomear ${e.pt}`,ru:`${i18nCaseFor(e.$.ru,{m:"Переименуйте",ms:"Переименовать",f:"Переименовать"})} ${i18nCaseFor("a",e.ru)}`,zh:`重新命${e.zh}名`,zhTW:`重命${e.zhTW}名`}),Enter:e=>({en:`Enter ${e.en}`,es:`Ingrese el ${e.es}`,ja:`${e.ja}を入力`,pt:`Digite o ${e.pt}`,ru:`Введите ${i18nCaseFor("a",e.ru)}`,zh:`输入${e.zh}`,zhTW:`输入${e.zhTW}`}),Revert:e=>({en:`Revert ${e.en}`,es:`Restituir ${e.es}`,ja:`${e.ja}を取り消す`,pt:`Reverter ${e.pt}`,ru:`Откатить ${i18nCaseFor("a",e.ru)}`,zh:`还原${e.zh}`,zhTW:`復原${e.zhTW}`}),Set:e=>({en:`Set ${e.en}`,es:`Establecer ${e.es}`,ja:`${e.ja}を設定`,pt:`Definir ${e.pt}`,ru:`Установить ${i18nCaseFor("a",e.ru)}`,zh:`设置${e.zh}`,zhTW:`設定${e.zhTW}`}),Undo:e=>({en:`Undo ${e.en}`,es:`Deshacer ${e.es}`,ja:`${e.ja}を取り消す`,pt:`Desfazer ${e.pt}`,ru:`Отменить ${i18nCaseFor("a",e.ru)}`,zh:`撤销${e.zh}`,zhTW:`復原${e.zhTW}`}),Redo:e=>({en:`Redo ${e.en}`,es:`Rehacer ${e.es}`,ja:`${e.ja}をやり直す`,pt:`Refazer ${e.pt}`,ru:`Повторить ${i18nCaseFor("a",e.ru)}`,zh:`重做${e.zh}`,zhTW:`重做${e.zhTW}`}),Import:e=>({en:`Import ${e.en}`,es:`Importar ${e.es}`,ja:`${e.ja}をインポート`,pt:`Importar ${e.pt}`,ru:`Импортировать ${i18nCaseFor("a",e.ru)}`,zh:`导入${e.zh}`,zhTW:`導入${e.zhTW}`}),Export:e=>({en:`Export ${e.en}`,es:`Exportar ${e.es}`,ja:`エクスポート${e.ja}`,pt:`Exportar ${e.pt}`,ru:`Экспорт ${i18nCaseFor("a",e.ru)}`,zh:`导出为${e.zh}`,zhTW:`匯出為${e.zhTW}`}),Create:e=>({en:`Create ${e.en}`,es:`Crear ${e.es}`,ja:`${e.ja}を作成`,pt:`Criar ${e.pt}`,ru:`${i18nCaseFor(e.$.ru,{m:"Создать",ms:"Создавать",f:"Создать"})} ${i18nCaseFor("a",e.ru)}`,zh:`创建新${e.zh}`,zhTW:`建立新${e.zhTW}`}),View:e=>({en:`View ${e.en}`,es:`Ver ${e.es}`,ja:`表示${e.ja}`,pt:`Exibir ${e.pt}`,ru:`${i18nCaseFor(e.$.ru,{m:"Посмотреть",ms:"Просмотр",ns:"Просмотр",f:"Просмотр"})} ${i18nCaseFor("a",e.ru)}`,zh:`查看${e.zh}`,zhTW:`檢視${e.zhTW}`}),GoTo:e=>({en:`Go to ${e.en}`,es:`Ir a ${e.es}`,ja:`${e.ja}へ移動`,pt:`Ir para a ${e.pt}`,ru:`Перейти ${i18nCaseFor("d",e.ru)}`,zh:`跳转到${e.zh}`,zhTW:`前往${e.zhTW}`}),Select:e=>({en:`Select ${e.en}`,es:`Seleccione ${e.es}`,ja:`${e.ja}を選択してください`,pt:`Selecione o ${e.pt}`,ru:`${i18nCaseFor(e.$.ru,{m:"Выбрать",f:"Выберите"})} ${i18nCaseFor("a",e.ru)}`,zh:`请选择${e.zh}`,zhTW:`請選擇${e.zhTW}`}),Failed:e=>({en:`${e.en} Failed`,es:`Fallo al ${e.es}`,ja:`${e.ja}に失敗`,pt:`${e.pt} Falhou`,ru:`Hе удалось ${i18nCaseFor("a",e.ru)}`,zh:`${e.zh}失败`,zhTW:`${e.zhTW}失敗`}),SearchFor:e=>({en:`Search ${e.en}`,es:`Buscar ${e.en}`,ja:`検索: ${e.ja}`,pt:`Procurar ${e.pt}`,ru:`Поиск ${i18nCaseFor("g",e.ru)}`,zh:`查找${e.zh}`,zhTW:`搜尋${e.zhTW}`})},Objects:{File:{en:"File",es:"Archivo",ja:"ファイル",pt:"Arquivo",ru:{n:"файл",g:"файла",a:"файл"},zh:"文件",zhTW:"檔案",$:{es:"m",pt:"m",ru:"m"}},Folder:{en:"Folder",es:"Carpeta",ja:"フォルダ",pt:"Pasta",ru:{n:"папка",g:"папки",a:"папку"},zh:"文件夹",zhTW:"資料夾",$:{es:"f",pt:"f",ru:"f"}},Project:{en:"Project",es:"Proyecto",ja:"プロジェクト",pt:"Projeto",ru:{n:"проект",g:"проекта",a:"проект"},zh:"项目",zhTW:"專案",$:{es:"m",pt:"m",ru:"m"}},Line:{en:"Line",es:"La Línea",ja:"指定行",pt:"Linha",ru:"строке",zh:"指定行",zhTW:"指定列",$:{es:"f",pt:"f",ru:"f"}},TargetPath:{en:"Target path",es:"La ruta de destino",ja:"ターゲットパス",pt:"Caminho de destino",ru:"Целевой путь",zh:"目标路径",zhTW:"目標路徑",$:{es:"f",pt:"m",ru:"m"}},SourcePath:{en:"Source path",es:"La ruta de origen",ja:"ソースパス",pt:"Caminho de origem",ru:"Исходный путь",zh:"源路径",zhTW:"源路徑",$:{es:"f",pt:"m",ru:"m"}},Preview:{en:"Preview",es:"Vista Previa",ja:"プレビュー",pt:"Pré-Visualização",ru:"предпросмотр",zh:"预览",zhTW:"預覽頁面",$:{es:"f",pt:"f",ru:"m"}},Definition:{en:"Definition",es:"Definición",ja:"宣言に移動",pt:"Definição",ru:"определение",zh:"跳转至声明",zhTW:"移動至宣告",$:{es:"f",pt:"f",ru:"n"}},Credentials:{en:"Credentials",es:"Credenciales",ja:"資格情報",pt:"Credenciais",ru:"полномочия",zh:"凭证",zhTW:"憑證",$:{es:"fs",pt:"fs",ru:"ns"}},Labs:{en:"Labs",es:"Labs",ja:"ラボを見る",pt:"Labs",ru:"лаборатории",zh:"实验项目",zhTW:"實驗專案",$:{es:"ms",pt:"ms",ru:"ns"}},Repository:{en:"Repo",es:"Repositorio",ja:"リポジトリ",pt:"Repositório",ru:"репозиторий",zh:"版本库",zhTW:"版本庫",$:{es:"m",pt:"m",ru:"m"}},Upstream:{en:"Upstream",es:"Ascendencia (Upstream)",ja:"上流",pt:"Upstream",ru:"верховую",zh:"上游",zhTW:"上游",$:{es:"f",pt:"m",ru:"f"}},Path:{en:"Path",es:"Ruta",ja:"パス",pt:"Caminho",ru:"Путь",zh:"路径",zhTW:"路徑",$:{es:"f",pt:"m",ru:"m"}},Remote:{en:"Remote",es:"Remoto",ja:"リモート",pt:"Remoto",ru:{n:"Внешнее",g:"Внешняя",a:"Внешнее"},zh:"远端",zhTW:"遠端",$:{es:"m",pt:"m",ru:"n"}},Diff:{en:"Diff",es:"Diff",ja:"差分",pt:"Comparação",ru:"Различия",zh:"差异",zhTW:"比較差異",$:{es:"m",pt:"f",ru:"f"}},Branch:{en:"Branch",es:"Ramal",ja:"ブランチ",pt:"Ramo",ru:{n:"Ветвь",g:"Bетви",a:"Bетвь"},zh:"分支",zhTW:"分支",$:{es:"m",pt:"m",ru:"f"}},Log:{en:"Log",es:"Reg.",ja:"ログ",pt:"Histórico",ru:"Журнал",zh:"日志",zhTW:"日誌",$:{es:"m",pt:"m",ru:"m"}},Push:{en:"Push",es:"Impulsar",ja:"プッシュ",pt:"Empurrar",ru:"Отправить",zh:"推送(Push)",zhTW:"推送",$:{es:"m",pt:"m",ru:"m"}},Pull:{en:"Pull",es:"Incorporar",ja:"プル",pt:"Puxar",ru:"Получить",zh:"拉取(Pull)",zhTW:"拉取",$:{es:"m",pt:"m",ru:"m"}},Fetch:{en:"Fetch",es:"Descargar",ja:"フェッチ",pt:"Obter",ru:"Извлечь",zh:"获取",zhTW:"獲取",$:{es:"m",pt:"m",ru:"m"}},RemoteUrl:{en:"Remote URL",es:"URL Remota",ja:"リモート URL ",pt:"URL Remota",ru:"URL внешнего",zh:"远端 URL ",zhTW:"遠端 URL ",$:{es:"m",pt:"m",ru:"m"}},RecoveredFile:{en:"Recovered File",es:"Archivo Recuperado",ja:"回収されたファイル",pt:"Arquivo Recuperado",ru:"восстановленный файл",zh:"恢復的件恢",zhTW:"恢復的件恢",$:{es:"m",pt:"m",ru:"m"}},Author:{en:"Author",es:"Autor",ja:"作者",pt:"Autor",ru:{n:"Автор",g:"Aвтора",a:"Автор"},zh:"作者",zhTW:"作者",$:{es:"m",pt:"m",ru:"m"}},AuthorEmail:{en:"Author Email",es:"E-mail del Autor",ja:"作者メールアドレス",pt:"Autor Email",ru:"Эл.почта автора",zh:"作者邮件",zhTW:"作者電郵",$:{es:"m",pt:"m",ru:"m"}},CommitMessage:{en:"Commit Message",es:"Mensaje de Consigna",ja:"コミットメッセージ",pt:"Mensagem de Submissão",ru:"Сообщение фиксации",zh:"提交消息",zhTW:"提交訊息",$:{es:"f",pt:"f",ru:"n"}},ActionRequired:e=>({en:`Action Required: ${e.en}`,es:`Acción Requerida: ${e.es}`,ja:`手動で：${e.ja}`,pt:`Ação Necessária: ${e.pt}`,ru:`Необходимое действие: ${e.ru}`,zh:`手动执行：${e.zh}`,zhTW:`手動執行：${e.zhTW}`}),SuccessfulFor:e=>({en:`${e.en} Successful`,es:`${e.es} Exitoso`,ja:`${e.ja}成功`,pt:`${e.pt} bem Sucedido`,ru:`${i18nCaseFor("n",e.ru)} успешно`,zh:`${e.zh}成功`,zhTW:`${e.zhTW}成功`}),NameFor:e=>({en:`${e.en} Name`,es:`Nombre del ${e.es}`,ja:`${e.ja}名`,pt:`Nome do ${e.pt}`,ru:`имя ${i18nCaseFor("g",e.ru)}`,zh:`${e.zh}名`,zhTW:`${e.zhTW}名`}),BranchWithName:e=>({en:`Branch: ${e}`,es:`Ramal: ${e}`,ja:`ブランチ: ${e}`,pt:`Ramo: ${e}`,ru:`Ветвь: ${e}`,zh:`当前分支: ${e}`,zhTW:`目前分支: ${e}`}),Echo:e=>({en:e,es:e,ja:e,pt:e,ru:e,zh:e,zhTW:e,$:{es:"m",pt:"m",ru:"m"}})},Elements:{Ok:i18nTag({en:"Ok",ja:"確認",zh:"确认",zhTW:"確認"}),Cancel:i18nTag({en:"Cancel",es:"Cancelar",ja:"キャンセル",pt:"Cancelar",ru:"Отменить",zh:"取消",zhTW:"取消"}),Revert:i18nTag({en:"Revert",es:"Restituir",ja:"変更の取り消し",pt:"Reverter",ru:"Откатить",zh:"还原",zhTW:"還原"}),Undo:i18nTag({en:"Undo",es:"Deshacer",ja:"取り消す",pt:"Desfazer",ru:"Отменить",zh:"撤销",zhTW:"復原"}),Redo:i18nTag({en:"Redo",es:"Rehacer",ja:"やり直す",pt:"Refazer",ru:"Вернуть",zh:"重做",zhTW:"重做"}),Paste:i18nTag({en:"Paste",es:"Pegar",ja:"ペースト",pt:"Colar",ru:"Вставить",zh:"粘贴",zhTW:"貼上"}),Cut:i18nTag({en:"Cut",es:"Cortar",ja:"カット",pt:"Cortar",ru:"Вырезать",zh:"剪切",zhTW:"剪下"}),Delete:i18nTag({en:"Delete",es:"Borrar",ja:"削除",pt:"Excluir",ru:"Удалить",zh:"删除",zhTW:"删除"}),Rename:i18nTag({en:"Rename",es:"Renombrar",ja:"名前を変更",pt:"Renomear",ru:"Переименование",zh:"重新命名",zhTW:"重命名"}),Edit:i18nTag({en:"Edit",es:"Edita",ja:"編集",pt:"Editar",ru:"Правка",zh:"编辑",zhTW:"編輯"}),ShareLink:i18nTag({en:"Share Link",es:"Compartir Enlace",ja:"共有リンク",pt:"Compartilhar Link",ru:"Поделиться ссылкой",zh:"分享链接",zhTW:"分享鏈接"}),Export:i18nTag({en:"Export",es:"Exportar",ja:"エクスポート",pt:"Exportar",ru:"экспорт",zh:"导出",zhTW:"匯出"}),Format:i18nTag({en:"Format",es:"Formato",ja:"自動インデント",pt:"Formato",ru:"Формат",zh:"自动缩进",zhTW:"自動縮排"}),FindAll:i18nTag({en:"Find All",es:"Buscar Todos",ja:"すべて検索",pt:"Localizar Tudo",ru:"Найти все",zh:"查找全部",zhTW:"尋找所有項目"}),Find:i18nTag({en:"Find",es:"Buscar",ja:"検索",pt:"Procurar",ru:"Найти",zh:"查找",zhTW:"尋找"}),Replace:i18nTag({en:"Replace",es:"Reemplazar",ja:"検索",pt:"Substituir",ru:"Заменить",zh:"替换",zhTW:"替換"}),ReplaceAll:i18nTag({en:"Replace All",es:"Reemplaza Todas",ja:"すべて置換",pt:"Substituir Tudo",ru:"Заменить все",zh:"全部替换",zhTW:"全部取代"}),FindResults:i18nTag({en:"Find Results",es:"Resultados",ja:"検索結果",pt:"Resultados",ru:"Найти результаты",zh:"查找结果",zhTW:"搜尋結果"}),Open:i18nTag({en:"Open",es:"Abrir",ja:"開",pt:"Abrir",ru:"Открыть",zh:"打开",zhTW:"開啟"}),ShowInfo:i18nTag({en:"Show Info",es:"Mostrar Info",ja:"情報を表示",pt:"Mostrar Info",ru:"информацию",zh:"显示信息",zhTW:"顯示信息"}),CommitAll:i18nTag({en:"Commit All",es:"Consigna Todos",ja:"すべてコミット",pt:"Submeter Todos",ru:"Фиксировать все",zh:"全部提交",zhTW:"全部提交"}),RevertAll:i18nTag({en:"Revert All",es:"Restituir Todos",ja:"すべて変更の取り消し",pt:"Reverter Todos",ru:"откатить все",zh:"全部还原",zhTW:"全部還原"}),Checkout:i18nTag({en:"Checkout",es:"Adquirir",ja:"チェックアウト",pt:"Restaurar",ru:"Извлечение",zh:"检出",zhTW:"取出"}),Local:i18nTag({en:"Local",es:"Local",ja:"ローカル",pt:"Local",ru:"Локальное",zh:"本地",zhTW:"本地"}),Branches:i18nTag({en:"Branches",es:"Ramals",ja:"ブランチ",pt:" Ramos",ru:"ветви",zh:"分支",zhTW:"分支"}),RevertAndCheckout:i18nTag({en:"Revert & Checkout",es:"Restituir & Adquirir",ja:"取り消し/チェックアウト",pt:"Reverter e Restaurar",ru:"Откатить и Извлечение",zh:"还原/检出",zhTW:"復原/取出"}),MarkResolved:i18nTag({en:"Mark Resolved",es:"Marcar Resuelto",ja:"解決済みとする",pt:"Marcar Resolvido",ru:"Пометить как улаженный",zh:"标记为已解决",zhTW:"標記為已解決"}),LogHistory:i18nTag({en:"Log History",es:"Reg. Histórico",ja:"ログの履歴",pt:"Histórico",ru:"Сообщения журнала",zh:"历史记录",zhTW:"日誌歷史"}),Remotes:i18nTag({en:"Remotes",es:"Remotos",ja:"リモート",pt:"Remotos",ru:"Bнешние",zh:"远端",zhTW:"遠端"}),RemoteBranches:i18nTag({en:"Remote Branches",es:"Ramals Remoto",ja:"リモートブランチ",pt:"Ramos Remoto",ru:"Bетви внешнего",zh:"远端分支",zhTW:"遠端分支"}),GitCredentials:i18nTag({en:"Git Credentials",es:"Git Credenciales",ja:"Git 資格情報",pt:"Git Credenciais",ru:"Git Удостоверения",zh:"Git 凭证",zhTW:"Git 憑證"}),PrivateRepository:i18nTag({en:"Private Repository",es:"Repositorio Privado",ja:"プライベートリポジトリ",pt:"Repositório Privado",ru:"частный репозиторий",zh:"私版本库",zhTW:"私版本庫"}),CloneRepo:i18nTag({en:"Clone Repo",es:"Clonar Repo",ja:"クローン(複製)",pt:"Clonar Repositório",ru:"Клонировать хранилище",zh:"克隆版本库",zhTW:"克隆版本庫"})},Placeholders:{EnterNameOrPath:{en:"Enter Name or Path",es:"Ingrese Nombre o Ruta",ja:"ファイルパス",pt:"Insira Nome ou Caminho",ru:"Введите имя или путь",zh:"输入名或路径",zhTW:"輸入名或路徑"},HttpsUrl:{en:"URL (Start with https://)",es:"URL (Comienzan con https://)",ja:"「https://」で始まるURL",pt:"URL (Iniciam com https://)",ru:"URL (адреса начинаются с https://)",zh:"URL 以「https://」开始",zhTW:"「https://」開頭的 URL"},Username:{en:"Username",es:"Nombre de Usuario",ja:"ユーザー名",pt:"Usuário",ru:"Имя пользователя",zh:"用户名",zhTW:"帳號"}},ErrorMessages:{CannotBeEmptyFor:e=>i18nTag({en:`${e.en} cannot be empty.`,es:`${e.es} no puede estar vacío.`,ja:`${e.ja}は空にすることはできません`,pt:`${e.pt} não pode estar vazio.`,ru:`${i18nCaseFor("n",e.ru)} не может быть пустым`,zh:`${e.zh}不能为空`,zhTW:`${e.zhTW}不能為空`}),InvalidCharsFound:e=>i18nTag({en:`Invalid characters: ${e}`,es:`Caracteres inválidos: ${e}`,ja:`無効な文字: ${e}`,pt:`Caracteres inválidos: ${e}`,ru:`Недопустимые символы: ${e}`,zh:`无效字符: ${e}`,zhTW:`無效字符: ${e}`}),ExistsFor:e=>i18nTag({en:`${e.en} already exists.`,es:`${e.es} ya existe.`,ja:`${e.ja}は既に存在します`,pt:`${e.pt} já existe.`,ru:`${i18nCaseFor("n",e.ru)} уже существует`,zh:`${e.zh}已存在`,zhTW:`${e.zhTW}已經存在`}),NotExistsFor:e=>i18nTag({en:`${e.en} does not exists.`,es:`${e.es} no existe.`,ja:`${e.ja}が存在しません`,pt:`${e.pt} não existe.`,ru:`${i18nCaseFor("n",e.ru)} не существует`,zh:`${e.zh}不存在`,zhTW:`${e.zhTW}不存在`}),InvalidFor:e=>i18nTag({en:`${e.en} is invalid.`,es:`${e.es} no es válida.`,ja:`${e.ja}は無効です。`,pt:`${e.pt} é inválido.`,ru:`${i18nCaseFor("n",e.ru)} недействительна`,zh:`${e.zh}无效`,zhTW:`${e.zhTW}無效`}),DecodeError:i18nTag({en:"Decoding Error",es:"Error de Decodificación",ja:"デコードエラー",pt:"Erro na decodificação",ru:"Ошибка декодирования",zh:"错误解码",zhTW:"錯誤解碼"}),ManualRecoveryRequired:e=>i18nTag({en:`Recovered an unsaveable file to [${e}]. This file cannot be saved, please copy the text to another application to prevent data loss.`,es:`Se recuperó un archivo que no se puede guardar en [${e}]. Este archivo no se puede guardar, copie el texto en otra aplicación para evitar la pérdida de datos.`,ja:`保存できないファイルを [${e}] に復元しました。このファイルは保存できません。データの損失を防ぐため、テキストを別のアプリケーションにコピーしてください。`,pt:`Recuperou um arquivo não salvável para [${e}]. Não é possível salvar este arquivo. Copie o texto para outro aplicativo para evitar a perda de dados.`,ru:`Восстановил недоступный файл в [${e}]. Этот файл не может быть сохранен, пожалуйста, скопируйте текст в другое приложение, чтобы предотвратить потерю данных.`,zh:`已将无法保存的文件恢复到 [${e}]。无法保存此文件，请复制文本到另一个应用程序以防止数据丢失。`,zhTW:`已將無法保存的文件恢復到 [${e}]。無法保存此文件，請複製文本到另一個應用程序以防止數據丟失。`})}};function i18nAttributes(e){return Object.keys(e).reduce((t,n)=>("$"!==n&&(t["data-i18n-"+n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()]=e[n]),t),{})}function i18nTag(e,t="span"){return e=i18nAttributes(e),`<${t} ${Object.keys(e).reduce((t,n)=>t+`${n}="${e[n]}"`,"")}></${t}>`}function deferLatestToNextAnimationFrame(e,t){let n,i,o,a=0;return function(){return n=this,i=arguments,a++,o||(o=new Promise(t=>{requestAnimationFrame(()=>{a=0,o=null,t(e.apply(n,i))})})),a>=t?o:null}}class LFUCache{constructor(e,t){this._keys=0,this._maxHits=1,this._cache={},this._hits={},this.maxSize=e,this.evictHitRatio=t}clear(){this._keys=0,this._maxHits=1,this._cache={},this._hits={}}find(e){const{_cache:t}=this;return Object.keys(t).find(n=>t[n]===e)}get keys(){return Object.keys(this._cache)}get(e){const{_hits:t,_maxHits:n,_cache:i}=this,o=++t[e]||void 0;return o&&(this._maxHits=o>n?o:n)&&i[e]}rename(e,t){const{_hits:n,_cache:i}=this;i[t]=i[e],n[t]=n[e],delete i[e],delete n[e]}del(e){const{_hits:t,_cache:n}=this;delete n[e],delete t[e],this._keys--}set(e,t){return this._keys++,this._keys>this.maxSize&&this._evict(),this._hits[e]=1,this._cache[e]=t}_evict(){const{_hits:e,_cache:t,_maxHits:n,evictHitRatio:i}=this,o={},a={};this._keys=0,Object.keys(e).forEach(s=>{const r=e[s];r&&r/n>i&&(this._keys++,o[s]=1,a[s]=t[s])}),this._cache=a,this._hits=o,this._maxHits=1}}function PromisePool({data:e,promiseGenerator:t,maxConcurrency:n=1,retryAttempts:i=0,useRaf:o=!1}){const a=[],s=e.map((function(e){return{failures:0,entry:e}}));let r=!1,c=0;return new Promise((function(e,t){for(let i=0;i<n&&l(e,t);i++);}));function l(e,n){if(s.length){let u=s.pop();return c++,t(u.entry).then((function(t){a.push(t),c--,r||(o?requestAnimationFrame(l.bind(this,e,n)):l(e,n))}),(function(t){u.failures<i?(u.failures++,s.push(u),c--,r||(o?requestAnimationFrame(l.bind(this,e,n)):l(e,n))):(r=!0,n(t))})),!0}return!(0===c&&!r)||(e(a),!1)}}define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/lang"),a=e("../lib/event"),s=e("../keyboard/hash_handler").HashHandler,r=e("../lib/keys"),c='<div class="ace_search right">    <button action="toggleReplace" class="ace_search_toggle collapse" title="Toggle Replace"></button>    <div class="ace_search_form">      <div class="uk-flex uk-flex-middle uk-flex-space-between">        <div class="uk-flex-item-1">          <button action="findAll" class="ace_icon find-all" title="All (Alt-Enter)"></button>          <button action="toggleRegexpMode" class="ace_icon x-menu-toggle x-outline regex" title="RegExp Search"></button>          <button action="toggleCaseSensitive" class="ace_icon x-menu-toggle x-outline case-sensitive" title="Case-Sensitive Search"></button>          <button action="toggleWholeWords" class="ace_icon x-menu-toggle x-outline whole-word" title="Whole Word Search"></button>        </div>        <button action="hide" class="ace_icon close" title="Close (Esc)"></button>      </div>      <div class="uk-flex">        <div class="uk-flex-item-1">          <input class="uk-input" placeholder="Find" spellcheck="false">          <span class="ace_search_counter"></span>        </div>        <button action="findPrev" class="ace_icon prev" title="Previous (Ctrl-Shift-G)"></button>        <button action="findNext" class="ace_icon next" title="Next (Ctrl-G)"></button>      </div>    </div>    <div class="ace_replace_form uk-flex uk-flex-middle">      <div class="uk-flex-item-1">        <input class="uk-input" placeholder="Replace" spellcheck="false">      </div>      <div action="replaceAndFindNext" class="ace_icon replace" title="Replace"></div>      <div action="replaceAll" class="ace_icon replace-all" title="Replace All"></div>    </div></div>'.replace(/> +/g,">"),l=function(e,t,n){var o=i.createElement("div");o.innerHTML=c,this.element=o.firstChild,this.checkedClass="uk-active",this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},this.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector("input.uk-input"),this.replaceInput=this.replaceBox.querySelector("input.uk-input"),this.searchCounter=e.querySelector(".ace_search_counter")},this.$init=function(){var e=this.element;this.$initElements(e);var t=this;function n(e){e.preventDefault(),e.stopPropagation();var n=(e.target||e.srcElement).getAttribute("action");n&&t[n]?t[n]():t.$searchBarKb.commands[n]&&t.$searchBarKb.commands[n].exec(t)}function i(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&t.focus()}e.addEventListener("click",(function(e){n(e),i(e)})),e.addEventListener("touchstart",n),e.addEventListener("touchend",i),a.addCommandKeyListener(e,(function(e,n,i){var o=r.keyCodeToString(i),s=t.$searchBarKb.findKeyCommand(n,o);s&&s.exec&&(s.exec(t),a.stopEvent(e))})),this.$onChange=o.delayedCall((function(){t.find(!1,!1)})),a.addListener(this.searchInput,"input",(function(){t.$onChange.schedule(20)})),a.addListener(this.searchInput,"focus",(function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()})),a.addListener(this.replaceInput,"focus",(function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()}))},this.$closeSearchBarKb=new s([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]),this.$searchBarKb=new s,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-R|Ctrl-H|Command-Option-F":function(e){e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus()},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout((function(){e.hide()}))},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]),this.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(e){i.setCssClass(this.replaceOption,this.checkedClass,this.searchRange),i.setCssClass(this.replaceOption,this.checkedClass,this.replaceOption.checked),i.setCssClass(this.regExpOption,this.checkedClass,this.regExpOption.checked),i.setCssClass(this.wholeWordOption,this.checkedClass,this.wholeWordOption.checked),i.setCssClass(this.caseSensitiveOption,this.checkedClass,this.caseSensitiveOption.checked),this.replaceBox.style.display=this.replaceOption.checked?"":"none",this.find(!1,!1,e)},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t,n){var o=!this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",o),this.editor._emit("findSearchBox",{match:!o}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=0,i=0;if(t){var o=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),a=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(a-=e.session.doc.positionToIndex(this.searchRange.start));for(var s,r=t.lastIndex=0;(s=t.exec(o))&&(n++,(r=s.index)<=a&&i++,!(n>999))&&(s[0]||(t.lastIndex=r+=1,!(r>=o.length))););}this.searchCounter.textContent=i+"/"+(n>999?"999+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var e=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;i.setCssClass(this.searchBox,"ace_nomatch",e),this.editor._emit("findSearchBox",{match:!e}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus(),this.editor._emit("searchBoxClose")},this.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.editor._emit("searchBoxOpen"),this.element.style.display="",this.replaceOption.checked=t,e&&(this.searchInput.value=e),t?(this.replaceInput.focus(),this.replaceInput.select()):(this.searchInput.focus(),this.searchInput.select()),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput}}).call(l.prototype),t.SearchBox=l,t.Search=function(e,t){(e.searchBox||new l(e)).show(e.session.getTextRange(),t)}})),window.require(["ace/ext/searchbox"],(function(){})),m.module("assets").__new__((function(e){e.svgIcons={github:'<svg class="svg-icon" style="width:100%" viewBox="-2 0 20 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg>'}})),m.module("git").def({K:function(){return window.localStorage},Z:async function(){try{return JSON.parse(await GFS.readFile(await ENV.gitConfigPathAsync(),{encoding:"utf8"}))}catch(e){return{}}},Y:async function(e){await GFS.write(await ENV.gitConfigPathAsync(),JSON.stringify(e),{atomic:!0})},J:function(e){return(e=e.toLowerCase()).startsWith("git@")?e="https://"+e.replace("git@","").replace(":","/"):e.startsWith("ssh://git@")?e="https://"+e.replace("ssh://git@","").replace(":","/"):e.startsWith("ssh://")&&(e="https://"+e.replace("ssh://","").replace(":","/")),PathUtils.hasExt(e,".git")||(e.includes("github.com")||e.includes("gitlab.com")||e.includes("bitbucket.org"))&&(e+=".git"),e=e.replace(/https:\/\/([\w]+)@bitbucket.org/,"https://bitbucket.org")},X:function(e){if(!e)return e;const t=e.match(/git@([A-Za-z0-9-.]+):/);return t?"https://"+t[1]+"/":e},ee:function(e){return PathUtils.basename(PathUtils.hasExt(e,".git")?e.slice(0,e.length-4):e)},te:function(e){const t=new RegExp("https?://([\\w_\\.\\-@:]+)/([\\w_\\.\\-/]+)"),n=e.match(t);return n?{host:this.X(n[1]),repoName:this.ee(n[2]),url:e}:null},ne:async function(e){const t=await this.ie(e);return!!t.username&&!!t.token},ie:async function(e){const t=await this.Z(),n=UI.defaults(t,this.K());return{username:n["git.username::"+e]||n["git.username::git"]||"",token:n["git.token::"+e]||n["git.token::git"]||"",email:n["git.email::"+e]||n["git.email::git"]||""}},oe:async function(e,t,n,i){const o=await this.Z();e?(o["git.username::"+e]=t,o["git.token::"+e]=n,o["git.email::"+e]=i):(o["git.username::git"]=t,o["git.token::git"]=n,o["git.email::git"]=i),await this.Y(o)}}),m.module("history").__new__((function(e){e.HistoryTracker=function(){this.reset()},e.HistoryTracker.prototype={reset:function(){this.current=null,this.undoStack=[],this.redoStack=[]},getLastRedo:function(){return this.redoStack.length?this.redoStack[this.redoStack.length-1]:null},getLastUndo:function(){return this.undoStack.length?this.undoStack[this.undoStack.length-1]:null},truncate:function(e){this.undoStack=this.undoStack.slice(this.undoStack.length-e)},clearRedo:function(){this.redoStack.length=0},push:function(e){this.current&&this.pushUndo(this.current),this.current=e,this.clearRedo()},pushUndo:function(e){return this.undoStack.push(e)},popUndo:function(){return this.undoStack.pop()},pushRedo:function(e){return this.redoStack.push(e)},popRedo:function(){return this.redoStack.pop()},canUndo:function(){return this.undoStack.length>0},canRedo:function(){return this.redoStack.length>0},redo:function(e){const t=this.popRedo();return t&&(e?(this.current&&this.pushUndo(this.current),this.current=t):this.pushUndo(t)),t},undo:function(e){const t=this.popUndo();return t&&(e?(this.current&&this.pushRedo(this.current),this.current=t):this.pushRedo(t)),t}}})),function(e){const t=["Ctrl-p","Ctrl-s","Ctrl-f","Ctrl-g","Ctrl-r","Ctrl-Shift-R","Meta-r","Meta-Shift-R","Meta-q"];e.addEventListener("keydown",(function(e){UI.polyfillKeyboardEvent(e);let n="";e.metaKey&&(n+="Meta-"),e.ctrlKey&&(n+="Ctrl-"),e.shiftKey&&(n+="Shift-"),e.altKey&&(n+="Alt-"),n+=e.key,-1!==t.indexOf(n)&&UI.preventEvent(e)}))}(document),m.module("memory").require("prompt").__init__((function(e,{prompt:t}){const n=window.performance&&window.performance.memory;Object.assign(e,{prompt:t,supported:!!n&&["spck.io","www.spck.io"].includes(window.location.hostname),lowOnMemory:!1,observable:new ObservableClass,memory:n||{totalJSHeapSize:1,usedJSHeapSize:-1,jsHeapSizeLimit:100},CRITICAL_USAGE_LOW_MEMORY:100,ALLOWED_LANGUAGE_SERVICE_INITIAL_FILES_LIMIT:30,ALLOWED_LANGUAGE_SERVICE_INITIAL_SIZE_LIMIT:20971520,LANGUAGE_SERVICE_FILE_SIZE_LIMIT:2097152,EDITOR_FILE_SIZE_LIMIT:5242880})})).def({ae:function(){const e=this;e.supported&&GA_SendEvent("memory_profile","n/a","mem_used_"+e.se())},se:function(){const e=this.memory;return Math.round(100*e.usedJSHeapSize/e.totalJSHeapSize)},ce:function(){const e=this;if(e.supported){const t=e.se();t>=e.CRITICAL_USAGE_LOW_MEMORY&&t<100&&(e.le(),e.ae())}},le:function(){const e=this;e.lowOnMemory||(e.lowOnMemory=!0,e.prompt.ue("Low Memory Warning","System memory is running low, language service and syntax checking will be disabled."),e.observable.run({lowOnMemory:!0}))},he:async function(e){return await GFS.size(e)<this.LANGUAGE_SERVICE_FILE_SIZE_LIMIT},de:function(e){return e.length<this.LANGUAGE_SERVICE_FILE_SIZE_LIMIT},pe:async function(e,t){return(t&&t.externalContent?t.externalContent.length:await GFS.size(e))<this.EDITOR_FILE_SIZE_LIMIT}});var IDB=new Dexie("ProjectStore");IDB.version(1).stores({projects:"pid, name, hash, repo",files:"id, &path, &fid, type, hash",folders:"id, &path, hash",data:"fid",libraries:"url",sessions:"pid",meta:"key"}),IDB.version(2).stores({projects:"pid",files:"id, &path, &fid",folders:"id, &path",data:"fid",libraries:"url",meta:"key"}).upgrade(e=>Promise.all([e.projects.filter(e=>!e.dir).modify(e=>{const t=e.ref?`${e.pid}:${e.ref.split("/").pop()}`:e.pid;e.olddir=t,e.dir=`${t}/${e.name}`}),e.folders.filter(e=>e.deleted).delete(),e.files.filter(e=>e.deleted).delete(),e.data.filter(e=>"base64"===e.encoding).modify(e=>{e.text=castAsReadableArrayBuffer(Buffer.from(e.text,"base64")),e.encoding="binary"})])),IDB.version(3).stores({files:"id, &path, &fid",folders:"id, &path",data:"fid",meta:"key"});var Buffer=buffer.Buffer,GlobalErrorCodes={ProjectNotFound:"project:404",FileNotFound:"file:404",RemoveFailed:"rm:500",NotADirectory:"rmdir:405",DestinationExists:"mv:403",SourceNotFound:"src:404",INodeNotFound:"inode:404",RemoteNotFound:"remote:404",CriticalDeletionError:"delete:500",InvalidArgument:"args:400"};class ExtError extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const ERROR_SOURCE="filesystem",isIDB=e=>e.startsWith("idb/"),ext=e=>{const t=basename(e),n=t.lastIndexOf(".");return-1==n?"":t.substr(n).toLowerCase()},normPathCache=new LFUCache(800,.8),normalizePath=e=>{const t=normPathCache.get(e);if(t)return t;if(e.indexOf("\0")>=0)throw new ExtError({name:"InvalidArgument",src:"filesystem:normalizePath",message:RES_I18N.ErrorMessages.InvalidFor(RES_I18N.Objects.Path),code:GlobalErrorCodes.InvalidArgument});if(!e)throw new ExtError({name:"InvalidArgument",src:"filesystem:normalizePath",message:RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.Path),code:GlobalErrorCodes.InvalidArgument});return normPathCache.set(e,e.split("/").filter((e,t)=>(""!==e||0===t)&&"."!==e).join("/"))},dirname=e=>{const t=e.lastIndexOf("/");return-1===t?".":0===t?"/":e.slice(0,t)},relativeTo=(e,t)=>t?e.slice(t.length+(t.endsWith("/")?0:1)):e,childOf=(e,t)=>!!e&&(e=normalizePath(e),t=normalizePath(t),e.startsWith(t+"/")||e===t),basename=e=>{const t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)},hasExt=(e,t)=>e&&ext(e)===t,join=(e,t)=>null==e||null==t?null:e.replace(/\/$/,"")+"/"+t.replace(/^\//,""),$warn=console?console.warn:()=>{},FileType={FILE:32768,DIRECTORY:16384,SYMLINK:40960};class Stats{constructor({size:e,mode:t,atimeMs:n=null,mtimeMs:i,ctimeMs:o}){let a=Date.now();this.atimeMs="number"!=typeof n?a:n,this.mtimeMs="number"!=typeof i?a:i,this.ctimeMs="number"!=typeof o?a:o,this.size=e,this.mode=Stats.normalizeMode(t),this.uid=this.gid=this.ino=0}get atime(){return new Date(this.atimeMs)}get mtime(){return new Date(this.mtimeMs)}get ctime(){return new Date(this.ctimeMs)}toBuffer(){const e=Buffer.alloc(32);return e.writeUInt32LE(this.size,0),e.writeUInt32LE(this.mode,4),e.writeDoubleLE(this.atimeMs,8),e.writeDoubleLE(this.mtimeMs,16),e.writeDoubleLE(this.ctimeMs,24),e}isFile(){return(61440&this.mode)===FileType.FILE}isDirectory(){return(61440&this.mode)===FileType.DIRECTORY}isSymbolicLink(){return(61440&this.mode)===FileType.SYMLINK}chmod(e){return this.mode=61440&this.mode|e}static normalizeMode(e){let t=e>0?e>>12:0;4!==t&&8!==t&&10!==t&&14!==t&&(t=8);let n=511&e;return n=73&n?493:420,8!==t&&(n=0),(t<<12)+n}}const messageHandlers=window.webkit&&window.webkit.messageHandlers;if(messageHandlers&&messageHandlers.file&&messageHandlers.system){class e{constructor({file:e,system:t}){this.$resourceUrl=null,this._file=e,this._system=t,this._id=1,this._callbacks={}}showToast(e,t){this._system.postMessage({method:"showToast",message:e,duration:t})}launchWebView(e){this._system.postMessage({method:"launchWebView",url:e})}appVersion(){return this.call("appVersion")}versionName(){return this.call("versionName")}clipboardText(){return this.call("clipboardText")}getOrientation(){return this.call("getOrientation")}getFileContent(){return this.call("getFileContent")}getDirectory(){return this.call("getDirectory")}mkdirp(e){return this.call("mkdirp",{path:e})}exists(e){return this.call("exists",{path:e})}readFile(e,t){return this.call("readFile",{path:e,encoding:t})}remove(e){return this.call("remove",{path:e})}readlink(e){return this.call("readlink",{path:e})}writelink(e,t){return this.call("writelink",{path:e,target:t})}write(e,t,n){return this.call("write",{path:e,contents:t,base64:n})}readdir(e,t,n){return this.call("readdir",{path:e,skipFiles:t,skipFolders:n})}readdirDeep(e,t,n){return this.call("readdirDeep",{path:e,files:t,folders:n})}lstat(e){return this.call("lstat",{path:e})}mv(e,t){return this.call("mv",{src:e,target:t})}call(e,t){t=t||{};const n=this._id++;return this._system.postMessage(Object.assign({method:e,id:n},t)),new Promise((e,t)=>{this._callbacks[n]={resolve:e,reject:t}})}send(e,t){const n=this._callbacks[e];n&&(n.resolve(t),delete this._callbacks[e])}sendError(e,t){const n=this._callbacks[e];n&&(n.reject(t),delete this._callbacks[e])}}window.Android=window.IOSBridge=new e(messageHandlers)}class DeviceSystem{constructor(e){this._device=e}get supported(){return this._device&&this._device.appVersion}get device(){return this._device}showToast(e,t){const n=this._device;n&&n.showToast?n.showToast(e,"long"):((t=t||{}).timeout=3500,UI.message(e,t))}launchWebView(e){const t=this._device;return!(!t||!t.launchWebView)&&(t.launchWebView(e),!0)}resourceUrl(e){const t=this._device;return t?t.getUrlFor?t.getUrlFor(e):join(t.$resourceUrl,e):null}async saveBase64(e,t){const n=this._device;return n&&n.saveBase64?n.saveBase64(Buffer.from(t).toString("base64"),e):saveAs(new Blob([t]),e)}async appVersion(){const e=this._device;return e&&e.appVersion?e.appVersion():null}async versionName(){const e=this._device;return e&&e.versionName?e.versionName():null}async setOrientation(e){const t=this._device;t&&t.setOrientation&&t.setOrientation(e)}async getOrientation(){const e=this._device;return e&&e.getOrientation?e.getOrientation():null}async clipboardText(){const e=this._device;return e&&e.clipboardText?e.clipboardText():null}async getFileContent(){const e=this._device;return e&&e.getFileContent?e.getFileContent():null}}var DS=new DeviceSystem(window.Android);class DeviceFileSystem{constructor(e){this.device=e,this._supported=!!e&&!!(e.getDirectory&&e.mkdirp&&e.exists&&e.readFile&&e.remove&&e.readlink&&e.writelink&&e.write&&e.readdir&&e.readdirDeep&&e.lstat&&e.mv),this._supported||$warn("DeviceFileSystem is not operational: interface missing")}get legacy(){return this.device.appVersion&&this.device.appVersion()<=33}get supported(){return this._supported}async getDirectoryAsync(){return this._directory||(this._directory=await this.device.getDirectory())}async readFile(e,t){const{contents:n}=await DeviceFileSystem.promisifyStatus(await this.device.readFile(e,t));return"utf8"===t?n:Buffer.from(n,"base64")}async remove(e){if(e===this._directory)throw new ExtError({name:"CriticalDeletionError",src:`${this.constructor.name}:remove`,message:"Critical deletion error.",code:GlobalErrorCodes.CriticalDeletionError});return DeviceFileSystem.promisifyStatus(await this.device.remove(e))}async readlink(e){const{contents:t}=await DeviceFileSystem.promisifyStatus(await this.device.readlink(e));return t}async writelink(e,t){return DeviceFileSystem.promisifyStatus(await this.device.writelink(e,t))}async write(e,t,n){return DeviceFileSystem.promisifyStatus(await this.device.write(e,t,!!n))}async exists(e){return this.device.exists(e)}async mkdirp(e){const{contents:t}=await DeviceFileSystem.promisifyStatus(await this.device.mkdirp(e));return t}async readdir(e,t,n){try{return DeviceFileSystem.promisifyStatus((this.legacy?await this.device.readdir(e):await this.device.readdir(e,t,n))||null)}catch(e){return null}}async readdirDeep(e,t,n){try{return DeviceFileSystem.promisifyStatus(await this.device.readdirDeep(e,t,n))}catch(e){return[]}}async lstat(e){try{return new Stats(DeviceFileSystem.normalizeStats(await DeviceFileSystem.promisifyStatus(await this.device.lstat(e))))}catch(e){return null}}async mv(e,t){const{contents:n}=await DeviceFileSystem.promisifyStatus(await this.device.mv(e,t));return n}async writeExternal(e,t,n){const i=this.device;if(i&&i.writeExternal)return DeviceFileSystem.promisifyStatus(await i.writeExternal(e,t,!!n))}static async promisifyStatus(e){switch(e){case"{}":return{};case"[]":return[];default:{const t=tryParseJSON(e);if(t&&t.status)throw new ExtError(t);return t}}}static normalizeStats(e){const t=e.st_mtime||e.mtimeMs,n=e.st_ctime||e.ctimeMs,i=e.st_atime||e.atimeMs;return Object.assign(e,{mtimeMs:1e3*t,ctimeMs:1e3*n,atimeMs:1e3*i}),e}}var DeviceFileSystemClass=DeviceFileSystem,DFS=new DeviceFileSystem(window.Android),PathUtils={isIDB:isIDB,ext:ext,hasExt:hasExt,dirname:dirname,basename:basename,join:join,relativeTo:relativeTo,childOf:childOf,normalizePath:normalizePath};const FileTypeModes={FILE:33188,DIRECTORY:16384,SYMLINK:40960};class GitFileSystem{constructor(e){this._store=IDB,this._inodes=new LFUCache(9e3,0),this._fs=e,this.observable=new ObservableClass}async writeExternal(e,t,n){const i=this._fs;return i.supported&&await i.writeExternal(e,t,n)}isBinaryContent(e){return Buffer.from(e.slice(0,8e3)).some(e=>0===e)}async inode(e,t){const n=this._inodes;return!t&&n.get(e)||n.set(e,GitFileSystem.uuid4())}async inodePath(e){const t=this._inodes.find(e);if(t)return t;throw new ExtError({src:`${this.constructor.name}:inodePath`,message:"Could not find inode.",inode:e,code:GlobalErrorCodes.INodeNotFound})}inodePathSync(e){return this._inodes.find(e)}async exists(e){e=normalizePath(e);const{_store:t,_fs:n}=this;return n.supported&&!isIDB(e)?await n.exists(e):!!await t.files.get({path:e})||!!await t.folders.get({path:e})}async lookupFolder(e){const{_store:t}=this,n=await t.folders.get({path:e});if(n)return n;{const t=await this.readlink(e);return t&&t!==e?await this.lookupFolder(t):null}}async lookupFile(e){const t=await this._store.files.get({path:e});return t?t.target&&t.target!==e?await this.lookupFile(t.target):t:null}async mv(e,t,n={updateStatus:!1,atomic:!1}){const{_store:i,_inodes:o,_fs:a}=this;if(e=normalizePath(e),t=normalizePath(t),e===t)return;if(await this.exists(t))throw new ExtError({name:"DestinationExists",src:`${this.constructor.name}:mv`,message:RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.TargetPath),path:t,code:GlobalErrorCodes.DestinationExists});let s;if(a.supported&&!isIDB(e))s=await a.mv(e,t);else{const n=await this.lookupFile(e);if(n)await this.mkdir(dirname(t)),await i.files.update(n.id,{path:t,mtimeMs:Date.now()}),s="file";else{const n=await this.lookupFolder(e);if(!n)throw new ExtError({name:"SourceNotFound",src:`${this.constructor.name}:mv`,message:RES_I18N.ErrorMessages.NotExistsFor(RES_I18N.Objects.SourcePath),oldpath:e,code:GlobalErrorCodes.SourceNotFound});{await this.mkdir(dirname(t));const o=Date.now();await i.files.where("path").startsWith(e+"/").modify(n=>{n.path=t+n.path.slice(e.length),n.mtimeMs=o}),await i.folders.where("path").startsWith(e+"/").modify(n=>{n.path=t+n.path.slice(e.length),n.mtimeMs=o}),await i.folders.update(n.id,{path:t,mtimeMs:o}),s="folder"}}}const{updateStatus:r,atomic:c}=n;return c||("file"===s?o.rename(e,t):"folder"===s&&o.keys.filter(t=>t.startsWith(e+"/")).forEach(n=>o.rename(n,n.replace(e,t))),await this.observable.run({action:"mv",updateStatus:r,oldpath:e,path:t,type:s})),{oldpath:e,path:t,type:s}}async read(e,t={}){return this.readFile(e,t).catch(()=>null)}async readFile(e,t={}){e=normalizePath(e);const{_fs:n,_store:i}=this,o=t.encoding;if(n.supported&&!isIDB(e))return n.readFile(e,o);{const t=await this.lookupFile(e);if(t){const e=await i.data.get(t.fid),n=e&&e.text||"",a=e&&e.encoding||"";return a?"utf8"===o&&"utf8"===a?n:o?Buffer.from(n,a).toString(o):Buffer.from(n,a):"utf8"===o?n:o?Buffer.from(n).toString(o):Buffer.from(n)}throw new ExtError({name:"FileNotFound",src:`${this.constructor.name}:read`,message:RES_I18N.ErrorMessages.NotExistsFor(RES_I18N.Objects.File),path:e,code:GlobalErrorCodes.FileNotFound})}}async mkdir(e,t={atomic:!1}){e=normalizePath(e);const{_fs:n,_store:i}=this,o=e.split("/").map((e,t,n)=>n.slice(0,t+1).join("/"));let a;a=n.supported&&!isIDB(e)?await n.mkdirp(e):await i.folders.where("path").anyOf(o).keys(e=>{const t=o.filter(t=>!e.includes(t));return t.length>0&&this._mkdirs(t)}),a&&!t.atomic&&await this.observable.run({action:"mkdir",path:e,type:"folder"})}async write(e,t,n){e=normalizePath(e),t=t||"";let{mode:i,target:o,updateStatus:a,atomic:s}=n||{};const{_fs:r,_store:c}=this;await this.mkdir(dirname(e),{atomic:s});const l=GitFileSystem.isArrayBuffer(t);let u,h;if(r.supported&&!isIDB(e))({mtimeMs:u,size:h,mode:i}=await r.write(e,l?Buffer.from(t).toString("base64"):t,l));else{const n=await this.lookupFile(e),a=l?castAsReadableArrayBuffer(t):t;h=a.byteLength||a.length,u=Date.now();const s=n?n.ctimeMs:u,r=n?n.id:GitFileSystem.uuid4();await c.files.put({id:r,fid:r,path:e,target:o,mode:i,size:h,ctimeMs:s,mtimeMs:u}),await c.data.put({fid:r,text:a,encoding:l?"binary":"utf8"})}return s||await this.observable.run({action:"write",path:e,type:"file",updateStatus:a}),{mode:i,mtimeMs:u,type:"file",ino:0,size:h}}async rm(e,t={}){const{tmpDir:n,updateStatus:i,atomic:o}=t;e=normalizePath(e);const{_fs:a,_store:s,_inodes:r}=this;let c=!1;if(n)return this.mv(e,`${n}${e}~${GitFileSystem.uuid4()}`,{updateStatus:i});{const t=await this.lstat(e);if(t){if(t.isDirectory())return this.rmdir(e,{updateStatus:i});if(a.supported&&!isIDB(e))c=await a.remove(e);else{const t=await s.files.get({path:e});t&&(await Promise.all([s.files.delete(t.id),s.data.delete(t.fid)]),c=!0)}}else c=!0}if(c){const t="file";if(o)return{oldpath:e,path:null,type:t};r.del(e);const n=dirname(e);return"."===n||""===n||await this.fileCount(n)>0?(await this.observable.run({action:"rm",updateStatus:i,oldpath:e,path:null,type:t}),{oldpath:e,path:null,type:t}):this.rmdir(n)}throw new ExtError({name:"RemoveFailed",src:`${this.constructor.name}:rm`,message:`Could not remove ${e}.`,path:e,code:GlobalErrorCodes.RemoveFailed})}async rmdir(e,t={}){const{tmpDir:n,updateStatus:i}=t;e=normalizePath(e);const{_inodes:o,_fs:a,_store:s}=this,r=e+"/";if(o.keys.filter(e=>e.startsWith(r)).forEach(e=>o.del(e)),n)return this.mv(e,n+e,{updateStatus:i});{const t=await this.lstat(e);let n=!1;if(t){if(!t.isDirectory())throw new ExtError({name:"NotADirectory",src:`${this.constructor.name}:rmdir`,message:`${e} is not a directory.`,path:e,stats:t,code:GlobalErrorCodes.NotADirectory});a.supported&&!isIDB(e)?n=await a.remove(e):(await Promise.all([s.folders.where("path").equals(e).delete(),s.files.where("path").startsWith(r).delete(),s.folders.where("path").startsWith(r).delete()]),n=!0)}else n=!0;if(n){const t="folder",n=dirname(e);return"."===n||""===n||await this.fileCount(n)>0?(await this.observable.run({action:"rmdir",updateStatus:i,oldpath:e,path:null,type:t}),{oldpath:e,path:null,type:t}):this.rmdir(n)}throw new ExtError({name:"RemoveFailed",src:`${this.constructor.name}:rmdir`,message:`Could not remove ${e}.`,path:e,code:GlobalErrorCodes.RemoveFailed})}}async fileCount(e){const t=await this.readdirDeep(e,{files:!0});return t?t.length:null}async readdir(e,t){const{skipFiles:n=!1,skipFolders:i=!1}=t||{};e=normalizePath(e);const{_fs:o,_store:a}=this;let s;if(o.supported&&!isIDB(e))return s=await o.readdir(e,n,i),s&&s.sort(GitFileSystemClass.compareStrings),s;const r=await this.lookupFolder(e);if(r){const e=r.path+"/",t=e.length;let o=i?[]:a.folders.where("path").startsWith(e).filter(e=>!e.path.slice(t).includes("/")).keys(),c=n?[]:a.files.where("path").startsWith(e).filter(e=>!e.path.slice(t).includes("/")).keys();return s=(await o).concat(await c).map(e=>e.slice(t)),s.sort(GitFileSystemClass.compareStrings),s}return null}async readdirDeep(e,t){const{files:n=!0,folders:i=!1,relative:o=!1}=t||{},{_store:a,_fs:s}=this,r=(e=normalizePath(e))+"/",c=r.length;let l;if(s.supported&&!isIDB(e))l=await s.readdirDeep(e,n,i);else{const[e,t]=await Promise.all([n?a.files.where("path").startsWith(r).keys():[],i?a.folders.where("path").startsWith(r).keys():[]]);l=t.concat(e)}return l.sort(GitFileSystemClass.compareStrings),o&&(l=l.map(e=>e.slice(c))),l}async lstat(e){e=normalizePath(e);const{_store:t,_fs:n}=this;if(n.supported&&!isIDB(e))return await n.lstat(e);{const n=await t.files.get({path:e});if(n)return n.target?new Stats({size:n.size||0,mode:FileTypeModes.SYMLINK,mtimeMs:n.mtimeMs,ctimeMs:n.ctimeMs}):new Stats({size:n.size||0,mode:FileTypeModes.FILE,mtimeMs:n.mtimeMs,ctimeMs:n.ctimeMs});{const n=await t.folders.get({path:e});return n?new Stats({size:0,mode:FileTypeModes.DIRECTORY,mtimeMs:n.mtimeMs,ctimeMs:n.ctimeMs}):null}}}async size(e){return(await this.lstat(e)||{size:0}).size}async readlink(e){e=normalizePath(e);const{_fs:t,_store:n}=this;if(t.supported&&!isIDB(e))return t.readlink(e);const i=await n.files.get({path:e});return i&&i.target||null}async writelink(e,t){e=normalizePath(e);const{_fs:n}=this,i=t.toString("utf8");return n.supported&&!isIDB(e)?(await this.mkdir(dirname(e)),n.writelink(e,i)):this.write(e,"",{target:i,mode:FileTypeModes.SYMLINK})}_mkdirs(e){const t=Date.now();return this._store.folders.bulkAdd(e.map(e=>({id:GitFileSystem.uuid4(),path:e,mtimeMs:t,ctimeMs:t})))}static uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}static compareStrings(e,t){return-(e<t)||+(e>t)}static isArrayBuffer(e){return e instanceof ArrayBuffer||e&&e.buffer instanceof ArrayBuffer&&void 0!==e.byteLength}}var GitFileSystemClass=GitFileSystem,GFS=new GitFileSystem(DFS);class Environ{constructor(e,t){this._fs=e,this._ds=t,this.locale="en"}resource(e){return e?isIDB(e)?join("/run",e):this._ds.resourceUrl(e)||join("/run",e):e}async projectConfigPathAsync(){return this.filesDirAsync(".projects")}async gitConfigPathAsync(){return this.filesDirAsync(".gitconfig")}async settingsConfigPathAsync(){return this.filesDirAsync(".settings")}async metadataDirAsync(e){const t=await this.filesDirAsync();return`${t}.metadata/${(e||"").replace(t,"")}`}async trashDirAsync(e){const t=await this.filesDirAsync();return`${t}.trash/${(e||"").replace(t,"")}`}async tmpDirAsync(e){const t=await this.filesDirAsync();return`${t}.tmp/${(e||"").replace(t,"")}`}async filesDirAsync(e){return`${await this.systemDirAsync()||"idb/"}${e||""}`}async systemDirAsync(){return this._fs.supported?await this.resolveDir():null}async sleep(e){return new Promise(t=>setTimeout(t,e))}async resolveDir(){for(let e=0;e<10;e++)try{return this._fs.getDirectoryAsync()}catch(t){$LOG.warn(`Attempting establishing JavaScript bridge (${e}/10)`),await this.sleep(150)}return null}}var ENV=new Environ(DFS,DS);function ObservableClass(){const e=[];Object.assign(this,{subscriptions:e,subscribe:function(t){return e.push(t),{unsubscribe:()=>{e.includes(t)&&e.splice(e.indexOf(t),1)}}},run:function(t){return Promise.all(e.map(e=>e(t)))}})}function tryParseJSON(e){try{return JSON.parse(e)||null}catch(e){return null}}function castAsReadableArrayBuffer(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(Buffer.isBuffer(e))return e.buffer;throw new Error("Argument type not recognized: "+typeof e)}function GA_SendEvent(e,t,n,i){try{window.gtag&&t&&e&&window.navigator&&navigator.onLine&&window.gtag("event",e,{event_category:t,event_label:n,value:i})}catch(e){}}function GA_SendException(e,t){try{window.gtag&&window.navigator&&navigator.onLine&&window.gtag("event","exception",{description:e,fatal:!!t})}catch(e){}}function GA_SendEvent_Success(e,t,n,i){return function(o){return GA_SendEvent(e+"_s",t,n,i),o}}function GA_SendEvent_Failure(e,t){return function(n){try{if(n){const i=`${window.$version}_${e}_${"string"==typeof n.message?n.message:n}`;GA_SendEvent(e+"_f",t+"_f",i),GA_SendException(n.message)}}catch(e){}return Promise.reject(n)}}window.GitStatusTypes={EMPTY:0,SAME:1,IGNORED:2,ADDED:4,CHANGED:8,CONFLICT:16,DELETED:32,STAGED:64},m.module("metadata").require("session","gitClient","path","set").__init__((e,{session:t,gitClient:n,path:i,set:o})=>{Object.assign(e,{gitClient:n,session:t,path:i,set:o,observable:new ObservableClass,_cache:{}}),t.observable.subscribe(e.me.bind(e)),GFS.observable.subscribe(e.fe.bind(e))}).def({me:async function({action:e,projectDir:t}){const n=this;switch(e){case"syncGit":n.ge(),await n.ve(t),await n.we(t)}},V:async function(e){const t=this;t.ge(),e&&e.git&&e.dir&&(await t.be()?await t.ye():(await t.ve(e.dir),await t.we(e.dir)))},fe:function({action:e,oldpath:t,path:n,type:i,updateStatus:o}){const a=this;if(o&&n){const o=a.session.Se();if(o&&o.dir&&o.git&&!a.path.xe(n)){const s=o.dir;return Promise.all([PathUtils.childOf(n,s)&&a._e(e,i,n,s),PathUtils.childOf(t,s)&&a._e(e,i,t,s)])}}},_e:function(e,t,n,i){const o=this;switch(e){case"write":return o.ke(n,i);case"mv":if(n===i)break;case"rm":case"rmdir":if("folder"===t)return o.ve(n);if("file"===t)return o.ke(n,i)}},ve:async function(e){const t=this;if(!e)return;const n=t.session.Ae(),[i,o,a]=await Promise.all([t.gitClient.Ie(n).then(e=>e.map(e=>`${n}/${e}`)),t.Ce().map(e=>e.path),GFS.readdirDeep(e)]),s=e+"/",r=t.set.Ee(e===n?i:i.filter(e=>e.startsWith(s)),e===n?o:o.filter(e=>e.startsWith(s)),a).filter(e=>!t.path.xe(e));return Promise.all(r.map(e=>t.ke(e,n)))},ke:async function(e,t){const n=this;let{mtimeMs:i,status:o}=n.$e(e);i=i||0;let a=0===i,s=i;if(!a){const t=await GFS.lstat(e);t?(s=t.mtimeMs,a=s>i):a=!0}if(a){const i=PathUtils.relativeTo(e,t),a=await n.gitClient.Re(t,i);$LOG.log(`[git:status] ${a}: ${i}`),o=n.Te(a),n.Fe(e,{status:o,mtimeMs:s})}await n.observable.run({action:"updateStatus",path:e,status:o})},ge:function(){this._cache={},$LOG.log("[metadata] clear cache")},$e:function(e){return this._cache[e]||{mtimeMs:0}},Fe:function(e,t){const n=this._cache[e]=this._cache[e]||{};return Object.assign(n,t),n},be:async function(){return GFS.exists(await ENV.metadataDirAsync(this.session.Ae()))},ye:async function(){const e=this.session.Ae(),t=await ENV.metadataDirAsync(e),n=await GFS.readFile(t,{encoding:"utf8"});return this._cache=tryParseJSON(n)||{},this.ve(e)},Ce:function(){const{SAME:e,IGNORED:t}=GitStatusTypes,n=e|t,i=this._cache;return Object.keys(i).map(e=>({path:e,status:i[e].status})).filter(e=>e.status&&!(e.status&n))},we:async function(){await GFS.write(await ENV.metadataDirAsync(this.session.Ae()),JSON.stringify(this._cache),{atomic:!0})},Te:function(e){const{EMPTY:t,CONFLICT:n,STAGED:i,SAME:o,DELETED:a,IGNORED:s,ADDED:r,CHANGED:c}=GitStatusTypes;let l=t;switch(e.includes("!")&&(l|=n),e.includes("*")||(l|=i),e=e.replace(/[*!]/g,"")){case"absent":case"unmodified":l|=o;break;case"deleted":l|=a;break;case"ignored":l|=s;break;case"added":l|=r;break;case"modified":l|=c}return l}}),m.module("model").__init__((function(e){Object.assign(e,{observable:new ObservableClass})})).def({W:function(e){return IDB.meta.where("key").equals(e).first().then(e=>e&&e.value)},ze:function(e,t){return IDB.meta.put({key:e,value:t})},je:async function(e){await GFS.write(await ENV.projectConfigPathAsync(),JSON.stringify(e),{atomic:!0})},Pe:async function(){try{return JSON.parse(await GFS.readFile(await ENV.projectConfigPathAsync(),{encoding:"utf8"}))}catch(e){return[]}},Ne:async function(e,t){t.modifiedAt=Date.now();const n=await this.Oe(),i=n.find(t=>t.dir===e)||(n[n.length]={dir:e});return Object.assign(i,t),await this.je(n),this.observable.run({action:"update",dir:e,changes:t,project:i,type:"project"})},Ue:async function(e){const t=(await this.Oe()).map(e=>e.dir);let n=1,i=e;for(;t.includes(i);)i=`${e} ${n}`,n++;return i},N:async function(e){const t=await this.Oe(),n=t.find(t=>t.dir===e);if(n)return n;throw new ExtError({name:"ProjectNotFound",src:"model:pvGetProjectAsync",message:"Project not found.",dir:e,projects:t,code:GlobalErrorCodes.ProjectNotFound})},P:async function(e){const{dir:t}=await this.N(e);await Promise.all([GFS.rm(t),ENV.trashDirAsync(t).then(e=>GFS.rmdir(e)),ENV.metadataDirAsync(t).then(e=>GFS.rm(e))]);try{await IDB.files.where("path").startsWith(`idb/${PathUtils.basename(t)}/`).delete(),await IDB.folders.where("path").startsWith(`idb/${PathUtils.basename(t)}/`).delete();const[e,n]=await Promise.all([IDB.data.toCollection().primaryKeys(),IDB.files.orderBy("fid").uniqueKeys()]),i=e.filter(e=>!n.includes(e));i.length&&await IDB.data.bulkDelete(i)}catch(e){console.error(e)}return this.observable.run({action:"delete",dir:t,type:"project"})},Oe:async function(){const e=async e=>{try{const t=await GFS.readdir(e,{skipFiles:!0});return t?t.map(t=>PathUtils.join(e,t)):[]}catch(e){return[]}},t=await ENV.systemDirAsync(),[n,i,o]=await Promise.all([t?e(t):[],e("idb"),this.Pe()]),a=o.reduce((e,t)=>(t.dir&&(e[t.dir]=t),e),{}),s=[".projects",".settings",".tmp",".metadata",".gitconfig",".trash"];return n.concat(i).filter(e=>!s.includes(PathUtils.basename(e))).map(e=>a[e]||{dir:e,modifiedAt:Date.now()})},j:async function(e){"RISKY_STUFF"===e&&(await Promise.all([IDB.files.clear(),IDB.folders.clear(),IDB.data.clear(),IDB.meta.clear()]),await Promise.all([ENV.projectConfigPathAsync().then(e=>GFS.rm(e)),ENV.settingsConfigPathAsync().then(e=>GFS.rm(e)),ENV.trashDirAsync().then(e=>GFS.rmdir(e)),ENV.metadataDirAsync().then(e=>GFS.rm(e))]),await this.observable.run({action:"delete",type:"projects"}))}}),m.module("remote").def({Be:function({url:e,responseType:t,noCache:n}){return new Promise((function(i,o){const a=new XMLHttpRequest;a.open("get",e+(n?`?_=${(new Date).getTime()}`:""),!0),a.responseType=t,a.onload=()=>{if(200===a.status)i(a.response);else if(0===a.status&&a.response)try{JSON.parse(a.response)?i(a.response):o({status:a.status,response:a.response})}catch(e){o({status:a.status,response:a.response})}else o({status:a.status,response:a.response})},a.onerror=e=>{o(e)},a.send()}))},F:function({url:e,responseType:t="text",noCache:n=!0,retryCount:i=0,tries:o=0}){const a=this;return a.Be({url:e,responseType:t}).then(null,(function(s){return o>=i?Promise.reject(s):a.F({url:e,noCache:n,responseType:t,retryCount:i,tries:o+1})}))}}),m.module("session").require("model","progress","prompt","gitClient","zipper").__init__((function(e,{model:t,gitClient:n,progress:i,prompt:o,zipper:a}){Object.assign(e,{model:t,gitClient:n,progress:i,prompt:o,zipper:a,observable:new ObservableClass,_project:null}),t.observable.subscribe(({type:t,project:n,action:i,dir:o})=>{switch(t){case"project":if(e.Le(o))switch(i){case"delete":return e.H();case"update":return e.Ge(n)}break;case"projects":if("delete"===i)return e.H()}})})).def({Le:function(e){return this.Ae()===e},De:function({phase:e,loaded:t,total:n}){const i=`${e} (${t}/${n})`,o=t/n*100;this.progress.Me(i,o),t===n&&this.progress.We()},Se:function(){return this._project},Ae:function(){const e=this._project;return e&&e.dir},H:async function(){return await this.Ge(null),await this.model.ze("currentProjectDir",null),this.observable.run({action:"close"})},Ge:async function(e){const t=e&&e.dir;return t&&Object.assign(e,{git:await GFS.exists(PathUtils.join(t,".git/config"))}),await this.model.ze("currentProjectDir",t),this._project=e,this.observable.run({action:"setProject",project:e})},Ve:function(e){return this.observable.run({action:"syncGit",projectDir:e})},V:async function(e){const t=this;let[n,i]=await Promise.all([t.model.N(e),ENV.filesDirAsync()]);const{olddir:o}=n,a=PathUtils.basename(e)||"Unknown",s=await t.model.Ue(`${i}${a}`);return PathUtils.isIDB(s)&&o&&(await GFS.mkdir(o),await GFS.mv(o,s),await t.model.Ne(e,{dir:s,olddir:null}),n=await t.model.N(s)),await t.Ge(n),this.observable.run({action:"open",project:n})}}),m.module("templates").__new__((function(e){e.frameworks={js:{angular:{name:"Angular",info:"Learn one way to build applications with Angular and reuse your code and abilities to build apps for any deployment target.",templates:[{path:"index.html",src:"index.html"},{path:"systemjs.config.js",src:"angular-systemjs.config.js",include:!0},{path:"app.ts",src:"angular-app.ts"},{path:"main.ts",src:"angular-main.ts"},{path:"app.html",src:"angular-app.html"}],scripts:["//unpkg.com/core-js@2.5.7/client/shim.min.js","//unpkg.com/zone.js@0.8.26?main=browser","//unpkg.com/zone.js@0.8.26/dist/long-stack-trace-zone.js","//unpkg.com/reflect-metadata@0.1.8","//unpkg.com/systemjs@0.19.47/dist/system.js"],body:"<my-app>Loading...</my-app>",defaultFile:"app.ts"},angularjs:{name:"AngularJS",info:"AngularJS is what HTML would have been, had it been designed for building web-apps.",templates:[{path:"index.html",src:"index.html"},{path:"index.js",src:"angularjs-index.js",include:!0}],bodyTemplate:"angularjs-body.html",scripts:["https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js","https://cdn.jsdelivr.net/npm/angular@1.7.3/angular.min.js"],defaultFile:"index.js"},d3:{name:"D3",info:"Library for visualizing data using web standards. D3 helps you bring data to life using SVG, Canvas and HTML.",templates:[{path:"index.html",src:"index.html"},{path:"index.js",src:"d3-index.js",include:!0},{path:"style.css",src:"d3-style.css",stylesheet:!0}],scripts:["https://cdn.jsdelivr.net/npm/d3@5.5.0/dist/d3.min.js"],defaultFile:"index.js"},html:{name:"HTML",info:"Just a simple plain HTML page.",templates:[{path:"index.html",src:"index.html"},{path:"main.js",src:"main.js",include:!0},{path:"style.css",src:"style.css",stylesheet:!0}],body:"<p>Nothing to see here...</p>",scripts:[],defaultFile:"main.js"},react:{name:"React",info:"React will efficiently update and render just the right components when your data changes.",scripts:["//unpkg.com/systemjs@0.19.47/dist/system.js"],templates:[{path:"index.html",src:"index.html"},{path:"config.js",src:"react-config.js",include:!0},{path:"app.jsx",src:"react-app.jsx"}],body:'<div id="react-app"></div>',defaultFile:"app.jsx"},vue:{name:"Vue.js",info:"A progressive framework for building user interfaces. (Vue files are not supported.)",templates:[{path:"index.html",src:"index.html"},{path:"app.js",src:"vue-app.js",include:!0}],scripts:["https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"],bodyTemplate:"vue-body.html",defaultFile:"app.js"}},css:{bootstrap:{name:"Bootstrap",info:"Bootstrap, a sleek, intuitive, and powerful mobile first front-end framework for faster and easier web development.",classes:{container:"container text-center",heading:"h2",text:"lead"},links:["https://cdn.jsdelivr.net/npm/bootstrap@4.1.2/dist/css/bootstrap.min.css"],scripts:["https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js","https://cdn.jsdelivr.net/npm/bootstrap@4.1.2/dist/js/bootstrap.min.js"]},mdl:{name:"Material Design Lite",info:"A front-end template that helps you build fast, modern mobile web apps.",classes:{container:"mdl-grid mdl-typography--text-center",heading:"mdl-layout-title mdl-cell--12-col",text:"mdl-cell--12-col"},links:["//fonts.googleapis.com/icon?family=Material+Icons","https://cdn.jsdelivr.net/npm/material-design-lite@1.3.0/dist/material.indigo-pink.min.css"],scripts:["https://cdn.jsdelivr.net/npm/material-design-lite@1.3.0/dist/material.min.js"]},semantic_ui:{name:"Semantic UI",info:"Semantic is a UI component framework based around useful principles from natural language.",classes:{container:"ui container",heading:"header",text:"text"},links:["https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css"],scripts:["https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js","https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.js"]},bulma:{name:"Bulma",info:"A lightweight and modular front-end framework for developing fast and powerful web interfaces.",classes:{container:"container",heading:"title",text:"subtitle"},links:["https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.min.css"],scripts:["https://use.fontawesome.com/releases/v5.3.1/js/all.js"]},uikit:{name:"UIkit",info:"A lightweight and modular front-end framework for developing fast and powerful web interfaces.",classes:{container:"uk-container uk-text-center",heading:"uk-text-lead",text:"uk-text-meta"},links:["https://cdn.jsdelivr.net/npm/uikit@3.0.0-rc.11/dist/css/uikit.min.css"],scripts:["https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js","https://cdn.jsdelivr.net/npm/uikit@3.0.0-rc.11/dist/js/uikit.min.js"]}}},e.quotes=["Hard work pays off in the future. Laziness pays off now.","A closed mouth gathers no foot.","A dog is a dog unless he is facing you. Then he is Mr. Dog.","A neat desk is a sign of a cluttered desk drawer.","A sine curve goes off to infinity, or at least to the end of the blackboard.","Artificial intelligence is no match for natural stupidity.","Caution: do not look into laser with remaining eye.","Change is inevitable, except from a vending machine.","Democracy is four wolves and a lamb voting on what to have for lunch.","Diplomacy is the art of saying 'good doggie' while looking for a bigger stick.","Don't personify computers - we don't like it.","Do not worry about the world ending today, it's already tomorrow in Australia","Experience is something you get just after you need it.","Give a man a fish and you feed him for a day. Teach a man to fish, and you can sell him some tackle.","Happiness makes up in height what it lacks in length.","As a computer, I find your faith in technology amusing.","If it weren't for the last minute, nothing would get done.","My favourite scientific theory is that the rings of Saturn are made of lost airline luggage.","Never attribute to malice what can be adequately explained by stupidity.","Never test the depth of the water with both feet.","No problem is so big that you can't run away from it.","On the other hand... I have some fingers.","Personifiers of the world! Unite! You have nothing to lose but Mr. Dignity!","Rome wasn't built in a day, it just looks like that.","Smash forehead on keyboard to continue.","The amount of sleep needed by the average person is ten minutes more.","The early bird gets the worm, but the early worm gets eaten.","Time flies like an arrow, fruit flies like a banana","To steal ideas from one person is plagiarism; to steal from many is research.","The person who knows how to laugh at himself will never cease to be amused","Where in the nursery rhyme does it say Humpty Dumpty is an egg?","The trouble with doing something right the first time, is nobody appreciates how difficult it was.","Be nice to other people; they outnumber you 5.5 billion to one. ","Talk is cheap because supply exceeds demand","There has been an alarming increase in the number of things you know absolutely nothing about.","For every problem there is a solution which is simple, neat and wrong. ","When you find yourself in a hole, the first thing to do is stop digging.","If it's stupid but works, it isn't stupid.","Anything free is worth the price.","Always listen to experts. They'll tell you what can't be done, and why. Then go and do it anyway.","Compromise is the art of dividing a cake so everyone believes he got the biggest piece. -Ludwig Erhard","It is better to have enough ideas for some of them to be wrong than to always be right by having no ideas at all. -Edward de Bono","Time is what keeps everything from happening all at once.","When all else fails, read the instructions.","There are 10 types of people in this world; those who understand the binary number system and those who do not"]})),m.module("templates").require("remote").__init__((function(e,{remote:t}){e.remote=t,e.templateLocation="assets/templates",e.template=doT.template,doT.templateSettings.varname="d",doT.templateSettings.strip=!1})).def({He:function(){return""},qe:function(e){return beautifier.html(["<!DOCTYPE html>","<html>","<head>",'<meta charset="UTF-8">','<meta name="viewport" content="width=device-width, initial-scale=1">',"<title></title>","</head>","<body>","","</body>","</html>"].join("\n"),{tabString:e})},Ke:function(){return""},Ze:async function(e){const t=this.templateLocation+"/"+e;return doT.template(await this.remote.F({url:t,retryCount:1,noCache:!1}))},Qe:function(){return this.quotes[Math.floor(Math.random()*this.quotes.length)]},Ye:function(e){const t=this,n={scripts:e.scripts||[],links:e.links||[],name:e.name,headTemplate:doT.template(e.head||""),bodyTemplate:doT.template(e.body||"")},i=[];return e.bodyTemplate&&i.push(t.Ze(e.bodyTemplate).then((function(e){n.bodyTemplate=e}))),e.headTemplate&&i.push(t.Ze(e.headTemplate).then((function(e){n.bodyTemplate=e}))),Promise.all(i).then((function(){return n}))}}),m.module("date").__new__((function(e){Object.assign(e,{pastTenses:{en:"ago",es:"atrás",ja:"前",pt:"atrás",ru:"назад",zh:"前",zhTW:"前"},shortTimes:{en:"moments ",es:"momentos ",ja:"一瞬",pt:"momentos ",ru:"минуту ",zh:"不久",zhTW:"不久"},minuteAgo:{en:"a minute ",es:"un minuto ",ja:"一分",pt:"um minuto ",ru:"минуту ",zh:"一分钟",zhTW:"一分鐘"},minutesAgo:{en:" minutes ",es:" minutos ",ja:"分",pt:" minutos ",ru:" минуты ",zh:"分钟",zhTW:"分鐘"},hourAgo:{en:"an hour ",es:"una hora ",ja:"一時間",pt:"uma hora ",ru:"час ",zh:"一个小时",zhTW:"一個小時"},hoursAgo:{en:" hours ",es:" horas ",ja:"時間",pt:" horas ",ru:" часа ",zh:"小时",zhTW:"小時"},dayAgo:{en:"a day ",es:"un día ",ja:"一日",pt:"um dia ",ru:"день ",zh:"一天",zhTW:"一天"},daysAgo:{en:" days ",es:" dias ",ja:"日",pt:" dias ",ru:" дня ",zh:"天",zhTW:"天"}})})).def({Je:function(e,t){const{pastTenses:n,shortTimes:i,minuteAgo:o,minutesAgo:a,hourAgo:s,hoursAgo:r,dayAgo:c,daysAgo:l}=this,u=this.Xe,h=(Date.now()-e)/1e3,d=n[n[t]?t:"en"];let p;return p=isNaN(h)?"? ":h<30?i[i[t]?t:"en"]:h<120?o[o[t]?t:"en"]:h<3600?u(h,60)+a[a[t]?t:"en"]:h<7200?s[s[t]?t:"en"]:h<86400?u(h,3600)+r[r[t]?t:"en"]:h<172800?c[c[t]?t:"en"]:u(h,86400)+l[l[t]?t:"en"],p+d},Xe:function(e,t){return Math.floor(e/t)}}),m.module("path").__new__((function(e){e.BinaryExtensions=[".avi",".ogv",".ogg",".mov",".webm",".m4p",".m4v",".mp4",".mkv",".mov",".h261",".h263",".h264",".mts",".m2ts",".vob",".wmv",".rmvb",".rm",".amv",".gifv",".flv",".f4v",".f4a",".psd",".swf",".ai",".asf",".abf",".afm","acfm",".zip",".tar",".gz",".rar",".ai",".7z",".bzip",".lzma",".iso",".jar",".zipx",".ipa",".dmg",".exe",".msi",".war",".apk",".mpg",".mpeg",".mpe",".mpv",".mp2",".3gp",".aa",".aac",".aax",".act",".aiff",".alac",".amr",".ape",".au",".awb",".dct",".dss",".dvf",".flac",".gsm",".ivs",".m4a",".m4b",".m4p",".mp3",".mpc",".msv",".nsf",".oga",".mogg",".opus",".ra",".tta",".wav",".wma",".wv",".8svx",".3ds",".3dm",".fbx",".dae",".stp",".igs",".stl",".wrl",".ply",".obj",".off",".prt",".blend",".ppt",".pptx",".doc",".docm",".docx",".xls",".xlsx",".DS_Store",".jpe",".jpg",".jpeg",".jif",".jfif",".jfi",".ttf",".otf",".woff",".eot",".woff",".woff2",".gif",".tiff",".bmp",".apng",".mng",".png",".webp",".ico",".pdf",".raw",".heif",".indd",".eps",".tga",".dds"].reduce((e,t)=>(e[t]=0,e),{})})).def({et:function(e){return e.includes("//")?"//":e.includes("\0")?"NUL":e.includes("\\")?"\\":void 0},tt:function(e){return PathUtils.ext(e)in this.BinaryExtensions},nt:function(e){let t;return t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0],t},it:function(e){let t=this.nt(e),n=t.split(/[@.]/),i=n.length;return i>2&&(t=n[i-2]+"."+n[i-1],2==n[i-2].length&&2==n[i-1].length&&(t=n[i-3]+"."+t)),t},xe:function(e){return/\/\.git\b/.test(e)}}),m.module("set").def({ot:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))},Ee:function(){const e=Array.prototype.slice.call(arguments),t=e.reduce((e,t)=>t.concat(e),[]);return t.filter((function(e,t,n){return n.indexOf(e)===t}))}}),m.module("string").def({at:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},st:function(e){return e.replace(/[.*+?^${}()|\\[\]]/g,"\\$&")},rt:function(e){return(e.match(/\n/g)||"").length+1}}),m.module("urlQuery").def({ct:function(){return window.location.search},o:function(e){const t=this.ct().substring(1).split("&");for(let n=0;n<t.length;n++){let i=t[n].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}}}),m.module("vibrate").__new__(e=>{e.enabled=!0}).def({lt:function(){"vibrate"in navigator&&this.enabled&&navigator.vibrate(30)}}),m.module("zipper").require("path","messages","prompt","progress").__init__((function(e,{path:t,messages:n,prompt:i,progress:o}){Object.assign(e,{path:t,messages:n,prompt:i,progress:o}),zip.workerScripts={deflater:["workers/worker_deflate.js"],inflater:["workers/worker_inflate.js"]},e.ZipErrorMessages={ERR_BAD_FORMAT:{en:"File format is not recognized.",es:"El formato del archivo no se reconoce.",ja:"ファイル形式が認識されません。",pt:"O formato do arquivo não é reconhecido.",ru:"Формат файла не распознан.",zh:"无法识别文件格式。",zhTW:"無法識別文件格式。"},ERR_BAD_ENCODING:{en:"File encoding is not recognized. Please recreate ZIP file with UTF-8 encoding.",es:"La codificación del archivo no se reconoce. Vuelva a crear el archivo ZIP con codificación UTF-8.",ja:"ファイルのエンコードは認識されません。 UTF-8エンコードでZIPファイルを再作成してください。",pt:"A codificação de arquivo não é reconhecida. Recrie o arquivo ZIP com a codificação UTF-8.",ru:"Кодировка файла не распознается. Пожалуйста, заново создайте ZIP-файл с кодировкой UTF-8.",zh:"无法识别文件编码。 请使用UTF-8编码重新创建ZIP文件。",zhTW:"無法識別文件編碼。 請使用UTF-8編碼重新創建ZIP文件。"},ERR_CRC:"CRC failed.",ERR_ENCRYPTED:{en:"File contains encrypted entry.",es:"El archivo contiene una entrada encriptada.",ja:"ファイルには暗号化されたエントリが含まれています。",pt:"O arquivo contém entrada criptografada.",ru:"Файл содержит зашифрованную запись.",zh:"文件包含加密的条目。",zhTW:"文件包含加密的條目。"},ERR_ZIP64:{en:"File is using Zip64 (4gb+ file size).",es:"El archivo está usando Zip64 (4 gb + tamaño de archivo).",pt:"O arquivo está usando o Zip64 (4 GB + tamanho do arquivo).",ru:"Файл использует Zip64 (4 ГБ + размер файла).",zh:"文件正在使用Zip64（4GB以上的文件大小）。"},ERR_READ:{en:"Error while reading zip file."},ERR_WRITE:{en:"Error while writing zip file."},ERR_WRITE_DATA:{en:"Error while writing file data."},ERR_READ_DATA:{en:"Error while reading file data."},ERR_DUPLICATED_NAME:RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.File)}})).def({ut:function(e){const t=this;e&&t.prompt.q(RES_I18N.Actions.Export(RES_I18N.Objects.Echo("ZIP")),PathUtils.basename(e),{message:RES_I18N.Actions.Enter(RES_I18N.Objects.NameFor(RES_I18N.Objects.Echo("ZIP"))),showInput:!0,onResult:function(n){return t.ht(e,n).then(GA_SendEvent_Success("export_zip","zip"),GA_SendEvent_Failure("export_zip","zip")).catch((function(e){throw t.messages.dt("exportZipError"),t.ZipErrorMessages[e]&&t.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Export(RES_I18N.Objects.Echo("ZIP"))),t.ZipErrorMessages[e]),e}))}})},ft:function(){return new Promise((function(e,t){zip.createWriter(new zip.ArrayBufferWriter,(function(t){e({exportFileAsync:function(e,n){return new Promise((function(i){t.add(e,new zip.ArrayBufferReader(castAsReadableArrayBuffer(n)),i)}))},exportFolderAsync:function(e){return new Promise((function(n){t.add(e,new zip.ArrayBufferReader(new ArrayBuffer),n,null,{directory:!0})}))},completeExportAsync:function(e){return new Promise((function(e){t.close(e)})).then(t=>(e=e||"Unknown",e=PathUtils.hasExt(e,".zip")?e:e+".zip",DS.saveBase64(e,t)))}})}),t,!0)}))},gt:async function(e){const t=await GFS.read(e);return DS.saveBase64(PathUtils.basename(e),t)},ht:function(e,t){const n=this;return n.ft().then(i=>Promise.all([GFS.readdirDeep(e,{files:!1,folders:!0,relative:!0}),GFS.readdirDeep(e)]).then(([t,o])=>{const a=t.filter(e=>!n.path.xe(e)),s=o.filter(e=>!n.path.xe(e)),r=a.length+s.length;let c=0;return PromisePool({data:a,promiseGenerator:function(e){return c++,n.progress.ProgressReporter.reportProgress({phase:`Zipping: ${PathUtils.basename(e)}`,lengthComputable:!0,loaded:c,total:r}),i.exportFolderAsync(e)},maxConcurrency:1,retryAttempts:0,useRaf:!0}).then(()=>PromisePool({data:s,promiseGenerator:function(t){return GFS.readFile(t).then(o=>(c++,n.progress.ProgressReporter.reportProgress({phase:`Zipping: ${PathUtils.basename(t)}`,lengthComputable:!0,loaded:c,total:r}),i.exportFileAsync(PathUtils.relativeTo(t,e),o)))},maxConcurrency:1,retryAttempts:0,useRaf:!0}))}).then((function(){return n.progress.ProgressReporter.close(!0),i.completeExportAsync(t)})))},vt:function(e,t){const n=this;return new Promise((function(i,o){zip.createReader(new zip.ArrayBufferReader(t),(function(t){t.getEntries((function(o){let a=0;const s=o.filter(e=>!e.directory&&!!e.filename),r=s.length;return PromisePool({data:s,promiseGenerator:function(t){return new Promise((function(i){t.getData(new zip.ArrayBufferWriter,o=>{i(GFS.write(PathUtils.join(e,t.filename),o)),a++,n.progress.ProgressReporter.reportProgress({phase:`Unzipping: ${PathUtils.basename(t.filename)}`,lengthComputable:!0,loaded:a,total:r})})}))},maxConcurrency:1,retryAttempts:0}).then(()=>{t.close(i),n.progress.ProgressReporter.close(!0)})}))}),e=>{n.ZipErrorMessages[e]&&n.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Export(RES_I18N.Objects.Echo("ZIP"))),n.ZipErrorMessages[e]),o(e)})}))}}),m.module("card").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{tagClass:"x-card",width:"40",label:"",accessoryIcon:'<i class="uk-icon-chevron-right uk-icon-large" style="margin-left:auto"></i>'},template:['<div class="uk-flex uk-flex-middle">','<div class="uk-margin-large-right">','<svg viewBox="{{viewBox}}" width="{{width}}">',"{{svg}}","</svg>","</div>",'<div class="uk-margin-top">',"<h5>{{title}}</h5>",'<p class="uk-margin-large-right">{{label}}</p>',"</div>","{{accessoryIcon}}","</div>"].join("")},UI.definitions.link)})),m.module("fileBreadcrumb").require("fileTree").__init__((function(e,{fileTree:t}){Object.assign(e,{fileTree:t})})).__init__((function(e){UI.def({__name__:e.__name__,$defaults:{listStyle:"breadcrumb",tagClass:"x-file-breadcrumb"},getFullPath:function(){return this._fullPath},setFullPath:function(t){this._fullPath=t=t||"",""===t?this.setData([]):this.setData(t.split("/").map((t,n,i)=>({view:"link",label:(n===i.length-1?e.fileTree.wt(t):e.fileTree.bt(e.fileTree.svg.openFolder,30,15))+"<span>"+t+"</span>",path:i.slice(0,n+1).join("/")})))}},UI.definitions.list)})),m.module("fileSelect").require("path","session").__init__((e,{path:t,session:n})=>{Object.assign(e,{path:t,session:n})}).__new__((function(e){UI.def({__name__:e.__name__,setFilesData:function(t){const n=this;if(0==t.length)n.setData([{value:"",label:"No file selected",selected:!0}]),n.disable(),n.paths=null;else{const i=e.session.Ae()||"";n.setData(function(e,t){return e.map((function(e){return{label:PathUtils.relativeTo(e,t),value:e}}))}(t,i)),n.setActive("label","index.html"),n.enable(),n.paths=t}return t},getFilePaths:function(){return this.paths||[]},getSelectedFile:function(){const e=this.getSelected()[0];return e&&e.value&&e.fid?e:null}},UI.definitions.select)})),m.module("fileTree").__new__((function(e){e.svg={assetFile:'<path fill="#51DB78" d="M 2,0 2,18 16,18 16,5.4 10.75,0 z m 7.875,6.3 0,-4.95 4.8125,4.95 z"></path>',styleFile:'<path fill="#9648EA" d="M 2,0 2,18 16,18 16,5.4 10.75,0 z m 7.875,6.3 0,-4.95 4.8125,4.95 z"></path>',scriptFile:'<path fill="#E2C100" d="M 2,0 2,18 16,18 16,5.4 10.75,0 z m 7.875,6.3 0,-4.95 4.8125,4.95 z"></path>',textFile:'<path fill="#7F7F7F" d="M 2,0 2,18 16,18 16,5.4 10.75,0 z m 7.875,6.3 0,-4.95 4.8125,4.95 z"></path>',defaultFile:'<path fill="#82B1FF" d="M 2,0 2,18 16,18 16,5.4 10.75,0 z m 7.875,6.3 0,-4.95 4.8125,4.95 z"></path>',folder:'<path fill="#90CAF9" d="M 8,2 1,2 1,16 17,16 17,4 8,4 z"></path>',openFolder:'<path fill="#FFA000" d="M 8,2 1,2 1,16 17,16 17,4 8,4 z"></path>'}})),m.module("fileTree").__init__(e=>{UI.def({__name__:e.__name__,$defaults:{indentWidth:12,tagClass:"x-file-tree"},template:function(t){const n=this.config.allowDrag;let i="";return i=t.search?"":'<span class="x-tree-icon" style="margin-left:{{margin}}px"><i class="uk-icon-{{chevron}}"></i></span><span class="uk-active-line"></span>{{svg}}',UI.interpolate('<a class="uk-flex-middle uk-flex {{itemClass}} {{statusClass}}">'+i+'<span class="x-text-overflow-ellipsis uk-flex-item-1">{{label}}</span>'+(n?'<i class="uk-hidden-notouch uk-icon-more-vertical menu"></i>':"")+"</a>",{itemClass:t.cls||"x-tree-item",statusClass:e.yt(t.status),chevron:e.St(t),svg:e.xt(t),margin:t.$depth*this.indentWidth,label:t.label,message:t.message})},updateItemStatus:function(t,n){const i=this.getItemNode(t.id);i&&i.firstChild&&(UI.removeClass(i.firstChild,e.yt(t.status)),UI.addClass(i.firstChild,e.yt(n))),t.status=n}},UI.definitions.tree)}).def({St:function(e){return e.$children&&e.$children.length>0?e.$closed?"chevron-right":"chevron-down":""},xt:function(e){const t=this;let n;return n=e.search?"":e.file?e.isDefaultLaunchFile?t.svg.defaultFile:t._t(e.path):e.$children&&0!==e.$children.length?e.$closed?t.svg.folder:t.svg.openFolder:t.svg.folder,t.bt(n,30,15)},bt:function(e,t,n){return UI.interpolate('<svg class="svg-icon file-svg-icon" width="{{w}}" height="{{h}}" viewBox="5 0 18 18">{{path}}</svg>',{path:e,w:t,h:n})},wt:function(e){return this.bt(this._t(e),30,15)},yt:function(e){const{CONFLICT:t,CHANGED:n,ADDED:i,DELETED:o,IGNORED:a}=GitStatusTypes;return e&t?"x-git-conflict":e&n?"x-git-changed":e&i?"x-git-new":e&o?"x-git-deleted":e&a?"x-git-ignored":""},_t:function(e){const t=this;switch(PathUtils.ext(e)){case".png":case".gif":case".svg":case".jpg":case".jpeg":case".bmp":case".woff":case".woff2":case".eot":case".ttf":case".otf":case".mp3":case".acc":case".flac":case".ogg":case".wav":return t.svg.assetFile;case".css":case".scss":case".sass":case".less":return t.svg.styleFile;case".js":case".jsx":case".ts":case".coffee":return t.svg.scriptFile;case".html":case".htm":case".xhtml":case".xml":case".csv":default:return t.svg.textFile}}}),m.module("keyButton").require("keyOption","vibrate").__init__((function(e,t){UI.def({__name__:e.__name__,$events:{touchstart:{lazy:!1,dispatch:"onTouchStart",passive:!0},mousedown:{lazy:!1,defaultEvent:!1,callback:function(){return!1}}},$defaults:{tagClass:"x-key-button",dropdownEvent:"onOpenDropdown",dropdownOptions:{dropdownClass:"x-key-popup",blank:!0}},__init__:function(n){n.dropdownOptions=UI.defaults({marginX:n.offset||0,pos:n.pos||"top-center"},n.dropdownOptions),this.addListener("onTouchStart",(function(n,i,o){if(!e.activeKey){const n=this;t.vibrate.lt(),n.selectOption(n.defaultIndex||0,0),e.activeKey=n,e.initialPos={x:o.touches[0].clientX,y:o.touches[0].clientY},e.touchReleased=!1,e.deltaX=0,e.deltaY=0,setTimeout((function(){!e.touchReleased&&Math.abs(e.deltaX)<50&&Math.abs(e.deltaY<50)&&n.dispatch("onOpenDropdown",[n.config,n.element])}),750)}}))},selectOption:function(t,n){const i=this.dropdownPopup.$components[0].$components;if(e.selectedOption&&(e.selectedOption.deselect(),e.selectedOption=null),t=t<0?0:t,!(n<=-3)){if(this.multirow){const o=i[0].$components.length-1,a=i.length-1;if(n>=a+2)return;n=(n=n<0?0:n)>a?a:n,t=t>o?o:t,e.selectedOption=i[i.length-1-n].$components[t]}else{if(n>=2)return;t=t>=i.length?i.length-1:t,e.selectedOption=i[t]}e.selectedOption.select()}}},UI.definitions.link)})).__init__((function(e){UI.support.touch&&(UI.$windowListeners.touchend.push((function(){if(e.touchReleased=!0,e.activeKey){if(e.selectedOption){const t=e.activeKey.config.editorOptions,n=t.editor,i=e.selectedOption.config,o=i.value||i.label,a=i.offset||t.offset||0;n.focus(!0),n.insertTextAtCursor(o,{chars:a,rows:0})}e.activeKey.dropdownPopup.close(),e.activeKey=null}})),UI.$windowListeners.touchmove.push((function(t){if(e.activeKey){const n=t.touches[0],i=n.clientX-e.initialPos.x,o=-(n.clientY-e.initialPos.y),a=e.activeKey.defaultIndex+Math.floor(i/42+.5),s=Math.floor(o/47-.5);e.activeKey.selectOption(a,s),e.deltaX=i,e.deltaY=o}})))})),m.module("keyOption").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{tagClass:"x-key-option"},select:function(){UI.addClass(this.element,"uk-active")},deselect:function(){UI.removeClass(this.element,"uk-active")}},UI.definitions.link)})),m.module("keybindingLink").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{tagClass:"x-keybinding-link",editorId:"mainEditor",command:""},template:function(e){const t=$$(this.editorId);let n="<span>{{label}}</span>";if(t&&e.command){const i=t.$editor.$ace.commands,o=i.byName[e.command];if(o){let e=o.bindKey[i.platform];e&&(e=e.split("|")[0],n+=UI.interpolate('<span="uk-notouch">{{key}}</span>',{key:e}))}}return n}},UI.definitions.link)})),m.module("menuIcon").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{tagClass:"x-menu-icon"},$events:{touchstart:{lazy:!0,dispatch:"onMouseDown",passive:!0},mousedown:{lazy:!0,dispatch:"onMouseDown",defaultEvent:!1,callback:function(){return!1}}}},UI.definitions.icon)})),m.module("touchIcon").__new__((function(e){UI.def({__name__:e.__name__,$events:{touchstart:{lazy:!1,dispatch:"onTouchStart",passive:!0},touchend:{lazy:!0,dispatch:"onTouchEnd"}}},UI.definitions.menuIcon)})),m.module("menuTitle").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{visible:!0,collapsable:!0,tagClass:"x-menu-title"},$events:{click:{dispatch:"onClick",defaultEvent:!0}},__after__:function(){this.$onClickListenerId=this.addListener("onClick",this._onToggle),this.updateLabel()},_onToggle:function(e,t,n){e.collapsable&&(this.dispatch("onToggle",[e,t,n]),this.config.visible=!e.visible,this.updateLabel(),this.dispatch("onToggled",[e,t,n]))},updateLabel:function(){const{visible:e,label:t,collapsable:n}=this.config,i=function(e,t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}(this.el,".x-menu-title-bar");e?UI.removeClass(i,"collapsed"):UI.addClass(i,"collapsed"),this.el.innerHTML=n?`<i class='uk-icon-${e?"triangle-down":"triangle-right"}'></i> ${t}`:t}},UI.definitions.link)})),m.module("menuToggle").__new__((function(e){UI.def({__name__:e.__name__,$defaults:{tagClass:"x-menu-toggle"},$setters:{outline:function(e){e?UI.addClass(this.el,"x-outline"):UI.removeClass(this.el,"x-outline")},selected:function(e){e?this.select():this.deselect()}},$events:{click:{dispatch:"onClick",defaultEvent:!0}},__after__:function(){this.$onClickListenerId=this.addListener("onClick",this._onToggle)},select:function(){this.config.$selected=!0,UI.addClass(this.el,"uk-active")},isSelected:function(){return!!this.config.$selected},deselect:function(){this.config.$selected=!1,UI.removeClass(this.el,"uk-active")},_onToggle:function(e,t,n){this.dispatch("onToggle",[e,t,n]),this.isSelected()?this.deselect():this.select(),this.dispatch("onToggled",[e,t,n])}},UI.definitions.icon)})),m.module("messages").__new__((function(e){e.messages={fileEncodeError:{en:"Error encoding file.",es:"Error al codificar el archivo.",ja:"ファイルのエンコードエラー",pt:"Erro ao codificar o arquivo.",zh:"编码文件错误",zhTW:"編碼錯誤"},fileNotFoundError:{en:"Missing file: {{name}}",es:"Archivo faltante: {{name}}",ja:"ファイルがありません: {{name}}",pt:"Arquivo ausente: {{name}}",zh:"缺少文件: {{name}}",zhTW:"缺少文件: {{name}}"},mainSaveFileError:{en:"Error saving file.",es:"Error al guardar el archivo.",ja:"ファイルの保存エラー",pt:"Erro ao salvar o arquivo.",zh:"保存文件时出错",zhTW:"保存檔案時出錯"},deleteProjectMessage:{en:"Deleted project: {{name}}",es:"Proyecto eliminado: {{name}}",ja:"削除: {{name}}",pt:"Excluir projeto: {{name}}",zh:"删除: {{name}}",zhTW:"删除: {{name}}"},loadTemplateError:{en:"No internet connection.",es:"Sin conexión a Internet.",ja:"インターネット接続なし",pt:"Sem conexão à Internet.",zh:"没有网络连接",zhTW:"沒有網絡連接"},searchBusyError:{en:"Busy with another search."},openFileError:{en:"Error opening file.",es:"Error al abrir el archivo.",ja:"ファイルを開く際のエラー",pt:"Erro ao abrir o arquivo.",zh:"打开文件时出错",zhTW:"打開檔案時出錯"},databaseError:{en:"Error accessing local database."},exportZipError:{en:"Error exporting ZIP.",es:"Error al exportar ZIP.",ja:"ZIPのエクスポートエラー",pt:"Erro ao exportar ZIP.",zh:"导出ZIP时出错",zhTW:"導出ZIP時出錯"},backupError:{en:"File backup failed.",es:"Copia de seguridad fallida.",ja:"バックアップが失敗する",pt:"Falha no backup do arquivo.",zh:"文件备份失效",zhTW:"文件備份失效"},unknownError:{en:"Unknown error has occurred.",es:"Se ha producido un error desconocido.",ja:"不明なエラーが発生しました",pt:"Ocorreu um erro desconhecido.",zh:"发生未知错误",zhTW:"發生未知錯誤"}}})).def({dt:function(e,t,n){const i=this.messages,o=i[e]||i.unknownError,a=o[n&&n.locale]||o.en,s=UI.interpolate(a,t||{});this.kt(s,n),GA_SendEvent("message_"+e,"n/a")},kt:function(e,t){DS.showToast(e,t)}}),m.module("searchField").__new__((function(e){UI.def({__name__:e.__name__,template:function(e){const t=this;t.$input=UI.createElement("INPUT",e.inputAttributes),UI.addClass(t.$input,e.inputClass);const n=[t.$input];if(e.clearSearch){(e.searchOptions=e.searchOptions||[]).unshift({view:"menuIcon",icon:"close",title:"Clear",on:{onClick:function(){t.setValue(""),t.dispatch("onInput"),t.focus()}}})}return e.searchOptions&&n.push({cls:"uk-flex uk-flex-middle",cells:e.searchOptions}),n},$defaults:{htmlTag:"DIV",placeholder:"",tagClass:"",cls:"x-menu-search",inputClass:"uk-search-field x-text-indent-remove",inputAttributes:{autocapitalize:"off",autocorrect:"off",spellcheck:"false"},flex:!0,type:"search"},__after__:function(){const e=this.getFormControl(),t=this.el;e.addEventListener("focus",(function(){UI.addClass(t,"uk-focus")})),e.addEventListener("blur",(function(){UI.removeClass(t,"uk-focus")}))},getFormControl:function(){return this.$input}},UI.definitions.input)})),m.module("copyToProject").require("model","project").__init__((function(e,{model:t,project:n}){Object.assign(e,{model:t,project:n})})).def({At:function(){return $$("copyToProjectLabel")},It:function(){return $$("copyToProjectSelect")},Ct:function(){return $$("copyToProjectInput")},Et:function(){return $$("copyToProjectInputContainer")},$t:function(){return $$("copyToProjectAddToggleIcon")},Rt:function(e){const t=this.$t().isSelected(),n=PathUtils.basename(e);this.Et().showBatch([t?"input":"select","toggle"]),this.At().setValue(t?`Create a new project for "${n}":`:`Select a project to copy "${n}" to.`),t&&this.Ct().focus()},Tt:async function(e){const t=this,n=t.model.Oe(),i=t.$t();0===n.length&&!i.isSelected()||n.length>0&&i.isSelected()?i.dispatch("onToggled"):t.Rt(e),t.It().setData(n.map(({dir:e})=>({label:PathUtils.basename(e),value:e}))),t.modal.open(e)},Ft:async function(e,t,n){const i=await ENV.tmpDirAsync(),o=PathUtils.relativeTo(e,n||i);return this.project.T({name:PathUtils.basename(t),uniqueName:!1,currentFilePath:o,buildCallbackAsync:({dir:t})=>GFS.mv(e,PathUtils.join(t,o))})}}),m.module("copyToProject").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:"COPY TO PROJECT",collapsable:!1}]},body:{flexLayout:"column",cells:[{id:"copyToProjectLabel",view:"label",margin:"top"},{id:"copyToProjectInputContainer",cls:"uk-form",margin:"top-sm",flexAlign:"middle",cells:[{id:"copyToProjectSelect",batch:"select",view:"select",flexSize:"flex",data:[],style:{maxWidth:"calc(100% - 56px)"}},{id:"copyToProjectInput",batch:"input",view:"input",flexSize:"flex",style:{maxWidth:"calc(100% - 56px)"},validate:function(e){const t=this,n=t.getValue();n?e&&e(n):t.raiseConcern(RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Project)))}},{id:"copyToProjectAddToggleIcon",batch:"toggle",view:"menuToggle",cls:"x-menu-icon",margin:"left",icon:"plus",title:"Create Project",on:{onToggled:function(){e.Rt(e.modal.filepath)}}}]}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"copyToProjectCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"copyToProjectOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){e.$t().isSelected()?e.Ct().validate((function(t){e.Ft(e.modal.filepath,t),e.modal.close()})):(e.Ft(e.modal.filepath,e.It().getValue()),e.modal.close())}}}]},on:{onOpened:function(e,t,n){this.filepath=n}}},document.getElementById("appContainer"))})),m.module("progress").__init__((function(e){e.ProgressReporter={reportProgress:function({phase:t,loaded:n,total:i,lengthComputable:o}){let a=t,s=-1;o?(a=`(${n}/${i}) `+a,s=n/i*100):a=`(${n}) `+a,e.Me(a,s)},throttledReportProgress:deferLatestToNextAnimationFrame(t=>{e.ProgressReporter.reportProgress(t)},30),close:function(t){t?e.zt():e.We()}}})).def({zt:function(){this.modal.close(),$$("progressBar").setValue(0)},We:function(){setTimeout((function(){$$("progress").close(),$$("progressBar").setValue(0)}),1500)},Me:function(e,t,n){const i=this,o=$$("animatedProgressBar"),a=$$("progressBar"),s=$$("progressCloseButton");$$("progressLabel").setValue(e),t<0?(o.show(),a.hide()):(o.hide(),a.show(),a.setValue(t)),n?s.show():s.hide(),UI.hasClass(i.modal.el,"uk-open")||i.modal.open(),i.cancelCallback=n,n?s.show():s.hide()}}),m.module("progress").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",closeButton:!1,bgClose:!1,center:!1,body:{flexLayout:"column",cells:[{id:"progressLabel",cls:"x-text-overflow-ellipsis",view:"label",template:"{{label}}"},{id:"progressBar",view:"progress",size:"small",color:"primary",margin:"top"},{id:"animatedProgressBar",view:"progress",size:"small",value:100,color:"primary striped",margin:"top"}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"progressCloseButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.cancelCallback&&e.cancelCallback(),e.modal.close()}}}]}},document.getElementById("appContainer"))})),m.module("prompt").__new__((function(e){window.prompt=function(t,n){e.q(t,n,{showInput:!0})},e.activeModal=null})).def({ue:function(e,t,n){this.q(e,"",{message:t,hideCancel:!0,onResult:function(){if(n)return n()}})},jt:function(){return this.activeModal==this.modalGreen?this.modalBlue:this.modalGreen},q:function(e,t,n){t=t||"",n=n||{};const i=this.jt();if(this.activeModal=i,i.label().config.label="string"==typeof e?e:i18nTag(e),i.label().render(),null!=t){const e=i.valueInput();e.setValue(t),e.set("help",""),e.setFormClass("")}i.onResult=n.onResult,i.onDismiss=n.onDismiss,i.onClosed=n.onClosed,i.onValidate=n.onValidate,this.Pt(i,n),i.open()},Pt:function(e,{hideCancel:t,showInput:n,placeholders:i,okLabel:o,okColor:a,message:s,cancelLabel:r,cancelColor:c}){const l=e.okButton();l.config.label=o?"string"==typeof o?o:i18nTag(o):RES_I18N.Elements.Ok,a&&l.set("color",a),l.render();const u=e.cancelButton();t?u.hide():u.show(),u.config.label=r?"string"==typeof r?r:i18nTag(r):RES_I18N.Elements.Cancel,c&&u.set("color",c),u.render();const h=e.textLabel();s?(h.element.innerHTML="string"==typeof s?s:i18nTag(s),h.show()):h.hide();const d=e.valueInput();n?(i&&d.set("placeholder",i[ENV.locale]||i.en||""),d.show()):d.hide()},Nt:function(e){return Promise.resolve(this.activeModal?this.activeModal.result(e):null)},Ot:async function(){this.activeModal&&await this.activeModal.cancel()},Ut:async function(){this.activeModal&&await this.activeModal.ok()},Bt:function(e){this.activeModal&&this.activeModal.valueInput().setValue(e)},Lt:function(e){this.activeModal&&this.activeModal.valueInput().raiseConcern(e)}}),m.module("prompt").__init__((function(e){function t(e){return{id:"promptModal"+e,cls:"x-prompt",view:"modal",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",id:"promptLabel"+e,label:"",collapsable:!1}]},body:{flexLayout:"column",cells:[{id:"promptTextLabel"+e,view:"label",margin:"top",hidden:!0},{id:"promptValueInput"+e,view:"input",width:"full",margin:"top",on:{onKeyUp:function(t,n,i){const o=$$("promptModal"+e);"Enter"==i.key?o.ok():o.onValidate&&o.onValidate(this.getValue()).then(()=>this.raiseConcern(null),this.raiseConcern.bind(this))}}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"promptCancelButton"+e,view:"button",on:{onClick:function(){const t=$$("promptModal"+e);!!t.onDismiss&&t.onDismiss(t.valueInput().getValue())||(t.close(),t.onClosed&&t.onClosed(!1))}}},{id:"promptOkButton"+e,view:"button",style:{minWidth:"64px"},on:{onClick:async function(){const t=$$("promptModal"+e),n=t.valueInput(),i=n.getValue();if(t.onValidate)try{const e=await t.onValidate(i);n.raiseConcern(null),t.result(e)}catch(e){n.raiseConcern(e)}else t.result(i)}}}]},label:function(){return $$("promptLabel"+e)},textLabel:function(){return $$("promptTextLabel"+e)},valueInput:function(){return $$("promptValueInput"+e)},cancelButton:function(){return $$("promptCancelButton"+e)},okButton:function(){return $$("promptOkButton"+e)},result:function(e){const t=this;let n;return t.onResult&&(n=t.onResult(e)),Promise.resolve(n).then((function(e){return t.close(),t.onClosed&&t.onClosed(!0),e}))},ok:function(){return this.okButton().dispatch("onClick")},cancel:function(){return this.cancelButton().dispatch("onClick")}}}e.modalGreen=UI.new(t("Green"),document.getElementById("appContainer")),e.modalBlue=UI.new(t("Blue"),document.getElementById("appContainer"))})),m.module("searchSettings").require("fileTree","fileTreeController","session").__init__((function(e,{session:t,fileTreeController:n}){e.minimatch=window.minimatch,Object.assign(e,{session:t,filteredFileList:[],treeController:new n.FileTreeController(e.Gt),observable:new ObservableClass})})).__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["scroll","blank"],header:{flexSize:"none",cls:"x-menu-title-bar shadow",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",attributes:i18nAttributes({en:"FILTER SEARCH FILES",es:"FILTRAR ARCHIVOS DE BÚSQUEDA",ja:"フィルター検索ファイル",pt:"FILTRE ARQUIVOS DE PESQUISA",ru:"ФИЛЬТР ПОИСК ФАЙЛОВ",zh:"筛选器搜索文件",zhTW:"篩選器搜索檔案"}),collapsable:!1},{cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{id:"searchSettingsBackButton",view:"menuIcon",icon:"close",title:"Close",on:{onClick:function(){e.modal.close()}}}]}]},{id:"searchSettingsInput",cls:"x-menu-search",view:"searchField",i18nPlaceholders:{en:"File Glob Pattern",es:"Patrones de archivos, p.ej: *.js",ja:"ファイルパターン 例 *.js",pt:"Glob Padrões de Arquivo",ru:"Шаблоны файлов (например, *.js)",zh:"文件通配符，比如 *.js",zhTW:"檔案式樣，例如：*.js"},clearSearch:!0,on:{onInput:function(){e.Gt().refresh()},onKeyUp:function(t,n,i){"Enter"===i.key&&(e.modal.close(),e.observable.run({action:"updateSettings"}))}}}]},body:{view:"scroller",cells:[{id:"searchSettingsFileTree",view:"fileTree",flexSize:"none",data:[],filter:function(t){const n=e.input().getValue();let i=!0;return n&&(i=t.$branch?t.$children.some((function(t){return e.minimatch(t.path,n,{matchBase:!0})})):e.minimatch(t.path,n,{matchBase:!0})),i&&t.file&&e.filteredFileList.push(t.path),i&&!t.$parentClosed},on:{onRefresh:function(){e.filteredFileList.length=0}}}]},on:{onOpened:function(){const t=e.session.Se(),n=e.session.Ae(),i=e.Dt();i.clearAll(),t&&n&&(i.addRoot(n),i.sync(n).then((function(){e.Gt().refresh()})))}}},document.getElementById("appContainer"))})).def({Dt:function(){return this.treeController},Gt:function(){return $$("searchSettingsFileTree")},input:function(){return $$("searchSettingsInput")},Mt:function(){return this.input().getValue()?this.filteredFileList:null}}),m.module("cookieBanner").require("model","prompt").__init__((function(e,t){e.banner=UI.new({id:e.__name__,flexAlign:"middle",position:"absolute",padding:"small",hidden:UI.support.touch||window.$embedMode||localStorage.$termsAgreed===window.$termsVersion&&localStorage.$privacyAgreed===window.$privacyVersion,cells:[{view:"label",label:(localStorage.$termsAgreed?"This site uses cookies and similar web technologies. By using Spck Editor, you agree to our new updated ":"This site uses cookies and similar web technologies. By using Spck Editor, you agree to our ")+'<a href="/terms.html" target="_blank">legal terms</a> and <a href="/privacy.html" target="_blank">privacy policy</a>.',flexSize:"flex"},{id:"cookieBannerActions",flexSize:"none",flexAlign:"middle",margin:"left-sm",cells:[{id:"cookieBannerDeclineButton",view:"button",color:"muted",label:"DECLINE",on:{onClick:function(){const n=GitFileSystemClass.uuid4().toUpperCase();t.prompt.q({en:"DANGER: Irreversible Data Loss!"},"Are you sure?",{message:{en:`Type '${n}' to confirm. This will PERMANENTLY delete all data this site stores for you including all projects, files, and settings!`},okLabel:{en:"DELETE EVERYTHING!",es:"¡ELIMINA TODO!",ja:"すべてを削除",pt:"EXCLUIR TUDO!",zh:"删除所有内容",zhTW:"刪除所有內容"},okColor:"danger",showInput:!0,onValidate:async function(e){return e},onResult:function(i){if(i!==n){const e=UI.interpolate('What you typed did not match "{{phrase}}".',{phrase:n});return t.prompt.Lt(e),GA_SendEvent("banner_clear_all_reject","banner"),Promise.reject(e)}$$(e.__name__).hide(),t.model.j("RISKY_STUFF").then(()=>{t.files.Dt().clearAll(),sessionStorage.clear(),localStorage.clear(),GA_SendEvent("banner_clear_all","banner")})}})}}},{id:"cookieBannerAgreeButton",view:"button",color:"primary",label:"AGREE",margin:"y-sm",on:{onClick:function(){$$(e.__name__).hide(),localStorage.$termsAgreed=window.$termsVersion,localStorage.$privacyAgreed=window.$privacyVersion,GA_SendEvent("banner_accept_terms","banner")}}}]}]},document.body)})),m.module("gitClient").require("addGitAuth","prompt","progress","path").__init__((e,{addGitAuth:t,prompt:n,progress:i,path:o})=>{Object.assign(e,{addGitAuth:t,prompt:n,progress:i,path:o}),e.Emitter={emit:function(e,t){if(e.includes("::progress"))return i.ProgressReporter.throttledReportProgress(t)}},git.plugins.set("emitter",e.Emitter)}).def({Wt:function({method:e,params:t,closeProgress:n=!1,immediate:i=!1}){const o=this;return t.emitterPrefix="::",git[e].call(git,t).then(e=>(n&&o.progress.ProgressReporter.close(i),e)).catch(t=>{n&&o.progress.ProgressReporter.close(i);const a="string"==typeof t?t:t&&t.message;return $LOG.warn(`[git:${e}] ${a}`),Promise.reject(t)})},Vt:function(e,t){return this.Wt({method:"getOidAtPath",params:{dir:e,path:t}}).then(t=>t?this.Wt({method:"readObject",params:{dir:e,oid:t,encoding:"utf8"}}).then(e=>e.object):null)},Ht:function(e,t){return this.Wt({method:"currentBranch",params:{dir:e,fullname:t}})},qt:function(e){const{dir:t,prop:n,value:i}=e;return this.Ht(t).then(o=>this.Kt(void 0!==i||Object.prototype.hasOwnProperty.call(e,"value")?{dir:t,path:`branch.${o}.${n}`,value:i}:{dir:t,path:`branch.${o}.${n}`}))},Zt:function(e){return this.qt({dir:e,prop:"remote"})},Qt:function(e){return this.qt({dir:e,prop:"merge"})},Yt:function(e,t){return this.qt({dir:e,prop:"remote",value:t})},Jt:function(e,t){return this.qt({dir:e,prop:"merge",value:t})},Xt:function(e){return this.Wt({method:"log",params:{dir:e}}).then(GA_SendEvent_Success("git_log","git_core"),GA_SendEvent_Failure("git_log","git_core"))},tn:function(e,t,n,i){const o=Object.assign({dir:e,remote:n,ref:i,noGitSuffix:!0},t||{});return $LOG.log(`[git:pull] ${t?t.username:"?"}@${n}/${i}`),this.Wt({method:"pull",params:o,closeProgress:!0})},nn:function(e,t,n){return Promise.all([this.in(e,t).catch((function(){return null})),this.in(e,`remotes/${n}/${t}`).catch((function(){return null}))]).then(([e,t])=>({localRef:e,remoteRef:t,isAhead:e!==t}))},an:async function(e,t){const n=await this.sn(e);let i;if(t&&(i=n.find(e=>e.remote===t)),i)return i;throw new ExtError({code:GlobalErrorCodes.RemoteNotFound,noUpstream:!t,noRemote:0===n.length})},rn:async function(e){const t=await this.Zt(e);return this.an(e,t)},cn:async function(e,t,n){const i=this;try{const o=await i.ln(e);if(o&&o.matrix&&0===o.matrix.length)await i.un(e,t.url,n);else{const o=await i.hn(e,t,n);if(o){const e=RES_I18N.Objects.SuccessfulFor(RES_I18N.Objects.Pull);o.alreadyMerged?(i.prompt.ue(e,"Your branch is already up-to-date with the remote."),GA_SendEvent("pull_up_to_date","git_core")):o.fastForward?(i.prompt.ue(e,"Fast-forwarded local branch to the remote."),GA_SendEvent("pull_fast_forward","git_core")):o.recursiveMerge&&(i.prompt.ue(e,"Merged the remote with the local branch. Commit to save the merged files."),GA_SendEvent("pull_merged","git_core"))}}}catch(e){throw e.message&&e.name&&i.prompt.ue(e.name,e.message),e}},ln:function(e){const t=this;return t.dn(e).then((function(e){const n=e.changes;return n?t.pn({resolveTo:e,error:{name:"Checkout Error: Uncommitted changes",message:i18nTag({en:`The current working tree is not clean with ${n} change(s). Checkout will lose your current changes.`,es:`El árbol de trabajo actual no está limpio con ${n} cambios. ¿Descartar todos los cambios?`,ja:`作業ツリーにコミットしていない${n}変更があります。変更を破棄しますか？`,pt:`A cópia de trabalho atual não está limpa com ${n} alterações. Você quer descartar as mudanças?`,zh:`该工作树并不干净，并且含有${n}未暂存的变更。您想放弃更改？`,zhTW:`目前工作目錄有${n}改動。要放棄變更？`})},ignoreLabel:RES_I18N.Elements.RevertAndCheckout,obeyLabel:RES_I18N.Elements.Cancel}):e})).then(GA_SendEvent_Success("git_core_checkout","git_core"),GA_SendEvent_Failure("git_core_checkout","git_core"))},pn:function({resolveTo:e,error:t,ignoreLabel:n,obeyLabel:i}){const o=this;return new Promise((function(a,s){o.prompt.q(t.name,null,{message:t.message,okLabel:i,cancelLabel:n,cancelColor:"danger",onResult:function(){s(t)},onDismiss:function(){a(e)}})}))},dn:function(e){const t=this;return t.mn(e).then((function(e){const n=t.gn(e);return n.matrix=e,n}))},gn:function(e){let t=0,n=0;for(let i,o=0;o<e.length;o++)i=e[o],i[4]&&t++,i[1]!==i[2]&&n++;return{conflicts:t,changes:n}},hn:async function(e,t,n){const i=this,o=i.path.it(t.url),a=await i.addGitAuth.CredentialManager.getItemAsyncWithoutPrompt(o);try{return await i.tn(e,a,t.remote,n)}catch(e){"string"==typeof e&&e.includes("MergeNoCommonAncestryError")?(i.prompt.ue("Remote Diverged","Pull failed because no common ancestor was found between the remote and local branch."),GA_SendEvent("pull_diverged","git_core_f")):await i.vn(e,"pull")}},vn:async function(e,t){const n=this;if(e&&"string"==typeof e.message){let i=e.message,o=e.name||"HTTP Error";throw i.includes("401")?(i=`Credentials provided failed for ${t}.`,o="Authentication Error!"):i.includes("404")&&(i=`Operation ${t} failed because HTTP URL could not be found.`,o="Remote URL Not Found!"),n.prompt.ue(o,i),new Error(i)}throw e},sn:function(e){return this.Wt({method:"listRemotes",params:{dir:e}})},wn:function(e,t){return $LOG.log(`[git:add] ${t}`),this.Wt({method:"add",params:{dir:e,filepath:t}})},Ie:function(e,t){return this.Wt({method:"listFiles",params:{dir:e,ref:t}})},bn:function(e,t){return $LOG.log(`[git:rm] ${t}`),this.Wt({method:"remove",params:{dir:e,filepath:t}})},in:function(e,t){return this.Wt({method:"resolveRef",params:{dir:e,ref:t}})},yn:function(e){return Promise.all([this.Sn(e).then(e=>e.map(e=>({name:e,ref:`refs/heads/${e}`}))),this.xn(e).then(e=>e.reduce((e,t)=>e.concat(t.branches.map(e=>({name:e,remote:t.remote,ref:`refs/remotes/${t.remote}/${e}`}))),[]))]).then(([e,t])=>e.concat(t))},xn:function(e){const t=this;return t.sn(e).then(n=>Promise.all(n.map(({remote:n})=>t.Sn(e,n).then(e=>({remote:n,branches:e})))))},mn:function(e){return this.Wt({method:"statusMatrix",params:{dir:e},closeProgress:!0,immediate:!0})},Re:function(e,t){return this.Wt({method:"status",params:{dir:e,filepath:t},closeProgress:!0,immediate:!0})},_n:function(e,t){return this.Wt({method:"fetch",params:{dir:e,remote:t},closeProgress:!0,immediate:!0})},kn:async function(e){const t=this.path.it(e),n=await this.addGitAuth.CredentialManager.getItemAsyncWithoutPrompt(t),i=await this.An(e,n);if(i)return{remoteInfo:i,auth:n};throw new ExtError({name:"Connection Error: Repo url not found",message:"Cannot connect to remote repository. Please check your Git credentials or repo url."})},In:function(e,{remote:t,url:n},i){const o=this;return o.Ht(e).then(a=>a?o.nn(e,a,t).then((function({isAhead:s,remoteRef:r}){if(s){if(null===r){const a=o.path.it(n);return o.addGitAuth.CredentialManager.getItemAsyncWithoutPrompt(a).then(n=>o.Cn(e,n,i,t))}return o.kn(n).then(({remoteInfo:n,auth:s})=>n.refs&&n.refs.heads&&n.refs.heads[a]!==r?Promise.reject({name:"Push Error: Requires Update",message:"Your branch is behind the remote. Please pull in changes before push."}):o.Cn(e,s,i,t))}return Promise.reject({name:"Push Error: No Commits",message:"Your repo does not have any commits to push."})})):Promise.reject({name:"Push Error: Detached HEAD",message:"Your repo is in a detached HEAD state. Please re-checkout a branch to fix this."})).catch((function(e){if("string"!=typeof e)return o.vn(e,"push");-1!==e.indexOf("PushRejectedNoCommonAncestry")?o.prompt.ue("Remote Diverged","Push rejected because no common ancestor was found with the remote branch."):-1!==e.indexOf("PushRejectedNonFastForward")?o.prompt.ue("Requires Update","Your branch is behind the remote. Please pull in changes before push."):-1!==e.indexOf("PushRejectedTagExists")?o.prompt.ue("Requires Update","Push rejected because a tag already exists."):-1!==e.indexOf("ReadObjectFail")&&o.prompt.ue("Missing Git Object","Push rejected because of a missing git commit object.")}))},Cn:function(e,t,n,i){const{username:o,token:a}=t||{};return this.Wt({method:"push",params:{dir:e,ref:n,remote:i,noGitSuffix:!0,username:o,token:a},closeProgress:!0,immediate:!0})},An:function(e,t){return t=t||{},this.Wt({method:"getRemoteInfo",params:{url:e,username:t.username,token:t.token}})},En:function(e,t){const n=this,{CONFLICT:i,STAGED:o,DELETED:a}=GitStatusTypes,s=t.reduce((t,{path:s,status:r})=>{if(!(r&i||r&o)){const i=PathUtils.relativeTo(s,e);t.push(r&a?n.bn(e,i):n.wn(e,i))}return t},[]);return Promise.all(s)},$n:async function(e,t){const n=this,i=await n.Ht(e),{isAhead:o}=await n.nn(e,i,t);if(o)try{return(await n.Wt({method:"listCommitsAndTags",params:{dir:e,start:["HEAD"],finish:[`${t}/HEAD`]}})).size}catch(t){return(await n.Wt({method:"log",params:{dir:e}})).size}return 0},Rn:async function(e,t,n){const i=await this.Ht(e,!0),o=await this.Wt({method:"commit",params:{dir:e,message:t,author:n},ref:i,closeProgress:!0});return $LOG.log(`[git:commit] ${o}`),o},Tn:function(e,t){const n=this;return n.ln(e).then(()=>n.Fn(e,t))},zn:function(e,t,n){return this.Wt({method:"checkout",params:{dir:e,ref:t,filepaths:n},closeProgress:!0})},Fn:function(e,t){return this.Wt({method:"checkout",params:{dir:e,ref:t},closeProgress:!0})},jn:function(e,t,n){return this.Wt({method:"branch",params:{dir:e,ref:t,checkout:n},closeProgress:!0})},Pn:function(e,t,n){const i=this;return i.in(e,"HEAD").then(()=>i.jn(e,t,n),e=>(i.prompt.ue("No Commit","Cannot create a dangling branch with no commit."),Promise.reject(e)))},Nn:function(e,t){return this.Wt({method:"deleteBranch",params:{dir:e,ref:t},closeProgress:!0})},On:function(e,t){return this.Nn(e,t).then(GA_SendEvent_Success("git_delete_branch","git_core"),e=>(this.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Delete(RES_I18N.Objects.Branch)),e.message),Promise.reject(e)))},Un:function(e,t,n){return this.Wt({method:"addRemote",params:{dir:e,remote:t,url:n},closeProgress:!0})},Bn:function(e,t){return this.Wt({method:"deleteRemote",params:{dir:e,remote:t},closeProgress:!0})},Sn:function(e,t){return this.Wt({method:"listBranches",params:{dir:e,remote:t}}).then(e=>{const n=e.filter(e=>"HEAD"!==e);return $LOG.log(`[git:listBranches:${t||"local"}] (${n.join(", ")})`),n})},Kt:function(e){return this.Wt({method:"config",params:e})},Ln:function(e,t,n){const i={url:t,dir:e,noGitSuffix:!0,depth:1};return n&&(i.username=n.username,i.token=n.token),this.Wt({method:"clone",params:i,closeProgress:!0})},un:async function(e,t){const n=this,i=n.path.it(t),o=await n.addGitAuth.CredentialManager.getItemAsyncWithoutPrompt(i);try{await n.Ln(e,t,o)}catch(e){await n.vn(e,"clone")}},Gn:function(e){return this.Wt({method:"init",params:{dir:e,noOverwrite:!0},closeProgress:!0})}});Buffer=buffer.Buffer;const collectBody=e=>Promise.all(e).then(e=>Buffer.concat(e.map(e=>Buffer.from(e)))),proxySupported=async()=>await DS.appVersion()>=12,httpFetch=async(e,t)=>{if(t.headers=t.headers||{},await proxySupported())return t.body&&t.body.byteLength&&(t.headers["X-Request-Body"]=Buffer.from(t.body).toString("base64")),t.headers["X-Proxy-To"]=e,fetch("/proxy",t);{const n=e.slice(e.indexOf("://")+3);return fetch(`https://cors.isomorphic-git.org/${n}`,t)}};async function GHTTP({url:e,method:t="GET",headers:n={},body:i}){const o=i?await(a=i,Promise.all(a).then(e=>Buffer.concat(e.map(e=>Buffer.from(e))))):void 0;var a;const s=await httpFetch(e,{method:t,headers:n,body:o}),r={},c=s.headers.entries();for(let[e,t]of c)r[e]=t;const l=await s.arrayBuffer();return{url:s.url,method:t,statusCode:s.status,statusMessage:s.statusText,body:[new Uint8Array(l)],headers:r}}git.plugins.set("fs",GFS),git.plugins.set("http",GHTTP),git.plugins.set("iterate",(function(e,t){return PromisePool({data:Array.from(t),promiseGenerator:t=>e(t),maxConcurrency:10})}));const DiagnosticCategory={0:"warning",1:"error",2:"info",3:"info"};class LanguageServerDelegate{constructor(e,t){this.sender=e,this.session=t,this._bindEvents(),this._validateCallback=this.validate.bind(this)}get sessionPath(){const e=this.session.inode;if(e){const t=GFS.inodePathSync(e);if(t)return t.startsWith("ext://")?t.slice(t.lastIndexOf("?")+1):t}return null}_bindEvents(){this.sender.on("change",({data:e})=>this._onUpdate(e))}_onUpdate(e){const t=this.sessionPath;if(t){e.length%2>0&&$LOG.warn(`Corrupt document state: ${t}`);const n=[];let i,o,a=0;for(;a<e.length;)i=e[a],o=e[a+1],a+=2,Array.isArray(o)?n.push({text:o.join("\n"),start:i,end:i}):n.push({text:"",start:i,end:o});LSC.editFile(t,n,this._validateCallback)}}validate(){const e=this.session.getValue(),t=this.sessionPath;t&&!/^\s*$/.test(e)?LSC.doValidate(t,e=>{e&&e.validate?this.sender.emit("annotate",e.validate.map(({start:e,text:t,rule:n,severity:i})=>({row:e.line,column:e.character,text:t,type:DiagnosticCategory[i]||"info",rule:n}))):this.sender.emit("annotate",[])}):this.sender.emit("annotate",[])}setValue(e){const t=this.sessionPath;t&&LSC.updateFile(t,e,this._validateCallback)}getCompletions(e,t,n,i,o){const a=this.sessionPath;a&&LSC.getCompletions(a,n,e.autoCompleteTriggerCharacter,e=>{e&&e.completions&&(e.completions.forEach(e=>{e.score=jaroWinkler.distance(i,e.label)+1}),o(null,e.completions))})}}ace.config.set("LanguageServerDelegate",LanguageServerDelegate),m.module("editor").__init__((function(e){e.HintManager=function(e){const t=this,n=e.$ace;n.on("blur",(function(){e.observable.run({action:"blur"})})),n.on("focus",(function(){e.observable.run({action:"focus"})})),n.on("click",(function(){t.close()})),this.editor=e,this.hintPopup=UI.new({view:"hintPopup"},e.element)},e.HintManager.prototype={open:function(e,t){this.hintPopup.open(this.editor,e,t)},close:function(){this.hintPopup.close()},isOpened:function(){return this.hintPopup.isOpened()}}})).__init__((function(){UI.def({__name__:"hintPopup",__after__:function(){this.element.style.margin=0,this.element.style.pointerEvents="auto",this.element.tabIndex=-1},displayPartToHTML:function(e){let t="";switch(e.kind){case"functionName":t="ace_entity ace_name ace_function";break;case"parameterName":t="ace_variable ace_parameter";break;case"keyword":t="ace_storage ace_type";break;case"punctuation":case"space":case"text":default:return e.text}return UI.interpolate('<span class="{{class}}">{{text}}</span>',{class:t,text:e.text})},buildInfoHTML:function(e){let t=e.displayParts.map(this.displayPartToHTML);return e.documentation&&(t.push('<div class="ace_hint_documentation">'),t=t.concat(e.documentation.map(this.displayPartToHTML)),t.push("</div>")),t.join("")},buildSignatureHTML:function(e){const t=this,n=e.items[e.selectedItemIndex],i=n.separatorDisplayParts.map(t.displayPartToHTML);let o=n.prefixDisplayParts.map(t.displayPartToHTML);return n.parameters.forEach((function(n,a,s){a===e.argumentIndex&&o.push('<span class="selected-param">'),o=o.concat(n.displayParts.map(t.displayPartToHTML)),a===e.argumentIndex&&o.push("</span>"),s.length>a+1&&(o=o.concat(i))})),o=o.concat(n.suffixDisplayParts.map(t.displayPartToHTML)),n.documentation&&(o.push('<div class="ace_hint_documentation">'),o=o.concat(n.documentation.map(t.displayPartToHTML)),o.push("</div>")),o.join("")},open:function(e,t,n){const i=this.element;if(t)if(t.info)i.innerHTML=this.buildInfoHTML(t.info);else{if(!t.signature)return this.close();i.innerHTML=this.buildSignatureHTML(t.signature)}else n&&(i.textContent=n);i.parentNode||e.element.appendChild(i),i.className="ace-lang-hint "+e.getTheme().cssClass;const o=e.getCursorElement();if(o){const t=o.getBoundingClientRect(),n=e.element.getBoundingClientRect();this.positionNextTo(o,"bottom-center",0,2),this.moveWithinBoundary(n,{bottom:t.top},{left:e.$ace.renderer.gutterWidth+5})}},close:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},isOpened:function(){return!!this.element.parentNode}},UI.definitions.element,UI.AbsolutePositionMethods)})),m.module("editor").__init__((function(e){e.IndentManager=function(t){this.editor=t,t.$ace.on("paste",(function(n){if(t.focus(),1==t.getAllSelectionRanges().length&&e.Dn(n.text.split("\n"))&&!t.isCurrentSessionBlank()){const i=t.getCursorPosition(),o=t.getSession(),a=o.getState(i.row),s=o.getLine(i.row),r=t.getTabString(),c=o.getMode().getNextLineIndent(a,s.slice(0,i.column),r),l=t.getTabSize();n.text=e.Mn(n.text,t.getMode(),c,l)}}))},e.IndentManager.prototype={indent:function(t){const n=this.editor,i=n.getValue(),o=e.Mn(i,n.getMode(),"",n.getTabSize()),a=n.getCursorPosition();(t||e.Wn(i,o))&&(n.setValue(o),n.navigateTo(a.row,a.column))}}})).def({Vn:function(e,t,n){const i={indent_size:n,indent_char:" ",max_preserve_newlines:"0",preserve_newlines:!0,keep_array_indentation:!0,break_chained_methods:!1,indent_scripts:"normal",brace_style:"none,preserve-inline",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"0",indent_inner_html:!1,comma_first:!1,e4x:!0,indent_empty_lines:!1};switch(t){case".less":case".scss":case".css":return beautifier.css(e,i);case".json":case".js":case".jsx":case".ts":return beautifier.js(e,i);case".html":case".htm":case".xhtml":case".xml":case".svg":return beautifier.html(e,i);default:return e}},Mn:function(e,t,n,i){n=n||"";const o=(e=this.Vn(e,this.Hn(t),i)).split(/[\r]?\n/gi);for(let e=1;e<o.length;e++)o[e]=n+o[e];return o.join("\n")},Dn:function(e){return(e=e.filter((function(e){return!/^\s*$/.test(e)}))).length>1},Wn:function(e,t){if(e!=t){const n=t.split(/\r?\n/gi);if(n.length<2e4){const t=e.split(/\r?\n/gi),i=Math.ceil(.05*Math.min(n.length,t.length));let o=0;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&(o++,o>=i))return!0}}return!1}}),m.module("editor").def({qn:function(e){const t=this.Kn,n=e.$ace.commands,i=n.bindKey.bind(n);i(t("Ctrl-Shift-D|Ctrl-Y","Command-Shift-D|Command-Y"),"removeline"),i(t("Ctrl-D","Command-D"),"copylinesdown"),i(t("Ctrl-R","Command-Option-F"),"replace"),i(t("Ctrl-Shift-Up","Command-Shift-Up"),"movelinesup"),i(t("Ctrl-Shift-Down","Command-Shift-Down"),"movelinesdown"),n.removeCommand("showSettingsMenu"),n.removeCommand("jumptomatching"),n.removeCommand("modifyNumberUp"),n.removeCommand("modifyNumberDown"),n.removeCommand("toggleFoldWidget"),n.removeCommand("gotoline")},Kn:function(e,t){return{win:e,mac:t}}}),m.module("editor").require("model","prompt","session","path","set","vibrate","memory").__init__((function(e,{completion:t,model:n,lang:i,prompt:o,session:a,path:s,set:r,vibrate:c,memory:l}){Object.assign(e,{completion:t,model:n,lang:i,prompt:o,session:a,path:s,set:r,vibrate:c,memory:l}),e.Range=ace.require("ace/range").Range})).__init__((function(e,{memory:t}){class n{static getSessionPath(e){const t=e.inode;if(t){const e=GFS.inodePathSync(t);if(e)return e.startsWith("ext://")?e.slice(e.lastIndexOf("?")+1):e}return null}constructor(e){this._editor=e,this._bindCommands(),this._bindSubscribers()}_bindCommands(){const e=this._editor,t=this.getSignature.bind(this),n=this.getInfo.bind(this),i=this.renameSymbol.bind(this),o=this.goToDefinition.bind(this);e.getSignature=t,e.getInfo=n,e.renameSymbol=i,e.goToDefinition=o,e.addCommands([{name:"goToDefinition",exec:o,bindKey:{win:"Ctrl-B",mac:"Command-B"}},{name:"getInfo",exec:n,bindKey:{win:"Ctrl-I",mac:"Command-I"}},{name:"getSignature",exec:t,bindKey:{win:"Ctrl-P",mac:"Command-P"}},{name:"renameSymbol",exec:i,bindKey:{win:"Alt-R|F2",mac:"Option-R|F2"}}])}_bindSubscribers(){const e=t.ce.bind(t);this._editor.observable.subscribe(({action:n,path:i,text:o})=>{"sessionChange"===n&&(LSC.setCurrentDirectory(PathUtils.dirname(i)),t.de(o)&&!GFS.isBinaryContent(o)&&LSC.addFile(i,o,e))})}goToDefinition(){const t=this._editor,i=t.getCursorPosition();LSC.goToDefinition(n.getSessionPath(t.getSession()),i,e.goToFile.bind(e))}renameSymbol(){const t=this._editor,i=t.getSession();LSC.getRenameLocations(n.getSessionPath(i),t.getCursorPosition(),i.getDocument(),e.renameSymbol.bind(e))}getSignature(e){const t=this._editor,i=t.getCursorPosition();LSC.getSignature(n.getSessionPath(t.getSession()),i,e,e=>t.hintManager.open(e))}getInfo(){const e=this._editor;LSC.getInfo(n.getSessionPath(e.getSession()),e.getCursorPosition(),t=>e.hintManager.open(t))}}e.LanguageServerDecorator=n})).def({goToFile:function(e){if(e&&e.def&&1==e.def.length){const t=e.def[0];this.Zn(t.fileName,t.textSpan.start)}},renameSymbol:function(e){const t=this;if(e&&e.renameInfo&&e.renameInfo.canRename){const n=e.renameInfo.kind.toUpperCase();t.prompt.q(RES_I18N.Actions.Rename(RES_I18N.Objects.Echo(n)),e.renameInfo.fullDisplayName,{showInput:!0,onResult:function(n){t.applyChanges(n,e.rename)}})}},applyChanges:function(e,t){const n=Object.create(null),i=this;let o,a;for(o=0;o<t.length;++o)a=t[o],n[a.fileName]=n[a.fileName]||[],n[a.fileName].push(a);const s=[];for(let c in n){let l=[];for((t=n[c]).sort(r),o=0;o<t.length;++o)a=t[o],l.push({text:e,range:new i.Range(a.textSpan.startPosition.row,a.textSpan.startPosition.column,a.textSpan.endPosition.row,a.textSpan.endPosition.column)});s.push(i.Qn({path:c,changes:l}))}return Promise.all(s);function r(e,t){return e.textSpan.start-t.textSpan.start}}}),m.module("editor").__init__((function(e){e.ContextMenuManager=function(t){this.editor=t,window.$embedMode||(t.$ace.renderer.$gutter.addEventListener("contextmenu",(function(n){UI.preventEvent(n),e.gutterContextMenu.open(t),e.gutterContextMenu.position(n.clientY,n.clientX),e.gutterContextMenu.moveWithinBoundary()})),t.$ace.renderer.container.addEventListener("contextmenu",(function(n){UI.preventEvent(n),setTimeout(()=>{e.editorContextMenu.open(t),e.editorContextMenu.position(n.clientY,n.clientX),e.editorContextMenu.moveWithinBoundary()},25)})))}})).__init__((function(e){const t=["typescript","tsx","javascript","jsx"];e.editorContextMenu=UI.new({view:"dropdown",dropdownClass:"uk-dropdown-close x-editor-context-menu",dropdownAnimation:"",dropdown:{view:"list",listStyle:"dropdown",filter:function(e){return!(e.mode&&this.mode&&-1===e.mode.indexOf(this.mode)||e.tokenTypes&&-1===e.tokenTypes.indexOf(this.leftTokenType)&&-1===e.tokenTypes.indexOf(this.rightTokenType)||e.excludeTokenTypes&&-1!==e.excludeTokenTypes.indexOf(this.tokenType))},data:[{view:"keybindingLink",label:i18nTag(RES_I18N.Actions.GoTo(RES_I18N.Objects.Definition)),mode:t,tokenTypes:"identifier",value:"jump"},{view:"keybindingLink",label:RES_I18N.Elements.ShowInfo,mode:t,tokenTypes:["entity.name.function","identifier"],value:"info"},{view:"keybindingLink",label:i18nTag(RES_I18N.Actions.Rename(RES_I18N.Objects.Echo("Symbol"))),mode:t,tokenTypes:["entity.name.function","identifier"],value:"rename"},{$divider:!0,mode:t,tokenTypes:["entity.name.function","identifier"]},{view:"keybindingLink",command:"find_in_file",label:RES_I18N.Elements.FindAll,value:"find",excludeTokenTypes:["",null]},{view:"keybindingLink",command:"format",label:RES_I18N.Elements.Format,value:"format"},{$divider:!0},{view:"keybindingLink",command:"undo",label:RES_I18N.Elements.Undo,value:"undo"},{view:"keybindingLink",command:"redo",label:RES_I18N.Elements.Redo,value:"redo"}],on:{onItemClick:function(t){const n=this.editor;if(n)switch(t.value){case"find":e.Yn(n.getSelectedTextOrWordAtCursor()),GA_SendEvent("editor_menu_find","editor_menu");break;case"format":n.indentManager.indent(!0),GA_SendEvent("editor_menu_format","editor_menu");break;case"jump":n.goToDefinition(),GA_SendEvent("editor_menu_goto","editor_menu");break;case"info":n.getInfo(),GA_SendEvent("editor_menu_info","editor_menu");break;case"rename":n.renameSymbol(),GA_SendEvent("editor_menu_rename","editor_menu");break;case"undo":n.undo(),GA_SendEvent("editor_menu_undo","editor_menu");break;case"redo":n.redo(),GA_SendEvent("editor_menu_redo","editor_menu")}},onOpened:function(e,t,n){n&&n.execCommand&&(this.editor=n,this.mode=this.editor.getMode(),this.leftTokenType=this.editor.getTokenType(),this.rightTokenType=this.editor.getTokenType(1),this.refresh())}}},listComponent:function(){return this.$components[0]}},document.body),e.gutterContextMenu=UI.new({view:"dropdown",dropdown:{view:"list",listStyle:"dropdown",data:[{view:"keybindingLink",command:"goToLine",label:i18nTag(RES_I18N.Actions.GoTo(RES_I18N.Objects.Line)),value:"gotoline"}],on:{onItemClick:function(e){const t=this.editor;if(t)switch(e.value){case"gotoline":t.execCommand(e.command)}},onOpened:function(e,t,n){n&&n.execCommand&&(this.editor=n,this.refresh())}}},listComponent:function(){return this.$components[0]}},document.body)})),m.module("editor").require("model","session","messages","memory").__new__((function(e){e.editorComponents=[],e.touchEditors=[],e.defaultTabSize=2,e.defaultWordWrap=!0,e.defaultUseAceWorkers=!1,e.SupportedExtensions={".js":"javascript_ls",".jsx":"jsx_ls",".ts":"typescript_ls",".tsx":"tsx_ls",".coffee":"coffee",".json":"json",".yaml":"yaml",".yml":"yaml",".md":"markdown",".txt":"text",".as":"actionscript",".bat":"batchfile",".c":"c_cpp",".cfm":"coldfusion",".clj":"clojure",".cpp":"c_cpp",".cs":"csharp",".dart":"dart",".ejs":"ejs",".ex":"elixir",".exs":"elixir",".fs":"fsharp",".fsx":"fsharp",".gitignore":"gitignore",".go":"golang",".h":"c_cpp",".handlebars":"handlebars",".hbs":"handlebars",".hs":"haskell",".hx":"haxe",".hjson":"hjson",".ini":"ini",".java":"java",".jsp":"jsp",".jl":"julia",".kt":"kotlin",".kts":"kotlin",".tex":"latex",".lgt":"logtalk",".lua":"lua",".m":"objectivec",".ml":"ocaml",".mli":"ocaml",".pas":"pascal",".php":"php",".pl":"perl",".pp":"pascal",".psql":"pgsql",".py":"python",".r":"r",".rb":"ruby",".red":"red",".reds":"red",".rhtml":"html_ruby",".rs":"rust",".rss":"xml",".scala":"scala",".sc":"scala",".scm":"scheme",".ss":"scheme",".sh":"sh",".sql":"sql",".swift":"swift",".xq":"xquery",".xql":"xquery",".xqm":"xquery",".xquery":"xquery",".xqy":"xquery",".svg":"svg",".xml":"xml",".html":"html_ls",".xhtml":"html_ls",".htm":"html_ls",".jade":"jade",".pug":"jade",".css":"css_ls",".scss":"scss_ls",".sass":"sass",".less":"less_ls",".styl":"stylus"},e.SupportedModes=Object.keys(e.SupportedExtensions).reduce((function(t,n){return t[e.SupportedExtensions[n]]=n,t}),{})})).__init__((function(e,{model:t,session:n,messages:i,vibrate:o,memory:a}){Object.assign(e,{model:t,session:n,messages:i,vibrate:o,memory:a,observable:new ObservableClass}),e.$dummyAceSession=ace.createEditSession("","text"),e.$dummyUndoManager=e.$dummyAceSession.getUndoManager(),e.$sessionMetaCache={},a.observable.subscribe(({lowOnMemory:t})=>{t&&e.Jn(!1)})})).def({Xn:function(e){return e in this.SupportedExtensions},ei:function(e){return this.SupportedExtensions[PathUtils.ext(e)]||"text"},Hn:function(e){return this.SupportedModes[e]||".txt"},ti:function({inode:e,hash:t}){const n=this.$sessionMetaCache[e];return n?(n.hash=t,n):null},ni:function({inode:e,hash:t}){const n=this.$sessionMetaCache[e];return n&&n.hash===t?n:this.$sessionMetaCache[e]={undoManager:new ace.UndoManager,hash:t}},ii:function(e){e=e||"chrome",this.editorComponents.forEach((function(t){t.setTheme(e)}))},oi:function(e){this.defaultUseAceWorkers=e,this.editorComponents.forEach((function(t){t.setAutocomplete(e)}))},Jn:function(e){this.defaultUseAceWorkers=e,this.editorComponents.forEach((function(t){t.getSession().setUseWorker(e)}))},ai:function(e){this.defaultWordWrap=e,this.editorComponents.forEach((function(t){t.getSession().setUseWrapMode(e),t.refresh()}))},si:function(e){this.editorComponents.forEach((function(t){t.$ace.setKeyboardHandler(e)}))},ri:function(e){this.touchEditors.forEach((function(t){t.setExtraTouchKeyboard&&t.setExtraTouchKeyboard(e)}))},ci:function(e){this.touchEditors.forEach((function(t){t.setTouchKeyboard&&t.setTouchKeyboard(e)}))},li:function(e){this.touchEditors.forEach((function(t){t.setKeyboardPosition&&t.setKeyboardPosition(e)}))},ui:function(e){this.editorComponents.forEach((function(t){t.setFontSize(e)}))},hi:function(e){this.editorComponents.forEach((function(t){t.setDisplayIndentGuides(e)}))},di:function(e){this.editorComponents.forEach((function(t){t.setShowGutter(e)}))},pi:function(e){this.defaultTabSize=+e,this.editorComponents.forEach((function(t){t.setTabSize(+e)}))},mi:function(){let e="";for(let t=0;t<this.defaultTabSize;t++)e+=" ";return e},fi:function(e){this.vibrate.enabled=e},gi:function(e,t,n){const i=t.getUndoManager();t.setUndoManager(this.$dummyUndoManager),e.getSession()===t?(e.$silentChange=!0,t.setValue(n),e.$silentChange=!1):t.setValue(n),t.setUndoManager(i),this.$dummyUndoManager.reset()},Yn:function(e){return this.observable.run({action:"findAllInFiles",text:e})},Zn:function(e,{row:t,column:n}){return this.observable.run({action:"jumpToFile",path:e,row:t,column:n})},Qn:async function({path:e,changes:t}){const[n,i]=await Promise.all([GFS.inode(e),GFS.readFile(e,{encoding:"utf8"})]),o=this.ni({inode:n,hash:sha1(i)}),a=this.$dummyAceSession;a.setUndoManager(this.$dummyUndoManager),a.setValue(i),a.setUndoManager(o.undoManager);for(let e=0;e<t.length;e++)a.replace(t[e].range,t[e].text);const s=a.getValue();return a.markUndoGroup(),this.$dummyUndoManager.reset(),this.ti({inode:n,hash:sha1(s)}),await GFS.write(e,s,{updateStatus:!0}),this.observable.run({action:"replaceInFile",inode:n,text:s})}}),m.module("editor").__new__((function(e){e.ace={userAgent:ace.require("ace/lib/useragent"),emmet:ace.require("ace/ext/emmet"),languageTools:ace.require("ace/ext/language_tools")},e.ace.languageTools.snippetCompleter.getDocTooltip=null})).__init__((function(e){UI.def({__name__:"editor",$defaults:{value:"",margin:"",flexSize:"flex",scrollMargin:UIkit2.support.touch?64:40,editorOptions:{}},$setters:{editorOptions:function(e){this.editorOptions=e},readonly:function(e){const t=this.$ace;t.setOptions({readOnly:e,highlightActiveLine:!e,highlightGutterLine:!e}),t.renderer.$cursorLayer.element.style.opacity=e?0:1}},__init__:function(e){const t=UI.uid("editorContainer");e.id&&(UI.components[e.id]=this),this.element=this.el=UI.createElement("DIV",{id:t}),UI.addClass(this.el,"uk-flex-item-1"),this.observable=new ObservableClass,this.sessionCache={},this.config=e,this.$ace=ace.edit(this.el),this.$ace.renderer.scrollBarV.width=0,this.init(this.$ace)},__after__:function(t){e.editorComponents.push(this),this.setTabSize(t.tabSize||e.defaultTabSize),this.setMode(t.mode||"javascript")},init:function(t){const n=this.config.scrollMargin,i=e.ace.languageTools,o={scrollPastEnd:.5,useTextareaForIME:!1,enableLiveAutocompletion:!1,enableBasicAutocompletion:[i.keyWordCompleter,i.snippetCompleter],enableSnippets:!0,enableEmmet:!0,showPrintMargin:!1,fadeFoldWidgets:!0,tooltipFollowsMouse:!UI.support.touch};e.ace.userAgent.isIOS||(o.copyWithEmptySelection=!0),t.setOptions(o),t.$blockScrolling=1/0,t.renderer.setScrollMargin(n,8),this.completionServer=new e.LanguageServerDecorator(this),this.indentManager=new e.IndentManager(this),this.hintManager=new e.HintManager(this),this.initSmartEditingSupport(this),this.initKeybindings(this),this.initProxyEvents(this)},initSmartEditingSupport:function(e){const t=e.$ace;t.on("guttermousedown",(function(e){e.stop()})),t.on("change",(function(t){if(!e.$silentChange)try{e.observable.run({action:"edit",edit:t}),e.debouncedSave()}catch(e){$LOG.error(e)}})),t.commands.on("afterExec",(function(t){switch(t.command.name){case"backspace":case"insertstring":if(!e.autocompleteOff){const n=t.args,i=e.hintManager.isOpened(),o=e.getMode();let a,s=!1;i||("html"===o&&"<"===n?(a="<",s=!0):/^[\w.]$/.test(n)&&"."==n?(a=".",s=!0):/^[A-Za-z]$/.test(n)&&(s=!0)),s?e.debouncedStartAutocomplete(a):(i||"("===n||","===n)&&e.debouncedShowSignature(n)}}})),t.onPaste=function(e,t){if(1!==e.length||8232!==e.charCodeAt(0)){const n={text:e,event:t};this.commands.exec("paste",this,n)}},t.textInput.getElement().setAttribute("autocomplete","off")},initAutocompleteTokenizer:function(){const e=this.$ace;if(!this.tokenizerInitialized&&e){if(!e.completer&&(e.commands.byName.startAutocomplete.exec(e),!e.completer))return;this.tokenizerInitialized=!0;const t=e.completer.getPopup();t.session.bgTokenizer.$tokenizeRow=function(e){const n=[];let i=t.data[e];if(!i)return n;"string"==typeof i&&(i={value:i});const o=i.caption||i.value||i.name;function a(e,t){e&&n.push({type:(i.className||"")+(t||""),value:e})}i.kind&&a(" ","completion_icon ace-lang-completion-"+i.kind);const s=o.toLowerCase(),r=(t.filterText||"").toLowerCase();let c=0,l=0;for(let e=0;e<=r.length;e++)if(e!=l&&(i.matchMask&1<<e||e==r.length)){const t=r.slice(l,e);l=e;const n=s.indexOf(t,c);if(-1===n)continue;a(o.slice(c,n),""),c=n+t.length,a(o.slice(n,c),"completion-highlight")}return a(o.slice(c,o.length),""),i.meta&&n.push({type:"completion-meta",value:i.meta}),n}}},initProxyEvents:function(e){const t=e.$ace;t.on("searchBoxOpen",()=>e.observable.run({action:"searchBoxOpen"})),t.on("searchBoxClose",()=>e.observable.run({action:"searchBoxClose"}))},initKeybindings:function(t){function n(e,t){return{win:e,mac:t}}t.addCommands([{name:"force-save",bindKey:n("Ctrl-S","Command-S"),exec:function(){t.saveCurrentSessionAsync(!0)}},{name:"find_in_file",bindKey:n("Ctrl-Shift-F","Command-Shift-F"),exec:function(){e.Yn(t.getSelectedText())}},{name:"format",bindKey:n("Alt-F","Option-F"),exec:function(){t.indentManager.indent(!0)}},{name:"goToLine",bindKey:n("Ctrl-G","Command-G"),exec:function(){e.prompt.q(RES_I18N.Actions.GoTo(RES_I18N.Objects.Line),"",{showInput:!0,onResult:function(e){t.$ace.gotoLine(parseInt(e))}})}}]),e.qn(t)},debouncedSave:UIkit2.Utils.debounce((function(){this.saveCurrentSessionAsync()}),1e3,!1),debouncedShowSignature:UIkit2.Utils.debounce((function(e){this.getSignature(e)}),250,!1),debouncedStartAutocomplete:UIkit2.Utils.debounce((function(e){this.isAutoCompleteOpen()||this.startAutoComplete(e)}),125,!1),isAutoCompleteOpen:function(){const e=this.getAutoCompleter();return e&&e.activated},getAutoCompletePopup:function(){const e=this.getAutoCompleter();return e?e.getPopup():null},getAutoCompleter:function(){return this.$ace.completer},startAutoComplete:function(e){this.initAutocompleteTokenizer(),this.$ace.autoCompleteTriggerCharacter=e,this.$ace.commands.byName.startAutocomplete.exec(this.$ace),this.dispatch("onStartAutocomplete",[e])},getCursorElement:function(){return this.element.querySelector(".ace_cursor")},isTextSelected:function(){return this.$ace.getSelectedText().length>0},clearSelection:function(){this.$ace.selection.clearSelection()},selectWord:function(){this.$ace.selection.selectWord()},selectAll:function(){this.$ace.selection.selectAll()},copyText2:function(){this.isTextSelected()||this.$ace.selection.selectLine(),document.execCommand("copy"),this.copiedText=this.$ace.getSelectedText()},pasteText2:async function(){const e=await DS.clipboardText();null!==e?this.$ace.execCommand("paste",e):!document.execCommand("paste")&&this.copiedText&&this.$ace.execCommand("paste",this.copiedText)},cutText2:function(){this.copyText2(),this.$ace.execCommand("cut")},getSelectedText:function(){return this.$ace.getSelectedText()},getSelectedTextOrWordAtCursor:function(){const e=this.getSelectedText();return e||(this.$ace.selection.selectWord(),this.getSelectedText())},setScrollMargin:function(e,t){this.$ace.renderer.setScrollMargin(t,e)},addCommands:function(e){this.$ace.commands.addCommands(e)},execCommand:function(e,t){this.$ace.execCommand(e,t)},getMode:function(){return this.getSession().$modeId.split("/").pop()||""},setMode:function(e){return this.getSession().setMode("ace/mode/"+e)},getTheme:function(){return(this.$ace.renderer.$themeId||"").split("/").pop()||""},setTheme:function(e){return this.$ace.setTheme("ace/theme/"+e)},setShowGutter:function(e){return this.$ace.renderer.setShowGutter(e)},getShowGutter:function(){return this.$ace.renderer.getShowGutter()},getValue:function(){return this.$ace.getValue()},setValue:function(t){e.gi(this,this.getSession(),t),this.clearSelection()},isDialogOpened:function(){return!!this.$ace.searchBox&&"none"!=this.$ace.searchBox.element.style.display},navigateToNextTabstop:function(){const e=this.$ace.tabstopManager;return!(!e||!e.tabNext)&&(e.tabNext(),!0)},insertAutoCompleteMatch:function(){return!(!this.getAutoCompleter()||!this.isAutoCompleteOpen())&&(this.getAutoCompleter().insertMatch(),!0)},insertTextAtCursor:function(e,t){const n=this;n.getSession().insert(n.$ace.selection.getCursor(),e),n.moveCursorBy(t.rows,t.chars),"()"==e&&-1==t.chars&&n.debouncedShowSignature()},getCursorPosition:function(){return this.$ace.getCursorPosition()},getAllSelectionRanges:function(){return this.$ace.selection.getAllRanges()},setSelectionRanges:function(e){if(e.length>0){this.$ace.selection.setRange(e[0]);for(let t=1;t<e.length;t++)this.$ace.selection.addRange(e[t])}},navigateTo:function(e,t){this.$ace.navigateTo(e,t)},triggerTabPress:function(){const e=this;if(!e.navigateToNextTabstop()&&!e.insertAutoCompleteMatch()){const t=e.getSession(),n=e.getCursorPosition(),i=t.getTokenAt(n.row,n.column);if(null!==i){const t=i.value,o=i.start+t.length;"."===t||"identifier"===i.type&&o===n.column?e.startAutoComplete():e.$ace.indent()}else e.$ace.indent()}},findDialog:function(e){e?this.$ace.searchBox.hide():this.$ace.execCommand("find")},replaceDialog:function(e){e?this.$ace.searchBox.hide():this.$ace.execCommand("replace")},moveCursorBy:function(e,t){this.clearSelection(),this.$ace.selection.moveCursorBy(e||0,t||0)},moveCursorLeft:function(){this.clearSelection(),this.$ace.selection.moveCursorLeft()},moveCursorRight:function(){this.clearSelection(),this.$ace.selection.moveCursorRight()},expandEmmet:function(){const t=this.$ace;e.ace.emmet.isAvailable(t)&&(e.ace.emmet.runEmmetCommand.call({action:"expand_abbreviation"},t),GA_SendEvent("emmet_expand","n/a"))},autoCompleteNavigateUp:function(){if(this.isAutoCompleteOpen())return this.getAutoCompletePopup().navigateUp(),!0},moveCursorUp:function(){this.clearSelection(),this.$ace.selection.moveCursorUp()},autoCompleteNavigateDown:function(){if(this.isAutoCompleteOpen())return this.getAutoCompletePopup().navigateDown(),!0},moveCursorDown:function(){this.clearSelection(),this.$ace.selection.moveCursorDown()},scrollToLine:function(e,t,n,i){this.$ace.scrollToLine(e,t,n,i||m.noop)},undo:function(){this.getSession().getUndoManager().undo()},redo:function(){this.getSession().getUndoManager().redo()},resize:function(){this.$ace.resize()},isFocused:function(){return this.$ace.isFocused()},focus:function(e){e&&this.$ace.renderer.scrollCursorIntoView(),this.$ace.focus()},blur:function(){this.$ace.blur()},setFontSize:function(e){this.fontSize=e,this.$ace.setFontSize(e);const t=this.getAutoCompletePopup();t&&t.setFontSize(e)},setTabSize:function(e){this.tabSize=e,this.$ace.getSession().setTabSize(e)},getTabSize:function(){return this.$ace.getSession().getTabSize()},getTabString:function(){return this.$ace.getSession().getTabString()},refresh:function(){this.$ace.renderer.updateFull()},cachedModeSessionWithPath:function(t){return this.cachedModeSession(e.ei(t))},cachedModeSession:function(e){const t=this;let n=t.sessionCache[e];return n||(e="@blank"==e?"javascript":e,n=ace.createEditSession("","ace/mode/"+e),t.sessionCache[e]=n,n.selection.on("changeSelection",()=>t.observable.run({action:"selectionChange",selectedText:t.getSelectedText(),selectionRanges:t.getAllSelectionRanges()})),n.selection.on("changeCursor",()=>t.observable.run({action:"positionChange",position:t.getCursorPosition()})),t.hintManager&&(n.on("changeScrollTop",(function(){t.hintManager.close()})),n.on("changeScrollLeft",(function(){t.hintManager.close()})))),n},saveCurrentSessionAsync:function(t){t=!!t;const n=this,i=n.getSession(),o=i.inode,a=i.getValue(),s=e.ti({inode:o,hash:sha1(a)});return s&&(s.ranges=n.getAllSelectionRanges(),s.scrollTop=i.getScrollTop(),s.scrollLeft=i.getScrollLeft()),n.observable.run({action:"save",manual:t,text:a,mtimeMs:Date.now(),writePath:GFS.inodePathSync(o)})},openBlankSession:function(){const t=this.cachedModeSession("@blank");return e.gi(this,t,""),this.setSession(t),t},isCurrentSessionBlank:function(){return!this.getSession().inode},changeSessionAsync:async function(t,{text:n,skipSessionSave:i,externalContent:o,externalPath:a}){const s=this;let r="";if(a)r=o;else if(n)r=n;else{const e=await GFS.read(t,{encoding:"utf8"});e&&(r=e)}if(GFS.isBinaryContent(r))throw new ExtError({message:"Cannot open binary file in editor."});const c=a?`ext://${a}?${encodeURIComponent(t)}`:t,l=await GFS.inode(c),u=sha1(r),h=e.ni({inode:l,hash:u}),d=s.cachedModeSessionWithPath(t);d.inode=l,e.gi(s,d,r),void 0!==h.scrollTop&&(d.setScrollTop(h.scrollTop),d.setScrollLeft(h.scrollLeft)),s.setSession(d),d.setUndoManager(h.undoManager),h.ranges&&s.setSelectionRanges(h.ranges),await s.observable.run({action:"sessionChange",writePath:c,skipSessionSave:i,mtimeMs:Date.now(),path:t,text:r})},getSession:function(){return this.$ace.getSession()},setSession:function(t){const n=this.editorOptions;function i(e,t){return void 0===e?t:e}t.setUseWorker(i(n.useWorker,e.defaultUseAceWorkers)),t.setUseWrapMode(i(n.wordWrap,e.defaultWordWrap)),this.$ace.setSession(t),this.$ace.resize(),this.setTabSize(this.tabSize||e.defaultTabSize)},setAutocomplete:function(e){this.autocompleteOff=!e},setDisplayIndentGuides:function(e){this.$ace.setOption("displayIndentGuides",e||!1)},getTokenType:function(e){e=e||0;const t=this.getSession(),n=this.getCursorPosition(),i=t.getTokenAt(n.row,n.column+e);return i?i.type:null}},UI.Dispatcher,UI.PropertySetter)})).__init__((function(e){UI.def({__name__:"touchEditor",$defaults:{flexLayout:"column",margin:"",editor:{view:"editor"},keyboard:!0},__after__:function(t){const n=this;e.touchEditors.push(n);const i=n.$editor=UI.new(t.editor);if(n.$components.push(i),n.element.appendChild(i.element),t.keyboard){const t=n.$keyboard=n.addChild(e.keyboardTemplate(i));t.hideExtraKeys(),n.initKeyboard(i),n.element.appendChild(t.element)}UI.support.touch?n.touchCursors=new e.TouchCursors(i):n.contextMenuManager=new e.ContextMenuManager(i),i.element.addEventListener("scroll",(function(){0!==i.element.scrollTop&&(i.element.scrollTop=0)})),i.addListener("onStartAutocomplete",(function(){n.initAutocomplete(i)}))},setExtraTouchKeyboard:function(e){this.$keyboard&&(this.$hideExtraTouchKeyboard=!e)},setTouchKeyboard:function(e){const t=this;t.$keyboard&&(e?t.$keyboard.showKeys():t.$keyboard.hideKeys())},setKeyboardPosition:function(e){if(!UIkit2.support.touch)return;const t=this.$keyboard,n=this.$editor,i=t.element,o=$$(t.keysId+"HideKeyboard"),a=$$(t.dropdownId),s=a.element.firstChild;switch(e){case"top":t.set("flexLayout","column-reverse"),o.hide(),n.setScrollMargin(8,142),UI.addClass(i,"position-top"),UI.addClass(s,"uk-animation-slide-top"),UI.removeClass(s,"uk-animation-slide-bottom"),a.pos="bottom-left";break;default:t.set("flexLayout","column"),o.show(),n.setScrollMargin(8,64),UI.removeClass(i,"position-top"),UI.removeClass(s,"uk-animation-slide-top"),UI.addClass(s,"uk-animation-slide-bottom"),a.pos="top-left"}},initKeyboard:function(e){const t=this,n=e.$ace;n.on("focus",(function(){t.$hideExtraTouchKeyboard||t.$keyboard.showExtraKeys(),t.$keyboard.hideMenu(),e.observable.run({action:"focus"})})),n.on("blur",(function(){setTimeout(t.$keyboard.hideExtraKeys,1)})),t.$editor.observable.subscribe((function({action:e,path:n}){if("sessionChange"===e){switch(PathUtils.ext(n)){case".css":case".scss":case".less":t.$keyboard.changeMode("css");break;case".svg":case".xml":case".html":t.$keyboard.changeMode("html");break;case".js":case".jsx":case".ts":case".tsx":default:t.$keyboard.changeMode("js")}}}))},initAutocomplete:function(e){const t=e.getAutoCompleter();if(!this.touchEnabled&&t){this.touchEnabled=!0;let n=0;const i=t.getPopup();i.renderer.$maxLines=window.innerWidth<=480?5:8,i.container.style.fontSize=e.fontSize,i.on("touchmove",(function(e){const o=i.getFirstVisibleRow(),a=i.getLastVisibleRow(),s=i.getRow();0==o||a==t.completions.filtered.length-1?(n+=e.wheelY,n<-15?(i.setRow(Math.max(s-1,o)),n=0):n>15&&(i.setRow(Math.min(s+1,a)),n=0)):s!=o+1&&(n=0,i.setRow(o+1))}))}}},UI.definitions.flexgrid)})),m.module("editor").require("keyButton").def({keyboardTemplate:function(e){const t=UI.uid("dropdown"),n=UI.uid("icon"),i=UI.uid("keys"),o=UI.uid("keys"),a=this;return{cls:"x-editor-keyboard-container",device:"touch",flex:!0,flexLayout:"column",dropdownId:t,keysId:o,cells:[{id:t,view:"dropdown",hidden:!0,cls:"x-editor-keyboard-dropdown",style:{position:"absolute",width:"100%"},pos:"top-left",dropdownAnimation:"uk-animation-slide-bottom",dropdown:{cls:"x-editor-options-list",cells:[{view:"list",cls:"uk-width-1-2",margin:"left",listStyle:"side",data:[{view:"link",iconClass:"ti-align-right",value:"format",label:RES_I18N.Elements.Format},{view:"link",icon:"search",value:"find",label:RES_I18N.Elements.FindAll},{view:"link",iconClass:"ti-clipboard",value:"paste",label:RES_I18N.Elements.Paste}],on:{onItemClick:function(t){switch(t.value){case"format":e.indentManager.indent(!0);break;case"find":a.Yn(e.getSelectedTextOrWordAtCursor());break;case"paste":e.pasteText2();break;case"undo":e.undo()}}}},{view:"list",cls:"uk-width-1-2",margin:"right",listStyle:"side",data:[{view:"link",icon:"bolt",value:"goto",label:i18nTag(RES_I18N.Objects.Definition)},{view:"link",icon:"commenting",label:"Signature",value:"signature"},{view:"link",icon:"comments",label:RES_I18N.Elements.ShowInfo,value:"info"}],on:{onItemClick:function(t){switch(t.value){case"signature":e.getSignature();break;case"goto":e.goToDefinition();break;case"info":e.getInfo()}}}}]},on:{onOpen:function(){UI.addClass($$(n).element,"uk-active"),this.show()},onClose:function(){UI.removeClass($$(n).element,"uk-active"),this.hide()}}},{id:i,cls:"x-editor-keyboard",flexSize:"none",flexAlign:"middle",flexSpace:"around",cells:[{view:"keyButton",batch:"js",label:"()",pos:"top-left",multirow:!0,offset:-5,defaultIndex:0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"("},{view:"keyOption",label:"{"},{view:"keyOption",label:"["},{view:"keyOption",label:"<"},{view:"keyOption",label:"&#x2F",value:"/"}]},{cells:[{view:"keyOption",label:")"},{view:"keyOption",label:"}"},{view:"keyOption",label:"]"},{view:"keyOption",label:">"},{view:"keyOption",label:"&#x2F>",value:"/>"}]},{cells:[{view:"keyOption",label:"()",offset:-1},{view:"keyOption",label:"{}",offset:-1},{view:"keyOption",label:"[]",offset:-1},{view:"keyOption",label:"<>",offset:-1},{view:"keyOption",label:"<&#x2F>",value:"</>",offset:-1}]}]}},{view:"keyButton",batch:"html",label:"<>",pos:"top-left",multirow:!0,offset:-5,defaultIndex:0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"<"},{view:"keyOption",label:"&#x2F",value:"/"},{view:"keyOption",label:"{"},{view:"keyOption",label:"("},{view:"keyOption",label:"["}]},{cells:[{view:"keyOption",label:">"},{view:"keyOption",label:"&#x2F>",value:"/>"},{view:"keyOption",label:"}"},{view:"keyOption",label:")"},{view:"keyOption",label:"]"}]},{cells:[{view:"keyOption",label:"<>",offset:-1},{view:"keyOption",label:"<&#x2F>",value:"</>",offset:-1},{view:"keyOption",label:"{}",offset:-1},{view:"keyOption",label:"()",offset:-1},{view:"keyOption",label:"[]",offset:-1}]}]}},{view:"keyButton",batch:"css",label:"{}",pos:"top-left",multirow:!0,offset:-5,defaultIndex:0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"{"},{view:"keyOption",label:"("},{view:"keyOption",label:"<"},{view:"keyOption",label:"&#x2F",value:"/"},{view:"keyOption",label:"["}]},{cells:[{view:"keyOption",label:"}"},{view:"keyOption",label:")"},{view:"keyOption",label:">"},{view:"keyOption",label:"&#x2F>",value:"/>"},{view:"keyOption",label:"]"}]},{cells:[{view:"keyOption",label:"{}",offset:-1},{view:"keyOption",label:"()",offset:-1},{view:"keyOption",label:"<>",offset:-1},{view:"keyOption",label:"<&#x2F>",value:"</>",offset:-1},{view:"keyOption",label:"[]",offset:-1}]}]}},{view:"keyButton",batch:"js",label:"if",pos:"top-left",offset:-42,defaultIndex:1,multirow:!0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"in",value:"in "},{view:"keyOption",label:"sw",value:"switch "},{view:"keyOption",label:"case",value:"case "},{view:"keyOption",label:"br",value:"break"},{view:"keyOption",label:"=>",value:"=> "},{view:"keyOption",label:"let",value:"let "},{view:"keyOption",label:"cons",value:"const "},{view:"keyOption",label:"asyn",value:"async "}]},{cells:[{view:"keyOption",label:"for",value:"for "},{view:"keyOption",label:"if",value:"if "},{view:"keyOption",label:"else",value:"else "},{view:"keyOption",label:"ret",value:"return "},{view:"keyOption",label:"fn",value:"function "},{view:"keyOption",label:"var",value:"var "},{view:"keyOption",label:"this",value:"this"},{view:"keyOption",label:"awt",value:"await"}]}]}},{view:"keyButton",batch:"css",label:"px",pos:"top-left",offset:-42,defaultIndex:1,multirow:!0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"!im",value:"!important"},{view:"keyOption",label:"pt"},{view:"keyOption",label:"rem"},{view:"keyOption",label:"rgba"},{view:"keyOption",label:"auto"}]},{cells:[{view:"keyOption",label:"%"},{view:"keyOption",label:"px"},{view:"keyOption",label:"em"},{view:"keyOption",label:"rgb"},{view:"keyOption",label:"none"}]}]}},{view:"keyButton",batch:"html",label:"div",pos:"top-left",offset:-42,defaultIndex:1,multirow:!0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"html",value:"<!doctype html></html>",offset:-7},{view:"keyOption",label:"head",value:"<head></head>",offset:-7},{view:"keyOption",label:"body",value:"<body></body>",offset:-7},{view:"keyOption",label:"style",value:"<style></style>",offset:-8},{view:"keyOption",label:"scp",value:"<script><\/script>",offset:-9},{view:"keyOption",label:"link",value:"<link>"},{view:"keyOption",label:"meta",value:"<meta>"}]},{cells:[{view:"keyOption",label:"form",value:"<form></form>",offset:-7},{view:"keyOption",label:"div",value:"<div></div>",offset:-6},{view:"keyOption",label:"span",value:"<span></span>",offset:-7},{view:"keyOption",label:"ul",value:"<ul></ul>",offset:-5},{view:"keyOption",label:"li",value:"<li></li>",offset:-5},{view:"keyOption",label:"btn",value:"<button></button>",offset:-9},{view:"keyOption",label:"img",value:"<img>"}]}]}},{view:"keyButton",batch:"html",label:"class",pos:"top-left",offset:-42,defaultIndex:1,multirow:!0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"click",value:'onclick=""',offset:-1},{view:"keyOption",label:"title",value:'title=""',offset:-1},{view:"keyOption",label:"data",value:'data=""',offset:-1},{view:"keyOption",label:"alt",value:'alt=""',offset:-1},{view:"keyOption",label:"rel",value:'rel="" ',offset:-1}]},{cells:[{view:"keyOption",label:"src",value:'src=""',offset:-1},{view:"keyOption",label:"class",value:'class=""',offset:-1},{view:"keyOption",label:"style",value:'style=""',offset:-1},{view:"keyOption",label:"id",value:'id=""',offset:-1},{view:"keyOption",label:"href",value:'href=""',offset:-1}]}]}},{view:"keyButton",batch:"js",label:"=",offset:21,defaultIndex:2,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"*"},{view:"keyOption",label:"+"},{view:"keyOption",label:"="},{view:"keyOption",label:"-"},{view:"keyOption",label:"/"},{view:"keyOption",label:"%"}]}},{view:"keyButton",batch:"css",label:".",offset:21,defaultIndex:2,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"_"},{view:"keyOption",label:"-"},{view:"keyOption",label:"."},{view:"keyOption",label:"#"},{view:"keyOption",label:"&"},{view:"keyOption",label:">"}]}},{view:"keyButton",batch:"html",label:"=",offset:21,defaultIndex:2,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"*"},{view:"keyOption",label:"+"},{view:"keyOption",label:"="},{view:"keyOption",label:"-"},{view:"keyOption",label:"/"}]}},{view:"keyButton",batch:"js",label:"!",defaultIndex:2,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"_"},{view:"keyOption",label:"$"},{view:"keyOption",label:"!"},{view:"keyOption",label:"@"},{view:"keyOption",label:"#"}]}},{view:"keyButton",batch:"js",label:"&&",defaultIndex:2,multirow:!0,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"<="},{view:"keyOption",label:">="},{view:"keyOption",label:"||"},{view:"keyOption",label:"!="},{view:"keyOption",label:"!=="}]},{cells:[{view:"keyOption",label:"<"},{view:"keyOption",label:">"},{view:"keyOption",label:"&&"},{view:"keyOption",label:"=="},{view:"keyOption",label:"==="}]}]}},{view:"keyButton",batch:"css",label:":",defaultIndex:1,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"+"},{view:"keyOption",label:":"},{view:"keyOption",label:"@"}]}},{view:"keyButton",batch:"css",label:";",defaultIndex:1,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:","},{view:"keyOption",label:";"},{view:"keyOption",label:"!"}]}},{view:"keyButton",batch:"js",label:";",defaultIndex:1,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:":"},{view:"keyOption",label:";"},{view:"keyOption",label:"?:",value:"?  :",offset:-2}]}},{view:"keyButton",batch:"js",label:".",pos:"top-right",offset:44,defaultIndex:2,editorOptions:{editor:e},dropdown:{cells:[{view:"keyOption",label:"\\"},{view:"keyOption",label:"/"},{view:"keyOption",label:"."},{view:"keyOption",label:",",value:", "}]}},{view:"keyButton",batch:"js",label:"''",pos:"top-right",multirow:!0,offset:4,defaultIndex:3,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"/"},{view:"keyOption",label:"`"},{view:"keyOption",label:'"'},{view:"keyOption",label:"'"}]},{cells:[{view:"keyOption",label:"//",offset:-1},{view:"keyOption",label:"``",offset:-1},{view:"keyOption",label:'""',offset:-1},{view:"keyOption",label:"''",offset:-1}]}]}},{view:"keyButton",batch:"html",label:'""',pos:"top-right",multirow:!0,offset:4,defaultIndex:3,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"`"},{view:"keyOption",label:"'"},{view:"keyOption",label:'"'}]},{cells:[{view:"keyOption",label:"``",offset:-1},{view:"keyOption",label:"''",offset:-1},{view:"keyOption",label:'""',offset:-1}]}]}},{view:"keyButton",batch:"css",label:"''",pos:"top-right",multirow:!0,offset:4,defaultIndex:3,editorOptions:{editor:e},dropdown:{flexLayout:"column",cells:[{cells:[{view:"keyOption",label:"`"},{view:"keyOption",label:'"'},{view:"keyOption",label:"'"}]},{cells:[{view:"keyOption",label:"``",offset:-1},{view:"keyOption",label:"''",offset:-1},{view:"keyOption",label:'""',offset:-1}]}]}},{view:"menuIcon",batch:"html",iconClass:"ti-shortcode",style:{width:"40px"},on:{onMouseDown:function(){a.vibrate.lt(),e.expandEmmet(),e.focus(!0)}}}]},{id:o,cls:"x-editor-keyboard",flexSize:"none",style:{padding:"0 6px"},defaultBatch:["tab","arrow","more","close"],cells:[{id:o+"Tab",batch:"tab",view:"menuIcon",flexSize:"flex",iconClass:"ti-shift-right",on:{onMouseDown:function(){a.vibrate.lt(),e.triggerTabPress(),e.focus(!0)}}},{id:o+"Up",batch:"arrow",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-up",on:{onMouseDown:function(){a.vibrate.lt(),e.autoCompleteNavigateUp()||(e.moveCursorUp(),e.focus(!0))}}},{id:o+"Down",batch:"arrow",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-down",on:{onMouseDown:function(){a.vibrate.lt(),e.autoCompleteNavigateDown()||(e.moveCursorDown(),e.focus(!0))}}},{id:o+"Left",batch:"arrow",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-left",on:{onMouseDown:function(){a.vibrate.lt(),e.moveCursorLeft(),e.focus(!0)}}},{id:o+"Right",batch:"arrow",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-right",on:{onMouseDown:function(){a.vibrate.lt(),e.moveCursorRight(),e.focus(!0)}}},{id:o+"Arrows",batch:"arrows",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-double-left",on:{onMouseDown:function(){$$(o).showBatch(["tab","arrow","more","close"])}}},{id:o+"Undo",batch:"undo",view:"menuIcon",flexSize:"flex",iconClass:"ti-back-left",on:{onMouseDown:function(){a.vibrate.lt(),e.undo()}}},{id:o+"Redo",batch:"redo",view:"menuIcon",flexSize:"flex",iconClass:"ti-back-right",on:{onMouseDown:function(){a.vibrate.lt(),e.redo()}}},{id:o+"Copy",batch:"copy",view:"menuIcon",flexSize:"flex",iconClass:"ti-layers",on:{onMouseDown:function(){a.vibrate.lt(),e.copyText2()}}},{id:o+"Cut",batch:"cut",view:"menuIcon",flexSize:"flex",iconClass:"ti-cut",on:{onMouseDown:function(){a.vibrate.lt(),e.cutText2()}}},{id:o+"Paste",batch:"paste",view:"menuIcon",flexSize:"flex",iconClass:"ti-clipboard",on:{onMouseDown:function(){a.vibrate.lt(),e.pasteText2()}}},{id:n,batch:"menu",view:"menuIcon",flexSize:"flex",iconClass:"ti-plus",on:{onClick:function(e,n,i){UI.preventEvent(i);const o=$$(t);o&&!o.isOpened()&&setTimeout((function(){o.open(),o.positionNextTo(o.element.parentNode,o.pos,0,0)}),325)}}},{id:o+"HideKeyboard",batch:"close",view:"menuIcon",flexSize:"flex",icon:"triangle-down"},{id:o+"More",batch:"more",view:"menuIcon",flexSize:"flex",iconClass:"ti-angle-double-right",on:{onMouseDown:function(){$$(o).showBatch(["arrows","redo","undo","copy","cut","paste","menu"])}}}]}],on:{onInitialized:function(){this.optionsKey=$$(n),this.leftKey=$$(o+"Left"),this.rightKey=$$(o+"Right"),this.upKey=$$(o+"Up"),this.downKey=$$(o+"Down"),this.tabKey=$$(o+"Tab"),this.changeMode("js")}},hideMenu:function(){$$(t).close()},showExtraKeys:function(){$$(i).show()},hideExtraKeys:function(){$$(i).hide()},changeMode:function(e){$$(i).showBatch(e)},showKeys:function(){$$(o).show()},hideKeys:function(){$$(o).hide()}}}}),m.module("editor").__init__((function(e){e.scrollingStates={},e.activeActionBar=null})).__init__((function(e){e.TouchCursors=function(t){const n=t.$ace,i=n.renderer,o=t.element,a=this;a.$touching=!1,a.editor=t,a.caretCursor=UI.new({cls:"x-caret-cursor",hidden:!0,position:"absolute"},o),a.leftCursor=UI.new({cls:"x-left-cursor",hidden:!0,position:"absolute"},o),a.rightCursor=UI.new({cls:"x-right-cursor",hidden:!0,position:"absolute"},o),a.actionBar=UI.new({cls:"x-action-bar",animation:"fade",hidden:!0,position:"absolute",cells:[{view:"touchIcon",iconClass:"ti-cut",on:{onTouchEnd:function(){t.cutText2(),a.actionBar.hide()}}},{view:"touchIcon",iconClass:"ti-layers",on:{onTouchEnd:function(){t.copyText2(),a.actionBar.hide()}}},{view:"touchIcon",iconClass:"ti-clipboard",on:{onTouchEnd:function(){t.pasteText2(),a.actionBar.hide()}}},{view:"touchIcon",iconClass:"ti-align-justify",on:{onTouchEnd:function(){a.pasteActionBar.hide(),t.selectAll();const e=t.getAllSelectionRanges().pop();e&&t.scrollToLine(e.end.row)}}}]},o),a.pasteActionBar=UI.new({cls:"x-action-bar",animation:"fade",hidden:!0,position:"absolute",cells:[{view:"touchIcon",iconClass:"ti-clipboard",on:{onTouchEnd:function(){t.pasteText2(),a.pasteActionBar.hide()}}},{view:"touchIcon",iconClass:"ti-align-justify",on:{onTouchEnd:function(){a.pasteActionBar.hide(),t.selectAll();const e=t.getAllSelectionRanges().pop();e&&t.scrollToLine(e.end.row)}}}]},o),n.on("blur",(function(){a.caretCursor.hide()})),n.on("focus",(function(){a.updateTextSelectionCursors()})),a.caretCursor.element.addEventListener("touchmove",(function(e){a.$touching=!0,function e(t){if(t){const o=i.$cursorLayer,s=o.element.getBoundingClientRect(),r=o.config.offset,c=n.selection.getRange(),l=n.session.getLength();let u,h,d,p,m;for(p=0;p<l&&(d=o.getPixelPosition({row:p+1,column:0},!0).top-r+22,!(d>=t.clientY));p++);c.start.row=c.end.row=p;let f=n.session.getLine(p).length,g=0,v=i.$textLayer.$fontMetrics.$characterSize.height;for(m=g;m<f&&(u=o.getPixelPosition({row:p,column:m},!0),h=u.left+s.left+3,d=u.top-r+v+22,!(h>=t.clientX&&d>=t.clientY));m++);c.start.column=c.end.column=m,n.selection.setRange(c);let{row:w,column:b}=n.selection.lead;a.scrollTarget={afterScroll:e.bind(this,t),scrollPos:o.getPixelPosition({row:w,column:b})},a.updateTextSelectionCursors()}}(e.changedTouches[0]),e.cancelable&&UI.preventEvent(e)})),a.rightCursor.element.addEventListener("touchmove",(function(e){UI.preventEvent(e),a.$touching=!0,function e(t){if(t){const o=i.$cursorLayer,s=o.element.getBoundingClientRect(),r=o.config.offset,c=n.selection.getRange(),l=n.session.getLength();let u,h,d,p,m;for(p=c.start.row;p<l&&(d=o.getPixelPosition({row:p+1,column:0},!0).top-r+18,!(d>=t.clientY));p++);c.end.row=p;const f=n.session.getLine(p).length,g=c.start.row==p?c.start.column+1:0,v=i.$textLayer.$fontMetrics.$characterSize.height;for(m=g;m<f&&(u=o.getPixelPosition({row:p,column:m},!0),h=u.left+s.left+18,d=u.top-r+v+18,!(h>=t.clientX&&d>=t.clientY));m++);c.end.column=m,n.selection.setRange(c);const{row:w,column:b}=n.selection.lead;a.scrollTarget={afterScroll:e.bind(this,t),scrollPos:o.getPixelPosition({row:w,column:b})},a.updateTextSelectionCursors()}}(e.changedTouches[0])})),a.leftCursor.element.addEventListener("touchmove",(function(e){UI.preventEvent(e),a.$touching=!0,function e(t){if(t){const o=i.$cursorLayer,s=o.element.getBoundingClientRect(),r=o.config.offset,c=n.selection.getRange(),l=0;let u,h,d,p,m;for(p=c.end.row;p>=l&&(d=o.getPixelPosition({row:p,column:0},!0).top-r+18,!(d<=t.clientY));p--);c.start.row=p;const f=c.end.row==p?c.end.column-1:n.session.getLine(p).length,g=0,v=i.$textLayer.$fontMetrics.$characterSize.height;for(m=g;m<f&&(u=o.getPixelPosition({row:p,column:m},!0),h=u.left+s.left,d=u.top-r+v+18,!(h>=t.clientX&&d>=t.clientY));m++);c.start.column=m,n.selection.setRange(c);const{row:w,column:b}=n.selection.anchor;a.scrollTarget={afterScroll:e.bind(this,t),scrollPos:o.getPixelPosition({row:w,column:b})},a.updateTextSelectionCursors()}}(e.changedTouches[0])})),i.on("afterRender",a.updateTextSelectionCursors.bind(a));let s=null,r=!1,c=0,l=0;function u(e,t){t||document.hasFocus()&&UI.preventEvent(e),null!==s&&(clearTimeout(s),s=null)}function h(){const e=a.scrollTarget,t=Date.now();if(e&&a.cursorScroll){const n=.005*(t-a.cursorScroll);let o=0,s=0;const r=Math.max(0,.5*window.innerWidth-50),c=Math.max(0,.5*window.innerHeight-35),l=Math.min(r,80),u=Math.min(r,80),h=Math.min(c,80),d=Math.min(c,160),p=e.scrollPos,m=p.top-h,f=p.left-l,g=p.top+d,v=p.left+u,w=i.session,b=w.getScrollTop(),y=w.getScrollLeft(),S=i.$size;b>m&&m>=0?s=Math.min(n*(m-b),-1):b+S.height<g&&(s=Math.max(n*(g-b-S.height),1)),y>f&&f>=0?o=Math.min(n*(f-y),-1):y+S.width<v&&(o=Math.max(n*(v-y-S.width),1)),(o||s)&&(o&&w.setScrollLeft(y+o),s&&w.setScrollTop(b+s),e.afterScroll())}a.cursorScroll&&(a.cursorScroll=t,requestAnimationFrame(h))}function d(e){a.cursorScroll||(a.cursorScroll=Date.now(),requestAnimationFrame(h)),u(e)}function p(){a.cursorScroll=0,a.$touching=!1,a.updateTextSelectionCursors()}o.addEventListener("touchmove",(function(e){const t=e.changedTouches[0],n=-(t.clientX-c),i=-(t.clientY-l);(Math.abs(i)>10||Math.abs(n)>10)&&null!==s&&(clearTimeout(s),s=null)})),o.addEventListener("touchstart",(function(u){const h=u.changedTouches[0];if(c=h.clientX,l=h.clientY,UI.hasClass(u.target,"ace_gutter-cell")||UI.hasClass(u.target,"ace_fold-widget")||UI.hasClass(u.target,"ace_fold"))return void UI.removeClass(i.$gutter,"invisible-fold-widget");a.cursorScroll=0,document.hasFocus()&&UI.preventEvent(u),UI.addClass(i.$gutter,"invisible-fold-widget"),i.$gutter.dispatchEvent(new CustomEvent("mouseout")),null!==s&&(clearTimeout(s),s=null);const d=u.changedTouches[0],p=i.pixelToScreenCoordinates(d.clientX,d.clientY);s=setTimeout((function(){if("start"===e.scrollingStates[o.id]){r=!0,n.selection.moveCursorToScreen(p.row,p.column),n.selection.clearSelection();const i=n.selection.getWordRange(),o=n.getSession().getTextRange(i);if(!/^\s+$/.test(o)){const e=n.selection.getCursor().column;(o.length<=3||i.start.column<e&&i.end.column>e)&&n.selection.selectWord()}if(n.isFocused()||n.focus(),!n.getSelectedText()){const n=t.getCursorElement(),i=a.pasteActionBar,o=t.$ace.renderer;e.vi(i);const s=i.element.getBoundingClientRect(),r=n.getBoundingClientRect();let c=r.left/2;c=c<8?8:c,c=c+s.width>o.$size.width-8?o.$size.width-8-s.width:c,i.element.style.left=c+"px",i.element.style.top=(r.top<120?r.bottom+32:r.top-s.height-16)+"px"}e.vibrate.lt()}}),675)})),a.caretCursor.element.addEventListener("touchstart",d),a.caretCursor.element.addEventListener("touchend",p),a.leftCursor.element.addEventListener("touchstart",d),a.leftCursor.element.addEventListener("touchend",p),a.rightCursor.element.addEventListener("touchstart",d),a.rightCursor.element.addEventListener("touchend",p),o.addEventListener("touchend",(function(t){const s=t.target&&UI.hasClass(t.target,"ace_content");if(u(t,!s),a.$touching=!1,s)if(r)r=!1;else if("start"===e.scrollingStates[o.id]){const e=t.changedTouches[0],o=i.pixelToScreenCoordinates(e.clientX,e.clientY);n.selection.clearSelection(),n.selection.moveCursorToScreen(o.row,o.column),n.focus(!0)}})),o.addEventListener("contextmenu",UI.preventEvent),o.addEventListener("click",(function(){n.isFocused()||n.focus()}))},e.TouchCursors.prototype={updateTextSelectionCursors:function(){const t=this,n=t.caretCursor,i=t.leftCursor,o=t.rightCursor,a=t.actionBar,s=t.editor.$ace,r=s.getSelectedText(),c=s.selection.getRange(),l=s.renderer;if(!l||!l.$cursorLayer)return;const u=l.gutterWidth,h=l.$cursorLayer.config.offset,d=l.$textLayer.$fontMetrics.$characterSize.height,p=l.$cursorLayer.getPixelPosition(c.start,!0),m=l.$cursorLayer.getPixelPosition(c.end,!0),f=p.top+d-h,g=m.top+d-h,v=Math.round(l.scrollLeft);if(r&&r.length>0)if(n.hide(),i.show(),i.element.style.left=p.left-18+u-v+"px",i.element.style.top=f+"px",o.show(),o.element.style.left=m.left+u-v+"px",o.element.style.top=g+"px",t.$touching)e.vi();else{e.vi(a);const t=a.element.getBoundingClientRect();let n=(p.left+u)/2+(m.left+u)/2-t.width/2;n=n<8?8:n,n=n+t.width>l.$size.width-8?l.$size.width-8-t.width:n,a.element.style.left=n+"px",a.element.style.top=(f<120?g+32:f-d-t.height-16)+"px"}else s.isFocused()&&(n.show(),n.element.style.left=m.left-9+u-l.scrollLeft+1+"px",n.element.style.top=g+1+"px"),o.hide(),i.hide(),a.hide(),t.pasteActionBar.hide()}}})).__init__((function(e){const t=ace.require("ace/lib/event");t.addTouchMoveListener=function(n,i){let o,a,s=0,r=0;const c=e.scrollingStates,l=n.id;if("ontouchmove"in n){let e,h;t.addListener(n,"touchstart",(function(t){const n=t.changedTouches[0];e=n.clientX,h=n.clientY,o=Date.now(),s=r=0,c[l]="start"})),t.addListener(n,"touchmove",(function(t){const n=t.changedTouches[0],a=t.wheelX=-(n.clientX-e),u=t.wheelY=-(n.clientY-h),d=Date.now(),p=.001*(d-o);s=.5*s+a/p*.5,r=.5*r+u/p*.5,e=n.clientX,h=n.clientY,o=d,(Math.abs(a)>5||Math.abs(u)>5)&&(c[l]="scroll"),i(t)})),t.addListener(n,"touchend",(function(){(Math.abs(s)>18||Math.abs(r)>18)&&(o=a=Date.now(),c[l]="scroll",requestAnimationFrame(u))}))}function u(){let e,t,n,h,d;(s||r)&&(d=Date.now(),e=d-a,t=.001*(d-o),o=d,h=r*t*Math.exp(-e/325),n=s*t*Math.exp(-e/325),Math.abs(h)>1||Math.abs(n)>1?(i({wheelX:n,wheelY:h,timeStamp:d}),requestAnimationFrame(u)):c[l]=!1)}}})).def({vi:function(e){this.activeActionBar&&this.activeActionBar.hide(),e&&(e.show(),this.activeActionBar=e)}});const FileExtToMode={".js":"javascript",".ts":"typescript",".jsx":"jsx",".tsx":"tsx",".css":"css",".scss":"scss",".sass":"scss",".less":"less",".html":"html",".xhtml":"html",".htm":"html"},convertPosition=function({row:e,column:t}){return{line:e,character:t}};class LanguageServerClient{constructor(){this.pending={},this.messageId=0,this.queuedMessages=[]}$postMessage(e,t){const n=this;t&&(e.id=++n.messageId,n.pending[n.messageId]=t),e.mode||(e.mode=n.$getModeFromName(e.name)),n.sendToWorker(e)}sendToWorker(e){const t=this;t.worker?t.worker.postMessage(e):t.queuedMessages.push(e)}$getModeFromName(e){return FileExtToMode[PathUtils.ext(e||"")]}addFile(e,t,n){this.$postMessage({type:"add",name:e,text:t},n)}editFile(e,t,n){this.$postMessage({type:"edit",name:e,edits:t.map(({text:e,start:t,end:n})=>({start:convertPosition(t),end:convertPosition(n),text:e}))},n)}updateFile(e,t,n){this.$postMessage({type:"update",name:e,text:t},n)}removeFolder(e,t){this.$postMessage({type:"removeFolder",name:e},t)}removeFile(e,t){this.$postMessage({type:"remove",name:e},t)}moveFolder(e,t,n){this.$postMessage({type:"moveFolder",name:e,newName:t,mode:"all"},n)}moveFile(e,t,n,i){this.$postMessage({type:"move",name:e,newName:t,text:n},i)}setCurrentDirectory(e,t){this.$postMessage({type:"setCurrentDirectory",directoryName:e},t)}clearFiles(e){this.$postMessage({type:"clear",mode:"all"},e)}getCompletions(e,t,n,i){this.$postMessage({type:"completion",name:e,position:convertPosition(t),triggerCharacter:n},i)}doValidate(e,t){this.$postMessage({type:"validate",name:e},t)}getInfo(e,t,n){this.$postMessage({type:"info",name:e,position:convertPosition(t)},n)}goToDefinition(e,t,n){this.$postMessage({type:"def",name:e,position:convertPosition(t)},(function(e){e&&e.def&&n(e)}))}getSignature(e,t,n,i){this.$postMessage({type:"signature",name:e,position:convertPosition(t),triggerCharacter:n},i)}getRefs(e,t,n){this.$postMessage({type:"ref",name:e,position:convertPosition(t)},n)}getRenameLocations(e,t,n,i){this.$postMessage({type:["rename","renameInfo"],name:e,position:convertPosition(t)},(function(e){e&&e.rename&&(e.rename.forEach((function(e){const t=e.textSpan;t.startPosition=n.indexToPosition(t.start),t.endPosition=n.indexToPosition(t.start+t.length)})),i(e))}))}getRenameInfo(e,t,n){this.$postMessage({type:"renameInfo",name:e,position:convertPosition(t)},n)}start(){const e=this;if(!e.worker){let t=e.pending;e.worker=new Worker("./workers/language.worker.js"),e.worker.onmessage=function(n){const i=n.data;"log"==i.type?$LOG.log(i.message):"debug"==i.type?$LOG.debug(i.message):"warn"==i.type?$LOG.warn(i.message):"error"==i.type?$LOG.error(i.message):i.id&&t[i.id]&&(t[i.id](i),delete t[i.id]),e.queuedMessages.length&&(e.queuedMessages.forEach((function(t){e.worker.postMessage(t)})),e.queuedMessages.length=0)},e.worker.onerror=function(e){for(let n in t)t[n](null,e);t={}}}e.stopped=!1}stop(){this.worker&&(this.worker.terminate(),this.worker=null,this.stopped=!0)}}var LSC=new LanguageServerClient;requestAnimationFrame(()=>LSC.start()),m.module("share").require("prompt").__init__((function(e,{prompt:t}){Object.assign(e,{prompt:t});const n="abcdefghijklmnopqrstuvwxyz";e.maxSize=16384,e.base=n+n.toUpperCase(),e.baseCharCodes=new Uint8Array(e.base.split("").map(e=>e.charCodeAt(0)))})).def({wi:()=>$$("shareLinkInput"),dt:()=>$$("shareMessage"),bi:()=>$$("shareTitle"),yi:function(){this.wi().element.select(),document.execCommand("copy")},Si:async function({title:e,message:t,value:n}){this.bi().setLabel(e||""),this.dt().setValue(t||""),this.wi().setValue(n||""),this.modal.open(),GA_SendEvent("share_link","n/a")},xi:async function(e){const t=this,n=await GFS.lstat(e);if(!n){const e="Could not share file because it does not exist.";throw t.prompt.ue("Missing File",e),Error(e)}if(!(n.size<t.maxSize)){const e="Could not share file because it exceeds the 16 kB limit.";throw t.prompt.ue("Size Exceeded",e),Error(e)}try{const t=await GFS.readFile(e);return`https://spck.io/?fileName=${encodeURIComponent(PathUtils.basename(e))}&fileContent=${this._i(t)}`}catch(e){throw t.prompt.ue(e.name||RES_I18N.ErrorMessages.DecodeError,e.message||String(e)),e}},_i:function(e){const t=new zip.Deflater;t.append(e);const n=t.flush(),i=this.base;return n.reduce((e,t)=>e+i[Math.floor(t/5)]+(t%5||""),"")},ki:function(e){const t=new Uint8Array(e.length),n=this.baseCharCodes;let i,o,a=0,s=0;for(;s<e.length;){if(i=e.charCodeAt(s),!(65<=i&&i<=122&&(i<=90||i>=97)))throw new Error("Decoding error occurred with corrupted url.");o=e.charCodeAt(s+1),48<=o&&o<=57?(t[a]=5*n.indexOf(i)+o-48,s+=2,a++):(t[a]=5*n.indexOf(i),s++,a++)}const r=new zip.Inflater,c=Buffer.from(castAsReadableArrayBuffer(r.append(t.slice(0,a))));return r.flush(),c}}),m.module("share").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{id:"shareTitle",view:"menuTitle",collapsable:!1}]},body:{flexLayout:"column",cells:[{id:"shareMessage",margin:"y-sm",view:"label"},{cls:"uk-form",flexAlign:"middle",cells:[{id:"shareLinkInput",view:"input",flexSize:"flex",autocapitalize:"off",autocorrect:"off",spellcheck:"false",readonly:!0},{view:"menuIcon",icon:"copy",title:"Copy Link",margin:"x-sm",flexSize:"none",on:{onClick:function(){e.yi()}}}]}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"shareCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}}]}},document.getElementById("appContainer"))})),m.module("landing").__new__(e=>{e.annoucements='\n# Update 4.2.0\n\n## Minor Changes\n\n- Add "Share URL" option to Remotes List\n- Add header select to Annoucements page\n- Change edit action bar to icons\n\n## Bug fixes\n\n- Fixed Editor trying to open known file types that it cannot open properly\n- Fixed autocomplete for local file editing\n- Fixed breadcrumb dropdown for local file editing\n- Fixed first file not included in navigation history\n- Fixed pushing to remotes not named "origin"\n\n# Update 4.1.0\n\n## Minor Changes\n\n- New buttons added to editor keyboard\n- New icons added to interface\n- Merged Autocomplete/Check-Syntax settings (as they work together now)\n\n## Bug fixes\n\n- Fixed console log problems\n- Fixed emmet not working correctly\n- Fixed redo not responding in rare cases\n\n## Major Changes\n\n# Update 4.0.0\n\n## Major Changes\n\n- Editor and Android app versions merge (no more 0.9.x)\n- Upgrade editor by upgrading Android app, no more auto-updates\n- IDB projects (created in Editor v0.1.0 - v0.8.0) no longer supported\n\n### Autocomplete/Syntax Analysis Rewrite\n\n- Basic (keywords only) autocompletion extended to Python, Java, CoffeeScript, Less, Stylus, and more!\n- Snippets now supported in JavaScript, CSS, HTML, Python, Java, CoffeeScript, and more!\n- CSS4 syntax supported (CSS4 variables, etc.)\n- Improved code-hinting and signature lookup\n\n### Eruda Console\n\n- Default Console option in the app has been replaced with Eruda console\n- Offers greater inspection of app, (i.e. Element, Network inspection)\n- Chrome-like error messages and object inspection in the console\n\n## Minor Changes\n\n- "Auto" Orientation now supported in *Settings* for mobile devices\n- New keybinding options for editor in *Settings*\n- Bug fixes and resource usage improvements\n\n# Update 0.9.17\n\n## Bug fixes\n\n- Fixed text selection cursors not showing up\n\n# Update 0.9.16\n\n## Bug fixes\n\n- Fixed edit file not triggering change in git status\n\n# Update 0.9.15\n\n## Changes\n\n- Improved save/recover file algorithm\n- Improved backup system for all files\n- Small improvements to git branches/remotes interface\n- Renames to existing files not allowed\n- New error for non-UTF-8 file/ZIP import\n- New error when renaming to existing file\n- Minimum Chrome version required bumped to 55+\n\n## Bug fixes\n\n- Fixed move/rename operations causing unintended side effects\n- Fixed files showing in the projects menu\n- Fixed git status stale cache bug\n- Stability fixes for Android file system\n- Stability fixes for IDB file system\n\n# Update 0.9.12\n\n## Changes\n\n- Move Git authentication settings to file (preserved after updates)\n- Improved backup system for last file edited\n\n### Git\n\n- Local branch can be created without remote\n- New branch management interface (delete/add local branches)\n- New remote management interface (delete/add remotes)\n- Fetch specific remote\n- Push/pull from specific upstream branch\n\n## Bug fixes\n\n- Fixed Spanish locale\n- Stability fixes to autocomplete parser\n- Stability fixes to project index backend\n- Fixed 0-index row numbers in search\n- Fixed file search buttons missing on new project\n\n# Update 0.9.10\n\n## Changes\n\n- Add locales for Spanish, Portuguese, Japanese, Chinese\n\n## Bug fixes\n\n- Fixed ZIP import permissions issue\n- Fixed vibrating cursor during selection\n- Fixed left cursor blocked by gutter during selection\n\n# Update 0.9.7\n\n## Changes\n\n- Improved touch selection\n- Elastic touch cursor drag selection\n\n## Bug fixes\n\n- Fix project search\n\n# Update 0.9.6\n\n## Changes\n\n- "Launch" button will launch the current HTML file, otherwise defaults to the set \'Default Launch\' HTML file followed by \'index.html\'\n\n## Bug fixes\n\n- Layout fixes for desktop mode (introduced in 0.9.5)\n- Fixed image viewer not working (requires upgrade Android app to 3.0.9)\n- Fixed public BitBucket repo cloning\n\n# Update 0.9.5\n\n## PWA is here!\n\n#### An intermediate step in supporting iOS\n\n- New PWA version of app available for iOS and Android, available <a rel=\'noopener noreferrer\' href="https://spck.io/pwa" target="_blank">here</a>\n- For instructions to install PWAs visit <a rel=\'noopener noreferrer\' href="https://rangle.io/blog/progressive-web-apps-hit-the-desktop/" target="_blank">here</a>\n- Note that the PWA version uses IndexedDB and do not offer the same feature rich features as the Android App\n\n## Changes\n\n- App deep-linking available in Android app 3.0.8\n- Add new setting \'Keyboard Position\' (Mainly for iOS devices)\n\n## Extra\n- Android Q now recommends "scoped" app storage, apps will no longer be freely able to store and access files created outside the app, this affects the design choices made on filesystem integration for compatibility with future versions of Android. For more information please visit [Manage scoped external storage access](https://developer.android.com/training/data-storage/files/external-scoped)\n'}).def({Gn:async function(){if(!DS.supported)return;const e=this,t=await e.Ai();if(t){const n=null;n&&await e.Ii()!==n&&(e.prompt.q({en:"Special Annoucement"},null,{message:{en:"There is a special announcement. Would you like to go and read it?"},onResult:()=>{m.modules.main.Ci().showLanding(),e.Ei().switchToTab("update")}}),await e.Ii(n)),await e.Ai(t+1)}else e.prompt.ue({en:"Read Carefully",es:"Lea Cuidadosamente",ja:"慎重に読む",pt:"Leia Cuidadosamente",ru:"Внимательно прочитайте",zh:"仔细读",zhTW:"仔細讀"},{en:"Uninstalling this app will remove all app-related (including files, projects). Please keep back-up of your projects through GIT to prevent accidental data-loss.",es:"La desinstalación de esta aplicación eliminará todos los relacionados con la aplicación (incluidos archivos, proyectos). Mantenga una copia de seguridad de sus proyectos a través de GIT para evitar la pérdida accidental de datos.",ja:"このアプリをアンインストールすると、アプリ関連（ファイル、プロジェクトなど）がすべて削除されます。偶発的なデータ損失を防ぐために、GITを介してプロジェクトのバックアップを保管してください。",pt:"A desinstalação deste aplicativo removerá todos os aplicativos relacionados (incluindo arquivos, projetos). Mantenha o backup de seus projetos através do GIT para evitar a perda acidental de dados.",ru:"Удаление этого приложения приведет к удалению всех связанных с приложением (включая файлы, проекты). Сохраняйте резервные копии своих проектов через GIT, чтобы предотвратить случайную потерю данных.",zh:"卸载此应用程序将删除所有与应用程序相关的文件（包括文件，项目）。请通过GIT备份您的项目，以防止意外的数据丢失。",zhTW:"卸載此應用程序將刪除所有與應用程序相關的內容（包括文件，項目）。請通過GIT備份您的項目，以防止意外的數據丟失。"},()=>{e.Ai(1)})},Ii:async function(e){const t=this;if(void 0===e)return t.model.W("specialAnnoucementId");await t.model.ze("specialAnnoucementId",e)},Ai:async function(e){const t=this;if(void 0===e)return t.model.W("userSessionCount")||0;await t.model.ze("userSessionCount",e)}}),m.module("landing").require("project","gitClient","cloneRepo","messages","prompt","model","remote").__init__((function(e,{project:t,gitClient:n,cloneRepo:i,messages:o,prompt:a,model:s,remote:r}){Object.assign(e,{project:t,gitClient:n,cloneRepo:i,messages:o,prompt:a,model:s,remote:r}),e.md=window.markdownit({html:!0}),e.labIndex={},e.filters={},e.Gn()})).def({Ei:()=>$$("landingTab"),$i:()=>$$("landingProjectsList"),Ri:()=>$$("landingSearchBar"),Ti:()=>$$("landingProjectsSearch"),Fi:()=>$$("landingScroller"),zi:()=>$$("landingAnnoucements"),ji:()=>$$("landingAnnoucementHeaders"),Pi:function(){const e=this.md.render(this.annoucements);this.Fi().showBatch("annoucements"),this.Ri().showBatch("annoucements");const t=this.zi().element;t.innerHTML=e;const n=Array.from(t.querySelectorAll("h1")),i=this.ji();i.setNodes(n),i.setData(n.map(({textContent:e},t)=>({label:e,value:t})))},Ni:function(){const e=this;return e.Ri().showBatch("projects"),Object.keys(e.labIndex).length?Promise.resolve(e.Oi()):e.Ui()},Ui:async function(){await this.Bi().then(GA_SendEvent_Success("landing_refresh_list","landing"),GA_SendEvent_Failure("landing_refresh_list","landing")),this.Oi()},Oi:function(){const e=this,t=e.$i(),n=e.Li(Object.keys(e.labIndex).map(t=>e.labIndex[t]));t.setData(n),e.Fi().showBatch(n.length?"list":"empty")},Gi:function(e,t){return(e=new Date(e.date).getTime())-(t=new Date(t.date).getTime())},Li:function(e){const t=this;switch(t.filters.category){case"tag":return t.Di(e.filter(e=>e.tagged));default:return t.Di(e).sort(t.Gi)}},Di:function(e){const t=this.Ti().getValue().toLowerCase();return t?e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)||-1!==e.label.toLowerCase().indexOf(t)})):e},Mi:function(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e},Bi:async function(){const e=tryParseJSON(await this.remote.F({url:"labs/index.json",retryCount:1}))||{},t=await this.model.W("tagged");return t?Object.keys(e).forEach((function(n){e[n].tagged=-1!==t.indexOf(n),e[n].key=n})):Object.keys(e).forEach((function(t){e[t].key=t})),UI.extend(this.labIndex,e)},Wi:async function(e){const t=this;let n=await t.model.W("tagged")||[],i=n;-1===n.indexOf(e.key)?(e.tagged=!0,i=n.concat([e.key])):(e.tagged=!1,i=n.filter(t=>t!==e.key)),i!==n&&await t.model.ze("tagged",i)}}),m.module("landing").__init__((function(e){e.view=UI.new({batch:"landing",flexLayout:"column",cells:[{id:"landingTab",view:"list",cls:"x-horizontal-menu-tab",flexSize:"none",listStyle:"tab",itemTagClass:"x-chrome-tab",data:[{view:"link",style:{width:"3.5em"}},{view:"menuIcon",iconClass:"ti-package",value:"lab"},{view:"menuIcon",iconClass:"ti-bookmark-alt",value:"tag"},{view:"menuIcon",iconClass:"ti-comment-alt",value:"update"},{view:"link",style:{width:"3.5em"}}],setClassToItem:function(e,t){this.each((function(e){const n=this.getItemNode(e.id);n&&UI.removeClass(n,t)}),this);const n=this.getItemNode(e.id);n&&UI.addClass(n,t)},switchToTab:function(t){const n=this,i=n.data.find(e=>e.value===t),o=i&&i.value;if(o)switch(n.setClassToItem(n.next(i),"next"),n.setClassToItem(n.previous(i),"previous"),n.setActive("value",o),o){case"lab":return e.filters.category=null,e.Ni();case"tag":return e.filters.category="tag",e.Ni();case"update":return e.Pi()}},on:{onItemClick:function(e){this.switchToTab(e.value)}}},{id:"landingSearchBar",cls:"x-menu-title-bar shadow",flexSize:"none",cells:[{id:"landingProjectsSearch",batch:"projects",view:"searchField",cls:"x-menu-search",style:{width:"280px",marginLeft:"auto",marginRight:"auto"},clearSearch:!0,i18nPlaceholders:RES_I18N.Actions.SearchFor(RES_I18N.Objects.Labs),on:{onKeyUp:function(t,n,i){"Enter"===i.key&&e.Ni()}}},{id:"landingAnnoucementHeaders",batch:"annoucements",view:"select",cls:"x-menu-search",style:{marginLeft:"auto",marginRight:"auto"},data:[],setNodes:function(e){this.nodes=e},on:{onChange:function(){const t=this.nodes;if(t){const n=t[this.getValue()];n&&(e.zi().element.parentNode.scrollTop=n.offsetTop)}}}}]},{id:"landingScroller",view:"scroller",cells:[{batch:"list",id:"landingProjectsList",view:"list",flexSize:"flex",textAlign:"center",itemTagClass:"uk-flex-inline x-lab-item",template:function(t){return UI.new({flexLayout:"column",cells:[{flex:!1,position:"relative",cells:[{view:"icon",cls:"x-tag-icon"+(t.tagged?" uk-text-primary":""),icon:"bookmark",size:"large",on:{onClick:function(n,i,o){UI.preventEvent(o);const a=this.element;e.Wi(t).then((function(){t.tagged?UI.addClass(a,"uk-text-primary"):UI.removeClass(a,"uk-text-primary")}))}}},{view:"image",src:"labs/"+t.key+"/tb.nl.png",width:128,height:128}]},{cls:"x-lab-item-desc",flexLayout:"column",cells:[{view:"label",label:t.name},{view:"label",label:t.label,htmlTag:"SMALL"}]}]})},on:{onItemClick:function(t){e.project.Vi(t.name,null,null,t)}}},{batch:"empty",textAlign:"center",flexLayout:"column",flexAlign:["center","middle"],cells:[{view:"label",cls:"uk-h5",padding:"large",label:"No matching projects found.",style:{height:"160px",opacity:.5}}]},{id:"landingAnnoucements",batch:"annoucements",cls:"x-markdown",padding:"x",style:{paddingBottom:"48px"}}]}]})})),m.module("logger").__new__(e=>{const t=window;function n(n){return t.console&&t.console[n]?function(){const i=e.logs,o=Array.prototype.slice.call(arguments),a=i[0];return a&&a.args[0]===o[0]?(a.times++,a.time=new Date):i.unshift({method:n,time:new Date,args:o,times:1}),i.length=100,t.console[n].apply(t.console,o)}:i}function i(){}t.$LOG={log:n("log"),debug:n("debug"),warn:n("warn"),error:n("error")},e.logs=[]}).def({$i:function(){return $$("loggerList")},Ct:function(){return $$("loggerSearchInput")}}),m.module("logger").__init__(e=>{e.modal=UI.new({id:e.__name__,view:"modal",closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["scroll","blank"],header:{flexSize:"none",cls:"x-menu-title-bar shadow",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.LogHistory,collapsable:!1},{cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{view:"menuToggle",icon:"search",title:"Search Logs",on:{onToggled:function(){const t=e.Ct();this.isSelected()?(t.show(),t.focus()):t.hide()}}},{id:"loggerCloseButton",view:"menuIcon",icon:"close",title:"Close",on:{onClick:function(){e.modal.close()}}}]}]},{id:"loggerSearchInput",cls:"x-menu-search",view:"searchField",hidden:!0,i18nPlaceholders:RES_I18N.Actions.SearchFor(RES_I18N.Objects.Log),clearSearch:!0,on:{onInput:function(){e.$i().refresh()}}}]},body:{view:"scroller",cells:[{id:"loggerList",view:"list",padding:"x-sm y",batch:"list",selectable:!0,flexSize:"flex",listStyle:"side",filter:t=>{const n=e.Ct().getValue();return t.args.join(" ").includes(n)},template:e=>{const t=e.args.map(e=>String(e)).join(" ");return e.message=t+(e.times>1?`(${e.times})`:""),`<span>[${e.time.toLocaleTimeString()}] </span><span>${t}</span>`},data:[]}]},on:{onOpened:function(){e.$i().setData(e.logs)}}},document.getElementById("appContainer"))}),m.module("main").def({Hi:async function(e,t){const n=await ENV.tmpDirAsync(e);await GFS.write(n,t,{atomic:!0}),await GFS.rm(e,{atomic:!0}),await GFS.mv(n,e,{atomic:!0}),await GFS.observable.run({action:"write",path:e,type:"file",updateStatus:!0})},qi:async function(e){if(!await GFS.exists(e)){const t=await ENV.tmpDirAsync(e);await GFS.exists(t)&&await GFS.mv(t,e,{updateStatus:!0})}}}),m.module("main").__new__((function(e){const t=(e,t)=>`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24">${t}</svg>`;Object.assign(e,{menuIcon:t(24,'<path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>'),playIcon:t(24,'<path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/>')})})),m.module("main").__init__((function(e){window.$embedMode||e.Ki()})).def({Zi:function(){const e=this,t=e.location().hash.split("#lab:");t[1]&&(e.location().replace("/#"),e.project.Vi(null,null,null,t[1]))},Ki:function(){this.Zi(),window.onhashchange=this.Zi.bind(this)}}),m.module("main").require("editor","files","prompt","history","messages","preview","project","model","session","viewer","landing","search","menu","settings","fileTree","memory","share","copyToProject").__init__((function(e,{session:t,search:n,editor:i,path:o,model:a,files:s,prompt:r,messages:c,viewer:l,landing:u,preview:h,project:d,history:p,menu:m,settings:f,fileTree:g,memory:v,share:w,copyToProject:b}){e.historyTracker=new p.HistoryTracker,Object.assign(e,{session:t,search:n,editor:i,path:o,model:a,files:s,prompt:r,messages:c,viewer:l,landing:u,preview:h,project:d,history:p,menu:m,settings:f,fileTree:g,memory:v,share:w,copyToProject:b}),v.observable.subscribe(({lowOnMemory:e})=>{e&&LSC.stop()}),t.observable.subscribe(({action:t,project:n})=>{switch(t){case"open":e.k().show(),e._().show(),e.Qi(),LSC.clearFiles((async function(){const e=await GFS.readdirDeep(n.dir);if(e.length<v.ALLOWED_LANGUAGE_SERVICE_INITIAL_FILES_LIMIT){let t=v.ALLOWED_LANGUAGE_SERVICE_INITIAL_SIZE_LIMIT;await PromisePool({data:e,promiseGenerator:async e=>{const n=await GFS.size(e);if(n<v.LANGUAGE_SERVICE_FILE_SIZE_LIMIT&&t>0){const i=await GFS.readFile(e,{encoding:"utf8"});GFS.isBinaryContent(i)||(LSC.addFile(e,i),t-=n)}},useRaf:!0})}else $LOG.warn("File threshold exceeded for auto file import.")}));break;case"setProject":n||(e.k().hide(),e._().hide(),e.Ci().showLanding(),e.landing.Ei().switchToTab("lab"))}}),n.observable.subscribe(t=>{switch(t.action){case"jumpToFile":i.Zn(t.path,t.item).then((function(){e.Ci().showEditor()}))}}),i.observable.subscribe(async({action:t,path:n,text:i,inode:o,row:a,column:s})=>{const r=e.s();switch(t){case"findAllInFiles":e.u().open(),e.menu.switcher().switchToTab("search",!0),i&&(e.search.findInput().setValue(i),e.search.Yi());break;case"replaceInFile":{const t=r.getSession();if(o===t.inode){const n=t.getUndoManager();t.setUndoManager(e.editor.$dummyUndoManager),t.setValue(i),t.setUndoManager(n),e.editor.$dummyUndoManager.reset()}break}case"jumpToFile":{o!==r.getSession().inode&&await e.O(n);const t={row:a,column:s};r.navigateTo(t.row,t.column),r.scrollToLine(t.row,!0,!1)}}}),e.Qi()})).__init__((function(e,{memory:t}){GFS.observable.subscribe(async({action:n,type:i,path:o,oldpath:a})=>{const s=e.session.Ae(),{xe:r}=e.path;if(s&&PathUtils.childOf(a,s)&&!r(a)){const e="file"===i;switch(n){case"mv":if(PathUtils.childOf(o,s)){if(e){if(await t.he(o)){const e=await GFS.readFile(o,{encoding:"utf8"});GFS.isBinaryContent(e)||LSC.moveFile(a,o,e)}}else LSC.moveFolder(a,o);break}case"rmdir":case"rm":e?LSC.removeFile(a):LSC.removeFolder(a)}}}),GFS.observable.subscribe(({action:t,oldpath:n,path:i})=>{const o=e.session.Ae(),{xe:a}=e.path;if(o&&i&&PathUtils.childOf(i,o)&&!a(i)&&e.preview.useLiveMode&&e.A().isVisible()&&e.Ji(),o&&n&&PathUtils.childOf(n,o)&&!a(n))switch(t){case"mv":case"rm":case"rmdir":if(e.Xi().startsWith(n)){const t=e.eo();if(t)return PathUtils.childOf(t,o)?(e.to(t),e.no(o,t)):(e.io(!0),e.no(o,null))}}}),e.files.observable.subscribe(({action:t,path:n,showInTree:i,skipSessionSave:o,preserveHistory:a,preview:s})=>{switch(t){case"update":{const t=e.eo();if(t&&t===n)return e.O(n,{skipSessionSave:!0})}case"open":if(null!==n)return e.O(n,{preserveHistory:a,skipSessionSave:o,showInTree:i,preview:s}).then((function(){GA_SendEvent("open_file","files"),UI.support.touch||e.s().focus()}));e.io()}}),e.preview.onHidePreviewContainer=function(){e.A().hide(),e.I().hide(),e.s().resize()},e.menu.observable.subscribe(({action:t})=>{switch(t){case"showMenu":e.u().show(),e.p().show(),e.s().resize();break;case"hideMenu":e.u().hide(),e.p().hide(),e.s().resize()}})})).__init__((function(){const e=(()=>{const e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0})();e>=1&&e<60&&this.prompt.ue("Chrome Update Required","This app only works for Chrome 60+.")})).def({Qi:function(){this.historyTracker.reset()},K:function(){return window.localStorage},oo:function(e){this.historyTracker.push(e),this.ao()},l:function(){return $$("mainFileBar")},so:function(){return $$("mainSearchIcon")},Ci:function(){return $$("mainContainer")},ro:function(){return $$("mainEditorContainer")},A:function(){return $$("preview")},S:function(){return $$("mainMenuToggleIcon")},u:function(){return $$("menuContainer")},v:function(){return $$("menuVerticalTab")},p:function(){return $$("menuContainerResizer")},I:function(){return $$("previewContainerResizer")},s:function(){return this._editor||(this._editor=$$("mainEditor").$editor)},co:function(){return $$("mainFileBreadcrumb")},k:function(){return $$("mainLaunchButton")},_:function(){return $$("mainRunButton")},lo:function(){return $$("mainNotSavedLink")},location:function(){const e=window.location;return{origin:e.protocol+"//"+e.hostname+(e.port?":"+e.port:""),hash:e.hash,replace:e.replace.bind(e)}},Ji:UIkit2.Utils.debounce((function(){this.preview.uo(!0)}),1200,!1),ho:function(){return this.u().el.getBoundingClientRect().width},do:function(){return this.v().el.getBoundingClientRect().width},initAsync:async function({fileName:e,fileContent:t,externalPath:n}){const i=this;if(e)if(n){let o=t||await DS.getFileContent()||"";await i.O(e,{externalPath:n,externalContent:o,skipSessionSave:!0})}else if(t){const n=i.share.ki(t),o=await i.po(e,n);await i.O(o,{skipSessionSave:!0})}},mo:function(e){e.currentTarget&&(DS.launchWebView(e.currentTarget.getAttribute("href"))&&UI.preventEvent(e),$LOG.log(`[launch] ${e.currentTarget.getAttribute("href")}`),GA_SendEvent("launch","n/a"))},po:async function(e,t){const n=ENV.tmpDirAsync(e);await GFS.rmdir(PathUtils.dirname(n)),await GFS.write(n,t).then(()=>n)},fo:function(){this.preview.uo(),this.I().show(),this.A().show(),this.s().resize()},ao:function(){this.historyTracker.canUndo()?($$("mainBackButton").enable(),$$("mainBackMenuItem").enable()):($$("mainBackButton").disable(),$$("mainBackMenuItem").disable()),this.historyTracker.canRedo()?($$("mainForwardButton").enable(),$$("mainForwardMenuItem").enable()):($$("mainForwardButton").disable(),$$("mainForwardMenuItem").disable())},eo:function(){const e=this.s().getSession().inode;return e?GFS.inodePathSync(e):null},Xi:function(){const e=this.co();return PathUtils.join(this.session.Ae(),e.getFullPath())||""},to:function(e){const t=this,n=t.co();t.lo().hide(),e?(e=PathUtils.relativeTo(e,t.session.Ae()),n.setFullPath(e),n.show()):n.hide()},O:async function(e,t){t=t||{};const n=this,i=PathUtils.ext(e),o=n.editor.Xn(i),a=n.viewer.Xn(i);await n.qi(e),o&&a?t.preview?await n.vo(e,t):await n.wo(e,t):a?await n.vo(e,t):await n.wo(e,t);const s=this.session.Ae();if(!t.skipSessionSave&&s&&e.startsWith(s)&&await n.no(s,e),t.showInTree&&n.files.Dt().showInTree(e),!t.preserveHistory){const t=await GFS.inode(e);n.oo(t)}},wo:function(e,t){const n=this;return n.memory.pe(e,t).then(i=>{if(i)return Promise.all([n.s().changeSessionAsync(e,t||{}),ENV.tmpDirAsync()]).then(([,t])=>{e.startsWith(t)&&(e=PathUtils.relativeTo(e,t)),n.Ci().showEditor(),n.to(e),n.files.Dt().markActive(e),n.memory.ce()}).catch((function(e){$LOG.error(e),n.messages.dt(e&&e.messageId||"openFileError")}));n.prompt.ue("File Size Too Large","File exceeds the maximum size of 5 MB allowed by the editor.")})},vo:async function(e){const t=this,n=await ENV.tmpDirAsync();try{await t.viewer.bo(e),e.startsWith(n)&&(e=PathUtils.relativeTo(e,n)),t.Ci().showViewer(),t.to(e),t.files.Dt().markActive(e)}catch(e){$LOG.error(e),t.messages.dt(e&&e.messageId||"openFileError")}},yo:async function(){const e=this;e.historyTracker.undo(!0),e.ao();const t=GFS.inodePathSync(e.historyTracker.current);t&&await e.O(t,{preserveHistory:!0})},So:async function(){const e=this;e.historyTracker.redo(!0),e.ao();const t=GFS.inodePathSync(e.historyTracker.current);t&&await e.O(t,{preserveHistory:!0})},io:function(e){const t=this;t.historyTracker.canUndo()?t.yo().then(()=>{e&&(t.historyTracker.clearRedo(),t.ao())},()=>t.xo()):t.xo()},xo:function(){this.Ci().showEditor(),this.to(),this.s().isCurrentSessionBlank()||this.s().openBlankSession(),this.historyTracker.current=null},no:function(e,t){const n=this.session.Se()||{};return Object.assign(n,{currentFilePath:t?PathUtils.relativeTo(t,e):null}),this.model.Ne(e,n)},_o:async function(e,t){const n=this;try{const i=await ENV.tmpDirAsync();if(!e||e.startsWith(i))n.lo().show();else if(e.startsWith("ext://")){const i=e.lastIndexOf("?");await GFS.writeExternal(e.slice(6,i),t),n.lo().hide()}else await n.Hi(e,t),n.lo().hide()}catch(e){n.lo().show(),n.messages.dt("mainSaveFileError"),$LOG.log(`[save] ${e?e.message||String(e):"unknown error"}`)}},ko:function(e,t){const n=this;if(!n.s().isCurrentSessionBlank())return ENV.tmpDirAsync().then(i=>e.startsWith(i)?n.copyToProject.Tt(e):n._o(e,t));n.Ao(t)},Ao:function(e){this.files.Io(null,e)}}),m.module("main").require("menuIcon","fileTree","fileBreadcrumb").__init__((function(e){UI.new({fill:"height",flexLayout:"",cells:[{id:"mainMenuToggleIcon",view:"link",cls:"svg-icon",template:e.menuIcon,device:"touch",on:{onClick:function(){e.u().open()}}},e.menu.verticalTabView,e.menu.menuView,{id:"menuContainerResizer",view:"resizer",direction:"x",minValue:function(){return 280+e.do()},maxValue:function(){return 500+e.do()},on:{onHandleResized:function(t){const n=t-e.do();e.menu.switcher().element.style.width=n+"px",e.s().resize()}}},{id:"mainContainer",cells:[{id:"mainEditorContainer",batch:"editor",flexLayout:"column",position:"relative",cells:[{id:"mainFileBar",batch:"bar",fill:"width",flexSize:"",cls:["x-bar","float"],flexAlign:"middle",selectable:!1,cells:[{id:"mainBackButton",view:"menuIcon",device:"notouch",icon:"chevron-left",disabled:!0,iconClass:"",on:{onClick:function(){e.yo().then(GA_SendEvent_Success("previous_file","file_navigation"),GA_SendEvent_Failure("previous_file","file_navigation"))}}},{id:"mainForwardButton",view:"menuIcon",device:"notouch",icon:"chevron-right",disabled:!0,iconClass:"",on:{onClick:function(){e.So().then(GA_SendEvent_Success("previous_file","file_navigation"),GA_SendEvent_Failure("previous_file","file_navigation"))}}},{view:"spacer",width:36,cls:"uk-hidden-notouch"},{id:"mainFileBreadcrumbScroller",view:"scroller",scrollDirection:"x",cells:[{id:"mainFileBreadcrumb",view:"fileBreadcrumb",data:[],dropdownEvent:"onPathItemClick",dropdownOptions:{id:"mainBreadcrumbDropdown",pos:"bottom-left",dropdownAnimation:"",marginX:-18},dropdown:{id:"mainBreadcrumbDropdownContent",flexLayout:"column",cls:"uk-overflow-hidden",cells:[{cls:"x-menu-title-bar",margin:"y-sm",device:"touch",cells:[{id:"mainBackMenuItem",view:"link",margin:"left",icon:"chevron-left",flexSize:"flex",label:"Back",wrap:"nowrap",disabled:!0,on:{onClick:function(){e.yo(),GA_SendEvent("previous_file","file_navigation")}}},{id:"mainForwardMenuItem",view:"link",margin:"right",alignIconRight:!0,textAlign:"right",icon:"chevron-right",flexSize:"flex",label:"Next",wrap:"nowrap",disabled:!0,on:{onClick:function(){e.So(),GA_SendEvent("next_file","file_navigation")}}}]},{id:"mainFileBreadcrumbDropdownScroller",view:"scroller",cells:[{id:"mainFileBreadcrumbDropdownList",view:"list",listStyle:"dropdown",template:function(t){return'<a class="x-text-overflow-ellipsis">'+e.fileTree.xt(t)+t.label+"</a>"},on:{onItemClick:function(t){if(t.$branch){UI.removeClass($$("mainBreadcrumbDropdown").element,"uk-open");const n=e.files.Dt().getParentBranch(t.path);$$("mainBreadcrumbDropdownContent").dispatch("onOpen",[null,null,{parent:n,files:t.$children}])}else e.O(t.path),GA_SendEvent("open_file_breadcrumb","file_navigation")}}}]}],on:{onOpen:function(e,t,n){this.element.style.height=n.files.length>12?"360px":null;const i=$$("mainFileBreadcrumbDropdownList"),o=n.files.map((function(e){return{path:e.path,label:e.label,file:e.file,$branch:e.$branch,$children:e.$children}}));n.parent&&o.unshift({path:n.parent.path,label:"..",file:!1,$branch:!0,$children:n.parent.$children}),i.setData(o),n.selectedPath&&i.select(i.findOne("path",n.selectedPath))}}},on:{onItemClick:function(t,n){const i=e.session.Ae();if(i){const o=PathUtils.join(i,t.path),a=e.files.Dt(),s=a.getParentBranch(o),r=a.getParentBranch(s.path);this.dispatch("onPathItemClick",[{parent:r,files:s.$children,selectedPath:o},n.lastChild])}else this.dispatch("onPathItemClick",[{files:[t],selectedPath:t.path},n.lastChild])}}},{id:"mainNotSavedLink",view:"link",textColor:"danger",attributes:i18nAttributes({en:"Unsaved",es:"Sin Guardar",ja:"未保存",pt:"Não Salvo",ru:"Hеспасенный",zh:"没有保存",zhTW:"沒有保存"}),margin:"x-sm",hidden:!0,on:{onClick:function(){e.s().saveCurrentSessionAsync(!0)}}}]},{id:"mainSearchIcon",view:"menuToggle",cls:"x-menu-icon",icon:"search",title:"Search File",on:{onToggled:function(){const t=e.s();this.isSelected()?(t.execCommand("find"),GA_SendEvent("file_search","n/a")):t.$ace.searchBox&&t.$ace.searchBox.hide()}}},{id:"mainLaunchButton",view:"link",cls:"svg-icon",template:e.playIcon,hidden:!0,title:"Launch New Window",style:{color:"#0dbf7f"},on:{onInitialized:function(){this.element.addEventListener("mousedown",(function(){const t=e.eo(),n=PathUtils.hasExt(t,".html")?ENV.resource(t):e.preview.Co();UI.setAttributes(this,{href:n,target:"_blank",ref:"noopener noreferrer"})}))},onClick:function(t,n,i){e.mo(i)}}},{id:"mainRunButton",view:"menuToggle",cls:"x-menu-icon",iconClass:"ti-layout-media-right",title:"Side Window",device:"notouch",on:{onToggled:function(){this.isSelected()?(e.fo(),GA_SendEvent("run","n/a")):(e.preview.iframe().setSrc("about:blank"),e.preview.onHidePreviewContainer())}}}]},{batch:"editor",id:"mainEditor",view:"touchEditor",editor:{view:"editor",on:{onInitialized:function(){this.observable.subscribe(({action:t,manual:n,writePath:i,text:o,skipSessionSave:a})=>{switch(t){case"searchBoxOpen":e.so().select();break;case"searchBoxClose":e.so().deselect();break;case"sessionChange":return e._o(i,o);case"save":n?e.ko(i,o):a||e._o(i,o);break;case"focus":$$("mainBreadcrumbDropdown").close()}})}}},on:{onResize:function(){if(this.isVisible()){const t=e.s();if(t.resize(),UI.support.touch){const e=this;if(e.originalHeight){const n=window.innerHeight-e.originalHeight;t.isFocused()&&(n>80?t.blur():n<-80&&t.focus(!0))}e.originalHeight=window.innerHeight}}}}},e.viewer.view]},e.landing.view],on:{onInitialized:function(){this.showEditor()}},showEditor:function(){this.showBatch("editor"),e.ro().showBatch(["bar","editor"])},showViewer:function(){this.showBatch("editor"),e.ro().showBatch(["bar","viewer"])},showLanding:function(){this.showBatch("landing")}},{id:"previewContainerResizer",view:"resizer",direction:"x",hidden:!0,minValue:function(){const t=e.do();return e.ho()+t+320},maxValue:function(){return window.innerWidth-320},on:{onHandleResized:function(t){if(t>0){const n=window.innerWidth-t-2;e.A().el.style.width=n.toFixed(0)+"px",e.s().resize()}}}},e.preview.view]},document.getElementById("appContainer"))})),m.module("preview").require("model","session","history","messages").__init__((function(e,{model:t,session:n,history:i,messages:o}){Object.assign(e,{model:t,session:n,history:i,messages:o}),e.historyTracker=new e.history.HistoryTracker,e.session.observable.subscribe(({action:t})=>{if("open"===t)return e.Qi(),e.Eo()}),GFS.observable.subscribe(({path:t,action:n})=>{if("write"===n){const n=e.session.Ae();if(n&&PathUtils.childOf(t,n))switch(PathUtils.ext(t)){case".html":e.Eo()}}}),e.Qi()})).def({onHidePreviewContainer:m.noop,Qi:function(){this.historyTracker.reset()},fileSelect:function(){return $$("previewFileSelect")},iframe:function(){return $$("iframe")},backButton:function(){return $$("previewBackIcon")},forwardButton:function(){return $$("previewForwardIcon")},$o:function(e){this.useLiveMode=e},uo:function(e){this.iframe().setSrc(ENV.resource(this.fileSelect().getValue()),e),window.focus()},Co:function(){const e=this.fileSelect().getFilePaths(),t=(this.session.Se()||{}).defaultLaunchFilePath,n=-1!==e.indexOf(t)?t:this.fileSelect().getValue();return ENV.resource(n)||"about:blank"},Eo:async function(){const e=this.session.Ae(),t=await GFS.readdirDeep(e);this.fileSelect().setFilesData(t.filter(e=>PathUtils.hasExt(e,".html")))}}),m.module("preview").require("fileSelect").__new__((function(e){e.view=UI.new({id:e.__name__,view:"drawer",touchOnly:!0,$blockDrawerPan:!0,hidden:!0,flexSize:"",template:{style:{width:"100%",height:"100%"},cls:"offcanvas-bar",template:{flexLayout:"column",fill:"screen",cells:[{id:"previewActionBar",cls:["uk-form","x-menu-title-bar","shadow","x-menu-icons"],flexAlign:"middle",flexSize:"none",cells:[{id:"previewBackIcon",view:"menuIcon",margin:"left",iconClass:"ti-arrow-left",disabled:!0,on:{onClick:function(){e.iframe().back()}}},{id:"previewForwardIcon",view:"menuIcon",iconClass:"ti-arrow-right",disabled:!0,on:{onClick:function(){e.iframe().forward()}}},{id:"previewRefreshIcon",view:"menuIcon",icon:"refresh",on:{onClick:function(){e.iframe().refresh()}}},{id:"previewFileSelect",view:"fileSelect",on:{onChange:function(){e.uo()}}}]},{id:"iframe",flexSize:"flex",htmlTag:"IFRAME",style:{background:"white"},refresh:function(){e.uo(!0)},forward:function(){e.historyTracker.redo(!0),this.ao(),this.setSrc(e.historyTracker.current,!0)},back:function(){e.historyTracker.undo(!0),this.ao(),this.setSrc(e.historyTracker.current,!0)},ao:function(){e.historyTracker.canUndo()?e.backButton().enable():e.backButton().disable(),e.historyTracker.canRedo()?e.forwardButton().enable():e.forwardButton().disable()},getSrc:function(){return e.historyTracker.current},setSrc:function(t,n){if(!t)return;n||(e.historyTracker.push(t),this.ao());const i=this.element;i.contentWindow&&null!=i.contentWindow.location?i.contentWindow.location=t:i.setAttribute("src",t)}}]}},style:{width:"33%"}})})),m.module("menu").require("session","search","projects").__init__((function(e,{session:t,search:n,projects:i}){const o=new ObservableClass;Object.assign(e,{observable:o}),t.observable.subscribe(({action:t,project:n})=>{switch(t){case"open":e.switcher().switchToTab("files",!0);break;case"setProject":n||(UI.support.touch?e.switcher().switchToTab("projects"):o.run({action:"hideMenu"}))}}),n.observable.subscribe(t=>{switch(t.action){case"blockDrawer":e.u().$blockDrawerPan=t.block}}),i.observable.subscribe(t=>{switch(t.action){case"blockDrawer":e.u().$blockDrawerPan=t.block}})})).def({u:function(){return $$("menuContainer")},Ei:function(){return $$("menuTab")},v:function(){return $$("menuVerticalTab")},switcher:function(){return $$("menuSwitcher")}}),m.module("menu").require("projects","files","search","settings","menuIcon","keyButton").__init__((function(e,{projects:t,files:n,search:i,settings:o,keyButton:a}){e.verticalTabView=UI.new({id:"menuVerticalTab",view:"list",cls:"x-vertical-menu-tab",listStyle:["tab","tab-left"],flexSize:"none",device:"notouch",data:[{id:"menuVerticalProjectsTab",view:"menuIcon",iconClass:"ti-archive",value:"projects"},{view:"menuIcon",iconClass:"ti-files",value:"files"},{view:"menuIcon",icon:"search",value:"search"},{view:"menuIcon",icon:"cog",value:"settings"}],on:{onItemClick:function(t){this.isSelected(t)?(this.deselectAll(),e.observable.run({action:"hideMenu"})):e.switcher().switchToTab(t.value,!0)}}});const s={id:"menuSwitcher",cls:["uk-offcanvas-bar","uk-overflow-hidden"],style:{width:"300px"},template:{flexLayout:"column",flexSize:"",fill:"height",cells:[{id:"menuTab",view:"list",cls:"x-horizontal-menu-tab",listStyle:"tab",itemTagClass:"x-chrome-tab",device:"touch",style:{zIndex:20},data:[{view:"link"},{id:"menuProjectsTab",view:"menuIcon",iconClass:"ti-archive",value:"projects"},{id:"menuFilesTab",view:"menuIcon",iconClass:"ti-files",value:"files"},{id:"menuSearchTab",view:"menuIcon",icon:"search",value:"search"},{id:"menuSettingsTab",view:"menuIcon",icon:"cog",value:"settings"},{view:"link"}],setClassToItem:function(e,t){this.each((function(e){const n=this.getItemNode(e.id);n&&UI.removeClass(n,t)}),this);const n=this.getItemNode(e.id);n&&UI.addClass(n,t)},on:{onItemClick:function(t){e.switcher().switchToTab(t.value)}}},{id:"menuSwitcherContainer",view:"list",cls:"x-min-height-0",flex:!0,flexSize:"flex",itemTagClass:"uk-flex uk-width-1-1",data:[t.view,n.view,i.view,o.view]}]},switchToTab:function(t,n){const i=e.Ei(),o=e.v(),a=i.data.find(e=>e.value===t),s=a&&a.value;if(s&&(i.setClassToItem(i.next(a),"next"),i.setClassToItem(i.previous(a),"previous"),i.setActive("value",s),o.setActive("value",s),$$("menuSwitcherContainer").showBatch(s),n))return e.observable.run({action:"showMenu"})}};e.menuView=UI.new({id:"menuContainer",view:"drawer",touchOnly:!0,edge:!0,flexSize:"",openable:function(){return!a.activeKey},template:s})})),m.module("diff-editor").__new__((function(e){const t=ace.require,n=t("ace/lib/dom"),i=t("ace/lib/oop"),o=t("ace/lib/lang"),a=t("ace/lib/event_emitter").EventEmitter,s=t("ace/layer/lines").Lines;e.Range=t("ace/range").Range;const r=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_gutter-layer ace_diff-gutter",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new s(this.element),this.$lines.$offsetCoefficient=1};function c(e){const t=n.createElement("span");n.addCssClass(t,"ace_line-number"),e.appendChild(t);const i=n.createElement("span");return n.addCssClass(i,"ace_line-number"),e.appendChild(i),e}(function(){i.implement(this,a),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){$LOG.warn&&$LOG.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){$LOG.warn&&$LOG.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(let t=0;t<e.length;t++){const n=e[t];let i=n.row,a=this.$annotations[i];a||(a=this.$annotations[i]={text:[]});const s=n.text?o.escapeHTML(n.text):n.html||"";-1===a.text.indexOf(s)&&a.text.push(s);const r=n.type;"error"==r?a.className=" ace_error":"warning"==r&&" ace_error"!=a.className?a.className=" ace_warning":"info"!=r||a.className||(a.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;const t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{const e=new Array(n+1);e.unshift(t,1),this.$annotations.splice.apply(this.$annotations,e)}},this.update=function(e){this.config=e;const t=this.session;if(!t)return;const n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=i,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();let o=t.getNextFoldLine(n),a=o?o.start.row:1/0,s=null,r=-1,l=n;for(;;){if(l>a&&(l=o.end.row+1,o=t.getNextFoldLine(l,o),a=o?o.start.row:1/0),l>i){for(;this.$lines.getLength()>r+1;)this.$lines.pop();break}s=this.$lines.get(++r),s||(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,o,l),l++}this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){const t=this.session,n=t.gutterRenderer||this.$renderer,i=t.$firstLineNumber;let o=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(o=t.getLength()+i);let a=n?n.getWidth(t,o,e):o.toString().length*e.characterWidth;const s=this.$padding||this.$computePadding();a+=s.left+s.right,a===this.gutterWidth||isNaN(a)||(this.gutterWidth=a,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",a))},this.$updateCursorRow=function(){if(!this.$highlightGutterLine)return;const e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)},this.updateLineHighlight=function(){if(!this.$highlightGutterLine)return;const e=this.session.selection.cursor.row;if(this.$cursorRow=e,this.$cursorCell&&this.$cursorCell.row==e)return;this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));const t=this.$lines.cells;this.$cursorCell=null;for(let e=0;e<t.length;e++){let n=t[e];if(n.row>=this.$cursorRow){if(n.row>this.$cursorRow){const i=this.session.getFoldLine(this.$cursorRow);if(!(e>0&&i&&i.start.row==t[e-1].row))break;n=t[e-1]}n.element.className="ace_gutter-active-line "+n.element.className,this.$cursorCell=n;break}}},this.scrollLines=function(e){const t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);const n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);let o;if(t.firstRow<e.firstRow)for(o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);o>0;o--)this.$lines.shift();if(i>n)for(o=this.session.getFoldedRowCount(n+1,i);o>0;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(e,i+1,n)),this.updateLineHighlight(),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){const i=[];let o=this.session.getNextFoldLine(s),a=o?o.start.row:1/0,s=t;for(;s>a&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),a=o?o.start.row:1/0),!(s>n);){const t=this.$lines.createCell(s,e,this.session,c);this.$renderCell(t,e,o,s),i.push(t),s++}return i},this.$renderCell=function(e,t,i,o){const a=e.element,s=this.session,r=a.childNodes[0],c=a.childNodes[1],l=a.childNodes[2],u=s.$firstLineNumber,h=s.$breakpoints,d=s.$decorations,p=s.gutterRenderer||this.$renderer,m=this.$showFoldWidgets&&s.foldWidgets,f=i?i.start.row:Number.MAX_VALUE;let g,v="ace_gutter-cell ";if(this.$highlightGutterLine&&(o==this.$cursorRow||i&&o<this.$cursorRow&&o>=f&&this.$cursorRow<=i.end.row)&&(v+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),h[o]&&(v+=h[o]),d[o]&&(v+=d[o]),this.$annotations[o]&&(v+=this.$annotations[o].className),a.className!=v&&(a.className=v),m&&(g=m[o],null==g&&(g=m[o]=s.getFoldWidget(o))),g){v="ace_fold-widget ace_"+g,"start"==g&&o==f&&o<i.end.row?v+=" ace_closed":v+=" ace_open",l.className!=v&&(l.className=v);const e=t.lineHeight+"px";n.setStyle(l.style,"height",e),n.setStyle(l.style,"display","inline-block")}else l&&n.setStyle(l.style,"display","none");const w=(p?p.getText(s,o,"left"):"").toString(),b=(p?p.getText(s,o,"right"):o+u).toString();return w!==r.data&&(r.textContent=w),b!==c.data&&(c.textContent=b),n.setStyle(e.element.style,"height",this.$lines.computeLineHeight(o,t,s)+"px"),n.setStyle(e.element.style,"top",this.$lines.computeLineTop(o,t,s)+"px"),e.row=o,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?n.addCssClass(this.element,"ace_folding-enabled"):n.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};const e=n.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){const t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(r.prototype),e.DiffGutterLayer=r})),m.module("diff-editor").require("editor","string").__init__((function(e,{string:t}){UI.def({__name__:"diff-editor",__init__:function(){const t=this.$ace,n=t.renderer;t.container.removeChild(n.$gutter),n.$gutter=UI.createElement("DIV"),n.$gutter.className="ace_gutter",t.container.appendChild(n.$gutter),n.$gutter.setAttribute("aria-hidden",!0);const i=n.$gutterLayer=new e.DiffGutterLayer(n.$gutter);i.on("changeGutterWidth",n.onGutterResize.bind(n)),i.setShowFoldWidgets(!1),i.$renderer={getWidth:function(){return 92},getText:function(e,t,n){const i=e.getFoldAt(t,0);return i&&i.isPatchHeader?"":e.rowNumbers[n][t]||""}}},init:function(e){const t=this.config.scrollMargin;e.$blockScrolling=1/0,e.renderer.setScrollMargin(t,8),e.setOptions({scrollPastEnd:.5,enableLiveAutocompletion:!1,enableBasicAutocompletion:!1,enableSnippets:!1,showPrintMargin:!1,fadeFoldWidgets:!1}),this.initKeybindings(this)},addGutterDecorationForRows:function(e,t,n,i){for(let o=t;o<=n;o++)e.addGutterDecoration(o,i)},Ro:function(n,i){const o=this,a=e.Range,s=i[0],r=s&&!(s.added||s.removed)&&s.nextChanged&&t.rt(s.value)>3,c=r?"":"@@@\n",l=c.length,u=[],h=[],d=o.cachedModeSessionWithPath(n),p=d.getDocument();d.rowNumbers={left:u,right:h},e.To(d),Object.keys(d.$backMarkers).forEach(e=>d.removeMarker(e)),d.$decorations.forEach((function(e,t,n){n[t]=""})),d.setValue(i.reduce((function(e,t){return e+t.value}),c));let m={firstFold:!0,range:new a(0,0,0,1/0),oldLine:0,newLine:0};const f=r?[]:[m];let g=l;i.forEach((function(n,i,s){const r=p.indexToPosition(g+1);g+=n.value.length;const c=p.indexToPosition(g+n.value.length),l=t.rt(n.value);n.added?(d.addMarker(a.fromPoints(r,c),"ace_added-line","fullLine"),o.addGutterDecorationForRows(d,r.row,c.row,"ace_added-line"),e.Fo(h,l)):n.removed&&(d.addMarker(a.fromPoints(r,c),"ace_removed-line","fullLine"),o.addGutterDecorationForRows(d,r.row,c.row,"ace_removed-line"),e.Fo(u,l));const v={row:r.row,column:0},w={row:c.row+(s.length==i+1?1:0),column:1/0};if(n.nextChanged&&(w.row=Math.max(v.row,w.row-3)),n.previousChanged&&(v.row=Math.min(w.row,v.row+3)),!n.added&&!n.removed){const t=w.row-v.row,n=v.row-r.row;if(e.Fo(u,n),e.Fo(h,n),t>0){m.header=UI.interpolate(" @@ -{{oldLine}},{{changesOld}} +{{newLine}},{{changesNew}} @@ ",{changesOld:(u.slice(-1)[0]||1)-m.oldLine,changesNew:(h.slice(-1)[0]||1)-m.newLine,oldLine:m.oldLine+1,newLine:m.newLine+1}),e.Fo(u,t),e.Fo(h,t);const n=a.fromPoints(v,w);m={oldLine:(u.slice(-1)[0]||0)+1,newLine:(h.slice(-1)[0]||0)+1,range:n},f.push(m)}const i=l-n-t;e.Fo(u,i),e.Fo(h,i)}})),!m.header&&m.firstFold&&(m.header=UI.interpolate(" @@ -{{oldLine}},{{changesOld}} +{{newLine}},{{changesNew}} @@ ",{changesOld:(u.slice(-1)[0]||1)-m.oldLine,changesNew:(h.slice(-1)[0]||1)-m.newLine,oldLine:m.oldLine+1,newLine:m.newLine+1})),f.forEach((function(e){const t=d.addFold(e.header||" ... ",e.range),n=e.range;t.firstFold=!!e.firstFold,t.isPatchHeader=!0,d.addMarker(n,"ace_expanded-line","fullLine"),o.addGutterDecorationForRows(d,n.start.row,n.end.row,"ace_expanded-line")})),o.setSession(d)}},UI.definitions.editor)})).def({Fo:function(e,t){const n=(e.slice(-1)[0]||0)+1;for(let i=0;i<t;i++)e.push(n+i)},To:function(e){e.$patchedExpandFold||(e.$patchedExpandFold=e.expandFold,e.expandFold=function(e){e.firstFold||this.$patchedExpandFold(e)})}}),m.module("diff").require("model","session","path","messages","diff-editor","fileBreadcrumb","gitClient","string").__init__((function(e,{model:t,session:n,path:i,encode:o,messages:a,gitClient:s,string:r}){e.Diff=window.Diff,Object.assign(e,{model:t,path:i,session:n,encode:o,messages:a,gitClient:s,string:r})})).def({co:function(){return $$("diffFileBreadcrumb")},s:function(){return $$("diffEditor")},lines:function(){return $$("diffLinesCount")},zo:function(e,t){const n=this.Diff.diffLines(e||"",t||"",{newlineIsToken:!0});let i=!1;return n.filter((function(e,t,n){if(e.added||e.removed)i=!0;else{const o=n[t+1];o&&(o.added||o.removed)&&(e.nextChanged=!0),i&&(i=!1,e.previousChanged=!0)}return e.count>0}))},jo:function(e,t){return this.Diff.diffChars(e||"",t||"")},Po:function(e){const t=this,n=t.session.Ae();return Promise.all([GFS.readFile(e,{encoding:"utf8"}).catch(()=>""),t.gitClient.Vt(n,PathUtils.relativeTo(e,n))]).then(([n,i])=>{t.Ro(e,t.zo(i,n))})},Ro:function(e,t){e=PathUtils.relativeTo(e,this.session.Ae()),this.co().setFullPath(e),this.s().Ro(e,t),this.lines().setLines(t.reduce((function(e,t){const n=t.value.split("\n").length-1;return t.added?n+e:e}),0),t.reduce((function(e,t){const n=t.value.split("\n").length-1;return t.removed?n+e:e}),0)),this.modal.open(),GA_SendEvent("diff_file","diff")}}),m.module("diff").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",closeButton:!1,dialogStyle:["full","large","blank"],dialogClass:["uk-overflow-hidden","uk-position-relative"],header:{cls:["x-bar","float"],fill:"width",flexSize:"",flexAlign:"middle",cells:[{id:"diffBackButton",view:"menuIcon",icon:"chevron-left",on:{onClick:function(){e.modal.close()}}},{id:"diffFileBreadcrumb",view:"fileBreadcrumb",data:[]},{id:"diffLinesCount",template:'<span class="x-diff-added-lines uk-margin-left">+{{addedLines}}</span><span class="x-diff-removed-lines">-{{removedLines}}</span>',addedLines:0,removedLines:0,setLines:function(e,t){this.set("addedLines",e),this.set("removedLines",t),this.render()}}]},body:{flex:!0,fill:"height",template:{id:"diffEditor",view:"diff-editor",readonly:!0,scrollMargin:56,editorOptions:{useWorker:!1}}}},document.getElementById("appContainer"))})),m.module("viewer").__init__((function(e){e.md=window.markdownit({html:!0});const t=e.No.bind(e),n=e.Oo.bind(e),i=e.Uo.bind(e),o=e.Bo.bind(e),a=e.Lo.bind(e);e.SupportedExtensions={".svg":t,".jpe":t,".jpg":t,".jpeg":t,".png":t,".gif":t,".bmp":t,".md":i,".woff":n,".woff2":n,".eot":n,".otf":n,".ttf":n,".mp4":a,".webm":a,".ogg":a,".mp3":o,".wav":o},e.styleContainer=document.createElement("style"),document.head.appendChild(e.styleContainer)})).def({Xn:function(e){return e in this.SupportedExtensions},bo:async function(e){const t=await this.SupportedExtensions[PathUtils.ext(e)];return t?t(e):this.Go()},Uo:async function(e){const t=await GFS.readFile(e,{encoding:"utf8"});$$("viewerMarkdown").element.innerHTML=this.md.render(t),this.view.showBatch("markdown")},No:function(e){this.view.showBatch("image"),$$("viewerImage").set("src",ENV.resource(e))},Lo:function(e){this.view.showBatch("video"),$$("viewerVideo").config.src=ENV.resource(e),$$("viewerVideo").render()},Bo:function(e){this.view.showBatch("audio"),$$("viewerAudio").config.src=ENV.resource(e),$$("viewerAudio").render()},Oo:function(e){this.styleContainer.firstChild&&this.styleContainer.removeChild(this.styleContainer.firstChild),this.styleContainer.appendChild(document.createTextNode(`@font-face {font-family: 'CustomV Font' src: url('${ENV.resource(e)}')}`)),this.view.showBatch("font"),$$("viewerFont").element.style.fontFamily="CustomV Font"},Go:function(){this.view.showBatch("invalid")}}),m.module("viewer").__init__((function(e){const t={".3g2":"video/3gpp2",".3gp":"video/3gpp",".avi":"video/x-msvideo",".flv":"video/x-flv",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".jpgm":"video/jpm",".jpgv":"video/jpeg",".jpm":"video/jpm",".m1v":"video/mpeg",".m2v":"video/mpeg",".m4u":"video/vnd.mpegurl",".m4v":"video/mp4",".mj2":"video/mj2",".mjp2":"video/mj2",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".mp4":"video/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".ogv":"video/ogg",".qt":"video/quicktime",".smv":"video/x-smv",".webm":"video/webm",".wm":"video/x-ms-wm",".wmv":"video/x-ms-wmv",".wmx":"video/x-ms-wmx",".aac":"audio/x-aac",".adp":"audio/adpcm",".au":"audio/basic",".flac":"audio/x-flac",".kar":"audio/midi",".m2a":"audio/mpeg",".m3a":"audio/mpeg",".m3u":"audio/x-mpegurl",".m3u8":"application/vnd.apple.mpegurl",".m4a":"audio/mp4",".mid":"audio/midi",".midi":"audio/midi",".mka":"audio/x-matroska",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4a":"audio/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".rmi":"audio/midi",".s3m":"audio/s3m",".snd":"audio/basic",".spx":"audio/ogg",".wav":"audio/x-wav",".weba":"audio/webm",".wma":"audio/x-ms-wma",".xm":"audio/xm",".bmp":"image/bmp",".gif":"image/gif",".ico":"image/x-icon",".jpeg":"image/jpeg",".jpg":"image/jpeg",".jpe":"image/jpeg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".svg":"image/svg+xml",".svgz":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".webp":"image/webp",".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".js":"text/javascript",".sass":"text/x-sass",".scss":"text/x-scss",".styl":"text/x-styl",".txt":"text/plain",".yaml":"text/yaml",".yml":"text/yaml",".md":"text/markdown",".eot":"application/vnd.ms-fontobject",".epub":"application/epub+zip",".gz":"application/x-gzip",".hdf":"application/x-hdf",".json":"application/json",".jsonml":"application/jsonml+json",".latex":"application/x-latex",".mp4s":"application/mp4",".ogx":"application/ogg",".otf":"application/x-font-otf",".pdf":"application/pdf",".ps":"application/postscript",".psf":"application/x-font-linux-psf",".rar":"application/x-rar-compressed",".snf":"application/x-font-snf",".swa":"application/x-director",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tex":"application/x-tex",".tgz":"application/x-gzip",".ttc":"application/x-font-ttf",".ttf":"application/x-font-ttf",".unityweb":"application/vnd.unity",".woff":"application/x-font-woff",".woff2":"application/x-font-woff",".xml":"application/xml",".xsl":"application/xml",".zip":"application/zip"};e.view=UI.new({id:e.__name__,batch:e.__name__,view:"scroller",singleView:!0,style:{paddingTop:"48px"},cells:[{batch:"image",style:{textAlign:"center",lineHeight:"calc(100vh - 48px)"},template:{id:"viewerImage",view:"image",valign:"middle"}},{id:"viewerFont",batch:"font",style:{textAlign:"center",lineHeight:"calc(100vh - 48px)"},template:{valign:"middle",style:{fontSize:"32px",lineHeight:"36px"},template:"<p>A B C D E F</p><p>G H I J K L M</p><p>N O P Q R S</p><p>T U V W X Y Z</p><p>a b c d e f</p><p>g h i j k l m</p><p>n o p q r s</p><p>t u v w x y z</p><p>1 2 3 4 5</p><p>6 7 8 9 0</p>"}},{batch:"markdown",id:"viewerMarkdown",cls:"x-markdown",padding:"x",style:{paddingBottom:"24px"}},{id:"viewerAudio",batch:"audio",style:{textAlign:"center",lineHeight:"calc(100vh - 48px)"},template:function(e){const n=e.src;if(n){return`<audio class='x-no-outline' controls>\n                <source src='${n}' type='${t[PathUtils.ext(n)]}'>\n                Your browser does not support the audio tag.\n              </audio>`}return"<audio class='x-no-outline' controls>Your browser does not support the audio tag.</audio>"}},{id:"viewerVideo",batch:"video",style:{textAlign:"center",lineHeight:"calc(100vh - 48px)"},template:function(e){const n=e.src;if(n){return`<video class='x-no-outline' width='320' height='240' controls>\n                <source src='${n}' type='${t[PathUtils.ext(n)]}'>\n                Your browser does not support the video tag.\n              </video>`}return"<video class='x-no-outline' width='320' height='240' controls>Your browser does not support the video tag.</audio>"}},{batch:"invalid",flex:!0,flexSize:"flex",flexAlign:"middle center",template:"File type not supported.",htmlTag:"H4"}]})})),m.module("project").__new__((function(e){e.ranks={html:0,css:10,vue:20,angularjs:30,angular:40,d3:60,backbone:70,react:50,jquery:55,bootstrap:20,semantic_ui:25,mdl:30,bulma:35,uikit:40},e.viewBox={javascript:"0 0 128 128",html:"0 0 128 128",css:"0 0 128 128",vue:"0 0 128 128",angularjs:"0 0 128 128",angular:"0 0 250 250",backbone:"0 0 128 128",d3:"0 0 128 128",react:"0 0 128 128",jquery:"0 0 128 128",bootstrap:"0 0 128 128",mdl:"0 0 24 24",bulma:"0 0 480 480",uikit:"0 0 200 200",semantic_ui:"0 0 256 256"},e.svg={javascript:'<path fill="#F0DB4F" d="M1.408 1.408h125.184v125.185h-125.184z"></path><path fill="#323330" d="M116.347 96.736c-.917-5.711-4.641-10.508-15.672-14.981-3.832-1.761-8.104-3.022-9.377-5.926-.452-1.69-.512-2.642-.226-3.665.821-3.32 4.784-4.355 7.925-3.403 2.023.678 3.938 2.237 5.093 4.724 5.402-3.498 5.391-3.475 9.163-5.879-1.381-2.141-2.118-3.129-3.022-4.045-3.249-3.629-7.676-5.498-14.756-5.355l-3.688.477c-3.534.893-6.902 2.748-8.877 5.235-5.926 6.724-4.236 18.492 2.975 23.335 7.104 5.332 17.54 6.545 18.873 11.531 1.297 6.104-4.486 8.08-10.234 7.378-4.236-.881-6.592-3.034-9.139-6.949-4.688 2.713-4.688 2.713-9.508 5.485 1.143 2.499 2.344 3.63 4.26 5.795 9.068 9.198 31.76 8.746 35.83-5.176.165-.478 1.261-3.666.38-8.581zm-46.885-37.793h-11.709l-.048 30.272c0 6.438.333 12.34-.714 14.149-1.713 3.558-6.152 3.117-8.175 2.427-2.059-1.012-3.106-2.451-4.319-4.485-.333-.584-.583-1.036-.667-1.071l-9.52 5.83c1.583 3.249 3.915 6.069 6.902 7.901 4.462 2.678 10.459 3.499 16.731 2.059 4.082-1.189 7.604-3.652 9.448-7.401 2.666-4.915 2.094-10.864 2.07-17.444.06-10.735.001-21.468.001-32.237z"></path>',html:'<path fill="#E44D26" d="M19.037 113.876l-10.005-112.215h109.936l-10.016 112.198-45.019 12.48z"></path><path fill="#F16529" d="M64 116.8l36.378-10.086 8.559-95.878h-44.937z"></path><path fill="#EBEBEB" d="M64 52.455h-18.212l-1.258-14.094h19.47v-13.762h-34.511l.33 3.692 3.382 37.927h30.799zM64 88.198l-.061.017-15.327-4.14-.979-10.975h-13.817l1.928 21.609 28.193 7.826.063-.017z"></path><path fill="#fff" d="M63.952 52.455v13.763h16.947l-1.597 17.849-15.35 4.143v14.319l28.215-7.82.207-2.325 3.234-36.233.335-3.696h-3.708zM63.952 24.599v13.762h33.244l.276-3.092.628-6.978.329-3.692z"></path>',css:'<path fill="#1572B6" d="M18.814 114.123l-10.054-112.771h110.48l-10.064 112.754-45.243 12.543-45.119-12.526z"></path><path fill="#33A9DC" d="M64.001 117.062l36.559-10.136 8.601-96.354h-45.16v106.49z"></path><path fill="#fff" d="M64.001 51.429h18.302l1.264-14.163h-19.566v-13.831h34.681999999999995l-.332 3.711-3.4 38.114h-30.95v-13.831z"></path><path fill="#EBEBEB" d="M64.083 87.349l-.061.018-15.403-4.159-.985-11.031h-13.882l1.937 21.717 28.331 7.863.063-.018v-14.39z"></path><path fill="#fff" d="M81.127 64.675l-1.666 18.522-15.426 4.164v14.39l28.354-7.858.208-2.337 2.406-26.881h-13.876z"></path><path fill="#EBEBEB" d="M64.048 23.435v13.831000000000001h-33.407999999999994l-.277-3.108-.63-7.012-.331-3.711h34.646zM64.001 51.431v13.831000000000001h-15.209l-.277-3.108-.631-7.012-.33-3.711h16.447z"></path>',angularjs:'<path fill="#B3B3B3" d="M63.81 1.026l-59.257 20.854 9.363 77.637 49.957 27.457 50.214-27.828 9.36-77.635z"></path><path fill="#A6120D" d="M117.536 25.998l-53.864-18.369v112.785l45.141-24.983z"></path><path fill="#DD1B16" d="M11.201 26.329l8.026 69.434 44.444 24.651v-112.787z"></path><path fill="#F2F2F2" d="M78.499 67.67l-14.827 6.934h-15.628l-7.347 18.374-13.663.254 36.638-81.508 14.827 55.946zm-1.434-3.491l-13.295-26.321-10.906 25.868h10.807l13.394.453z"></path><path fill="#B3B3B3" d="M63.671 11.724l.098 26.134 12.375 25.888h-12.446l-.027 10.841 17.209.017 8.042 18.63 13.074.242z"></path>',angular:'<g><polygon fill="#DD0031" points="125,30 125,30 125,30 31.9,63.2 46.1,186.3 125,230 125,230 125,230 203.9,186.3 218.1,63.2"/><polygon fill="#C3002F" points="125,30 125,52.2 125,52.1 125,153.4 125,153.4 125,230 125,230 203.9,186.3 218.1,63.2 125,30"/><path fill="#FFFFFF" d="M125,52.1L66.8,182.6h0h21.7h0l11.7-29.2h49.4l11.7,29.2h0h21.7h0L125,52.1L125,52.1L125,52.1L125,52.1   L125,52.1z M142,135.4H108l17-40.9L142,135.4z"/></g>',d3:'<path fill="#f69b44" d="M118.16 63.966c5.223-6.256 8.368-14.217 8.368-22.98C126.528 21.097 110.352 5 90.464 5H47.986c10.375 7 18.966 16 24.82 26h17.658c5.55 0 10.064 4.45 10.064 10s-4.515 10-10.064 10H80.047c.82 5 1.26 8.62 1.26 13.098 0 4.41-.433 8.902-1.224 12.902h10.382c5.55 0 10.064 4.95 10.064 10.5S96.013 98 90.464 98H72.92c-1.315 2-2.79 4.74-4.38 6.98C63.137 112.59 56.253 119 48.29 124H90.463c19.335 0 35.16-15.746 36.024-34.876-.017.31-.043.39-.066.698.062-.848.107-1.813.107-2.678-.002-8.766-3.148-16.92-8.37-23.178z"/><path fill="#f69b44" d="M61.03 97.543l.003-.18c.07-.1.138-.292.207-.39.077-.118.152-.275.228-.392.002-.002 0-.03.003-.034 6.14-9.33 9.727-20.41 9.727-32.39C71.197 31.5 44.624 5 11.962 5H1v26h10.962c18.32 0 33.23 14.823 33.23 33.144 0 4.984-1.113 9.675-3.088 13.924-.006.013-.013.36-.02.374C36.79 89.782 25.283 98 11.963 98H1v26h10.962c20.396 0 38.41-10.722 49.068-26.457z"/>',react:'<path fill="#53c1de" d="M107.3 45.2c-2.2-.8-4.5-1.6-6.9-2.3.6-2.4 1.1-4.8 1.5-7.1 2.1-13.2-.2-22.5-6.6-26.1-1.9-1.1-4-1.6-6.4-1.6-7 0-15.9 5.2-24.9 13.9-9-8.7-17.9-13.9-24.9-13.9-2.4 0-4.5.5-6.4 1.6-6.4 3.7-8.7 13-6.6 26.1.4 2.3.9 4.7 1.5 7.1-2.4.7-4.7 1.4-6.9 2.3-12.5 4.8-19.3 11.4-19.3 18.8s6.9 14 19.3 18.8c2.2.8 4.5 1.6 6.9 2.3-.6 2.4-1.1 4.8-1.5 7.1-2.1 13.2.2 22.5 6.6 26.1 1.9 1.1 4 1.6 6.4 1.6 7.1 0 16-5.2 24.9-13.9 9 8.7 17.9 13.9 24.9 13.9 2.4 0 4.5-.5 6.4-1.6 6.4-3.7 8.7-13 6.6-26.1-.4-2.3-.9-4.7-1.5-7.1 2.4-.7 4.7-1.4 6.9-2.3 12.5-4.8 19.3-11.4 19.3-18.8s-6.8-14-19.3-18.8zm-14.8-30.5c4.1 2.4 5.5 9.8 3.8 20.3-.3 2.1-.8 4.3-1.4 6.6-5.2-1.2-10.7-2-16.5-2.5-3.4-4.8-6.9-9.1-10.4-13 7.4-7.3 14.9-12.3 21-12.3 1.3 0 2.5.3 3.5.9zm-11.2 59.3c-1.8 3.2-3.9 6.4-6.1 9.6-3.7.3-7.4.4-11.2.4-3.9 0-7.6-.1-11.2-.4-2.2-3.2-4.2-6.4-6-9.6-1.9-3.3-3.7-6.7-5.3-10 1.6-3.3 3.4-6.7 5.3-10 1.8-3.2 3.9-6.4 6.1-9.6 3.7-.3 7.4-.4 11.2-.4 3.9 0 7.6.1 11.2.4 2.2 3.2 4.2 6.4 6 9.6 1.9 3.3 3.7 6.7 5.3 10-1.7 3.3-3.4 6.6-5.3 10zm8.3-3.3c1.5 3.5 2.7 6.9 3.8 10.3-3.4.8-7 1.4-10.8 1.9 1.2-1.9 2.5-3.9 3.6-6 1.2-2.1 2.3-4.2 3.4-6.2zm-25.6 27.1c-2.4-2.6-4.7-5.4-6.9-8.3 2.3.1 4.6.2 6.9.2 2.3 0 4.6-.1 6.9-.2-2.2 2.9-4.5 5.7-6.9 8.3zm-18.6-15c-3.8-.5-7.4-1.1-10.8-1.9 1.1-3.3 2.3-6.8 3.8-10.3 1.1 2 2.2 4.1 3.4 6.1 1.2 2.2 2.4 4.1 3.6 6.1zm-7-25.5c-1.5-3.5-2.7-6.9-3.8-10.3 3.4-.8 7-1.4 10.8-1.9-1.2 1.9-2.5 3.9-3.6 6-1.2 2.1-2.3 4.2-3.4 6.2zm25.6-27.1c2.4 2.6 4.7 5.4 6.9 8.3-2.3-.1-4.6-.2-6.9-.2-2.3 0-4.6.1-6.9.2 2.2-2.9 4.5-5.7 6.9-8.3zm22.2 21l-3.6-6c3.8.5 7.4 1.1 10.8 1.9-1.1 3.3-2.3 6.8-3.8 10.3-1.1-2.1-2.2-4.2-3.4-6.2zm-54.5-16.2c-1.7-10.5-.3-17.9 3.8-20.3 1-.6 2.2-.9 3.5-.9 6 0 13.5 4.9 21 12.3-3.5 3.8-7 8.2-10.4 13-5.8.5-11.3 1.4-16.5 2.5-.6-2.3-1-4.5-1.4-6.6zm-24.7 29c0-4.7 5.7-9.7 15.7-13.4 2-.8 4.2-1.5 6.4-2.1 1.6 5 3.6 10.3 6 15.6-2.4 5.3-4.5 10.5-6 15.5-13.8-4-22.1-10-22.1-15.6zm28.5 49.3c-4.1-2.4-5.5-9.8-3.8-20.3.3-2.1.8-4.3 1.4-6.6 5.2 1.2 10.7 2 16.5 2.5 3.4 4.8 6.9 9.1 10.4 13-7.4 7.3-14.9 12.3-21 12.3-1.3 0-2.5-.3-3.5-.9zm60.8-20.3c1.7 10.5.3 17.9-3.8 20.3-1 .6-2.2.9-3.5.9-6 0-13.5-4.9-21-12.3 3.5-3.8 7-8.2 10.4-13 5.8-.5 11.3-1.4 16.5-2.5.6 2.3 1 4.5 1.4 6.6zm9-15.6c-2 .8-4.2 1.5-6.4 2.1-1.6-5-3.6-10.3-6-15.6 2.4-5.3 4.5-10.5 6-15.5 13.8 4 22.1 10 22.1 15.6 0 4.7-5.8 9.7-15.7 13.4z"></path>',vue:'<path d="m-2.3125e-8 8.9337 49.854 0.1586 14.167 24.47 14.432-24.47 49.547-0.1577-63.834 110.14zm126.98 0.6374-24.36 0.0207-38.476 66.052-38.453-66.052-24.749-0.0194 63.211 107.89zm-25.149-0.008-22.745 0.16758l-15.053 24.647-14.817-24.647-22.794-0.1679 37.731 64.476zM25.997 9.3929l23.002 0.0087M25.997 9.3929l23.002 0.0087" fill="none"></path><path d="m25.997 9.3929 23.002 0.0087l15.036 24.958 14.983-24.956 22.982-0.0057-37.85 65.655z" fill="#35495e"></path><path d="m0.91068 9.5686 25.066-0.1711 38.151 65.658 37.852-65.654 25.11 0.0263-62.966 108.06z" fill="#41b883"></path></svg>',bootstrap:'<path fill="#7d4dc6" d="M75.701 65.603c-2.334-.768-5.694-.603-10.08-.603h-17.621v23h18.844c2.944 0 5.012-.315 6.203-.535 2.099-.376 3.854-1.104 5.264-1.982 1.409-.876 2.568-2.205 3.478-3.881.908-1.676 1.363-3.637 1.363-5.83 0-2.568-.658-4.54-1.975-6.436-1.316-1.896-3.141-2.965-5.476-3.733zM73.282 55.087c2.317-.688 4.064-1.89 5.239-3.487 1.176-1.598 1.763-3.631 1.763-6.044 0-2.286-.549-4.314-1.646-6.054s-2.662-2.413-4.699-3.056c-2.037-.641-5.53-.446-10.48-.446h-15.459v20h16.587c4.042 0 6.939-.38 8.695-.913zM126 18.625c0-9.182-7.443-16.625-16.625-16.625h-91.75c-9.182 0-16.625 7.443-16.625 16.625v91.75c0 9.182 7.443 16.625 16.625 16.625h91.75c9.182 0 16.625-7.443 16.625-16.625v-91.75zm-35.447 66.12c-1.362 2.773-3.047 4.911-5.052 6.415-2.006 1.504-4.521 2.78-7.544 3.548-3.022.769-6.728 1.292-11.113 1.292h-27.844v-69h27.42c5.264 0 9.485.609 12.665 2.002 3.181 1.395 5.671 3.497 7.474 6.395 1.801 2.898 2.702 5.907 2.702 9.071 0 2.945-.8 5.708-2.397 8.308-1.598 2.602-4.011 4.694-7.237 6.292 4.166 1.222 7.37 3.304 9.61 6.248 2.24 2.945 3.36 6.422 3.36 10.432 0 3.227-.681 6.225-2.044 8.997z"></path>',mdl:'<circle cx="12" cy="12" fill="#757575" r="12"/><path d="m3.6 3.6h16.8v16.8h-16.8z" fill="#bdbdbd"/><path d="m20.4 3.6-8.4 16.8-8.4-16.8z" fill="#fff"/><path d="m0 0h24v24h-24z" fill="none"/>',semantic_ui:'<g><path d="M0,0 L256,0 L256,256 L0,256 L0,0 Z" fill="#34BDB2"></path><path d="M168.461,87.041 C154.945,79.199 142.947,73.032 127.251,73.304 C118.271,73.46 110.561,78.341 108.94,87.274 C107.431,95.585 114.819,100.195 122.505,103.025 C135.252,107.719 146.349,112.675 158.874,117.894 C181.643,127.383 193.318,142.75 191.938,162.467 C190.182,187.554 175.084,205.547 151.089,211.479 C119.735,219.231 89.288,207.423 63.563,190.939 C70.056,181.048 77.589,174.296 84.043,164.465 C98.905,170.791 110.581,179.339 126.129,180.672 C137.092,181.612 149.514,181.089 151.977,168.212 C154.197,156.6 144.091,150.375 134.234,146.898 C122.499,142.759 110.786,137.696 99.278,132.996 C78.005,124.307 69.349,107.312 70.806,87.291 C70.806,75.552 80.546,51.825 104.427,44.445 C141.119,33.105 161.335,44.717 187.942,61.816 C180.875,71.162 175.442,77.807 168.461,87.041" fill="#FFFFFF"></path></g>',bulma:'<g stroke="none" stroke-width="1" fill="#00d1b2" fill-rule="evenodd"><polygon id="Path" points="136 296 156 156 236 76 336 176 276 236 356 316 236 396"></polygon></g>',uikit:'<path fill="#58BBE5" d="M136.167,42.291L108.47,59.07l31.695,18.186v47.708l-42.639,23.861l-41.864-23.858V87.989L27.91,73.733    v67.735l68.604,40.44l71.403-40.44V60.56L136.167,42.291z M123.344,35.611l-26.83-15.52L68.532,37.404l27.191,14.958    L123.344,35.611z"/>'}})),m.module("project").require("model","prompt","path","set","templates","messages","session","remote","editor","zipper").__init__((function(e,{model:t,prompt:n,messages:i,templates:o,labs:a,projects:s,files:r,path:c,set:l,session:u,remote:h,editor:d,zipper:p}){Object.assign(e,{model:t,prompt:n,messages:i,templates:o,labs:a,projects:s,files:r,path:c,set:l,session:u,remote:h,editor:d,zipper:p}),e.labLocation="labs/"})).def({switcher:function(){return $$("projectTabList")},nameInput:function(){return $$("projectNameInput")},createButton:function(){return $$("projectCreateButton")},Do:async function(e,t){const n=this,i=await n.Mo(RES_I18N.Actions.Enter(RES_I18N.Objects.NameFor(RES_I18N.Actions.New(RES_I18N.Objects.Project))),e.split(/\.zip/i)[0]);await n.T({name:i,buildCallbackAsync:({dir:e})=>n.zipper.vt(e,t)}).then(GA_SendEvent_Success("import_zip","zip"),GA_SendEvent_Failure("import_zip","zip"))},Mo:function(e,t){const n=this;return new Promise((function(i,o){n.prompt.q(RES_I18N.Actions.New(RES_I18N.Objects.Project),t||"",{showInput:!0,message:e,onResult:function(e){i(e)},onDismiss:function(){o()},onValidate:async function(e){let t;return 0===e.length&&(t=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Project))),t?Promise.reject(t):e}})}))},T:async function({name:e="Unknown",buildCallbackAsync:t=(()=>{}),uniqueName:n=!0,openAfter:i=!0,currentFilePath:o=null}){const a=this;let s=await ENV.filesDirAsync(e);n&&(s=await a.model.Ue(s));const r={dir:s,currentFilePath:o,modifiedAt:Date.now()};try{await GFS.mkdir(s),await t(r)}catch(e){throw $LOG.error(String(e)),a.messages.dt("loadTemplateError"),await Promise.all([GFS.rmdir(s),ENV.trashDirAsync(s).then(e=>GFS.rmdir(e)),ENV.metadataDirAsync(s).then(e=>GFS.rm(e))]),e}return await a.model.Ne(s,r),i&&await a.session.V(s),r},Vi:function(e,t,n,i){const o=this,a=o.templates.frameworks.js[t]||{},s=o.templates.frameworks.css[n]||{},r=i&&i.templates[0]||a.defaultFile;return o.T({name:e,currentFilePath:r,buildCallbackAsync:async function({dir:e}){let r=[];if(i){const e=o.labLocation+i.key;r=await Promise.all(i.templates.map(t=>o.remote.F({url:PathUtils.join(e,t),retryCount:1,responseType:"arraybuffer"}).then(e=>({path:t,contents:e}))))}else{const[e,t]=await Promise.all([o.templates.Ye(a),o.templates.Ye(s)]);t.scripts=o.set.ot(t.scripts,e.scripts),e.links=o.set.ot(e.links,t.links);const n=a.templates||[],i={js:e,css:t,files:n,stylesheets:n.filter(e=>e.stylesheet),heading:(a.name||"")+(s.name?" + "+s.name:""),text:o.templates.Qe(),cls:s.classes||{}};r=await Promise.all(n.map(({src:e,path:t})=>o.templates.Ze(e).then(e=>({path:t,contents:e(i)}))))}for(let t=0;t<r.length;t++){const{path:n,contents:i}=r[t];await GFS.write(PathUtils.join(e,n),i)}GA_SendEvent(i?"lab_"+i.key:"framework_"+(t||"")+"+"+(n||""),"projects")}})}}),m.module("project").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["full","large","blank"],header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexAlign:"middle",cells:[{id:"projectBackButton",view:"menuIcon",icon:"chevron-left",margin:"left",style:{fontSize:"1.25em"},on:{onClick:function(){const t=e.switcher();t.selectedCssFrameworkItem?t.setJsFrameworkItem(t.selectedJsFrameworkItem):t.selectedJsFrameworkItem?t.navigateToStart(!0):e.modal.close()}}},{id:"projectTitleSwitcherContainer",view:"list",cls:"uk-switcher",data:[{view:"label",cls:"x-menu-title",label:"JAVASCRIPT FRAMEWORK"},{view:"label",cls:"x-menu-title",label:"CSS FRAMEWORK"},{view:"label",cls:"x-menu-title",label:i18nTag(RES_I18N.Actions.Create(RES_I18N.Objects.Project))}]},{id:"projectCreateButton",view:"button",label:i18nTag(RES_I18N.Actions.Create(RES_I18N.Objects.Project)),style:{marginLeft:"auto"},on:{onClick:function(){const t=e.switcher();e.Vi(e.nameInput().getValue(),t.selectedJsFrameworkItem.value,t.selectedCssFrameworkItem.value),e.nameInput().reset(),e.modal.close()}}}]},body:{view:"scroller",cells:[{id:"projectTabList",view:"list",flexSize:"none",hidden:!0,listStyle:"breadcrumb",switcherOptions:{connect:"#projectTypeSwitcherContainer, #projectTitleSwitcherContainer",animation:"slide-horizontal",swiping:!1},data:[{},{},{}],on:{onInitialized:function(){UI.delay((function(){this._switcher=UIkit2.switcher(this.element,this.switcherOptions)}),this,null)}},setJsFrameworkItem:function(t){this.selectedJsFrameworkItem=t,this.selectedCssFrameworkItem=null,this._switcher.show(1,!0),e.nameInput().setValue(t.title+" Seed"),e.createButton().hide()},setCssFrameworkItem:function(t){const n=this.selectedJsFrameworkItem;this.selectedCssFrameworkItem=t,this._switcher.show(2,!0),$$("projectConfirmList").setData([{htmlTag:"DIV",view:"card",title:n.title,svg:n.svg,viewBox:n.viewBox,accessoryIcon:""},{htmlTag:"DIV",view:"card",title:t.title,svg:t.svg,viewBox:t.viewBox,accessoryIcon:""}]),e.createButton().show(),setTimeout((function(){e.nameInput().getFormControl().focus()}),250)},navigateToStart:function(t){this.selectedJsFrameworkItem=null,this.selectedCssFrameworkItem=null,this._switcher.show(0,!!t),e.createButton().hide()}},{flexSize:"flex",template:{id:"projectTypeSwitcherContainer",view:"list",cls:"uk-switcher",data:[e.Wo(),e.Vo(),{view:"flexgrid",margin:"x y",flexLayout:"column",cells:[{template:i18nTag(RES_I18N.Objects.NameFor(RES_I18N.Objects.Project)),selectable:!1},{id:"projectNameInput",view:"input",width:"full",size:"large",margin:"top bottom-lg",i18nPlaceholders:RES_I18N.Objects.NameFor(RES_I18N.Objects.Project),on:{onKeyUp:function(t,n,i){"Enter"===i.key&&e.createButton().dispatch("onClick")}}},{template:'<span class="uk-h6">Packages</span>',margin:"bottom",selectable:!1},e.Ho("projectConfirmList",[])]}]}}]},on:{onOpened:function(){e.switcher().navigateToStart()}}},document.getElementById("appContainer"))})).def({Ho:function(e,t,n){return{id:e,view:"list",listStyle:"side line",cls:"uk-padding-remove",data:t,on:n}},Wo:function(){const e=this,t=e.templates.frameworks.js;return e.Ho("projectAppList",[{view:"card",title:"No JS Framework",label:"Work with a clean slate.",svg:e.svg.javascript,viewBox:e.viewBox.javascript,rank:1}].concat(Object.keys(t).map((function(n){const i=t[n];return{view:"card",value:n,title:i.name,label:i.info,svg:e.svg[n],viewBox:e.viewBox[n],rank:e.ranks[n]}}))).sort((function(e,t){return e.rank-t.rank})).concat([{view:"spacer",height:96}]),{onItemClick:function(t){e.switcher().setJsFrameworkItem(t)}})},Vo:function(){const e=this,t=e.templates.frameworks.css;return e.Ho("projectStyleList",[{view:"card",title:"No CSS Framework",label:"Work on a clean canvas.",value:"",svg:e.svg.css,viewBox:e.viewBox.css}].concat(Object.keys(t).sort().map(n=>{const i=t[n];return{view:"card",value:n,title:i.name,label:i.info,svg:e.svg[n],viewBox:e.viewBox[n]}})).concat([{view:"spacer",height:96}]),{onItemClick:function(t){e.switcher().setCssFrameworkItem(t)}})}})
/*!
 * MIT License
 *
 * Copyright (c) 2016 Ike Ku
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */,ace.define("ace/theme/ayu-light",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-ayu-light",t.cssText=".ace-ayu-light .ace_gutter {color: #1069a9;}.ace-ayu-light .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12P4/PkzAAW2AtoE25PsAAAAAElFTkSuQmCC) right repeat-y;}.ace-ayu-light .ace_print-margin {width: 1px;background: #e8e8e8}.ace-ayu-light {color: #35373a}.ace-ayu-light .ace_cursor {color: #FF6A00}.ace-ayu-light .ace_marker-layer .ace_selection {background: #a5dfff}.ace-ayu-light.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px #FAFAFA;border-radius: 2px}.ace-ayu-light .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-ayu-light .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #FF0000}.ace-ayu-light .ace_marker-layer .ace_active-line {border: 2px solid #eee;box-sizing: border-box;}.ace-ayu-light .ace_marker-layer .ace_selected-word {border: 1px solid #74caf9}.ace-ayu-light .ace_keyword.ace_operator {color: #ED9366}.ace-ayu-light .ace_constant.ace_language {color: #A37ACC}.ace-ayu-light .ace_constant.ace_numeric {color: #A37ACC}.ace-ayu-light .ace_constant.ace_character {color: #A37ACC}.ace-ayu-light .ace_constant.ace_character.ace_escape {color: #4CBF99}.ace-ayu-light .ace_constant.ace_other {color: #A37ACC}.ace-ayu-light .ace_support.ace_function {color: #F07171}.ace-ayu-light .ace_support.ace_constant {color: #ED9366}.ace-ayu-light .ace_support.ace_class {color: #55B4D4}.ace-ayu-light .ace_support.ace_type {color: #55B4D4}.ace-ayu-light .ace_tag-name.ace_tag,.ace-ayu-light .ace_storage,.ace-ayu-light .ace_keyword {color: #FA6E32}.ace-ayu-light .ace_storage.ace_type {color: #FA6E32}.ace-ayu-light .ace_invalid {color: #F51818}.ace-ayu-light .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #FA6E32}.ace-ayu-light .ace_string {color: #86B300}.ace-ayu-light .ace_string.ace_regexp {color: #4CBF99}.ace-ayu-light .ace_comment {color: #ABB0B6}.ace-ayu-light .ace_variable {color: #55B4D4}.ace-ayu-light .ace_variable.ace_parameter {color: #A37ACC}.ace-ayu-light .ace_entity.ace_other.ace_attribute-name {color: #F29718}.ace-ayu-light .ace_entity.ace_name.ace_function {color: #F29718}.ace-ayu-light .ace_entity.ace_name.ace_tag {color: #55B4D4}.ace-ayu-light .ace_heading {color: #4845f7;}.ace-ayu-light .ace_list {color: #30a584;}"})),
/*!
 * MIT License
 *
 * Copyright (c) 2016 Ike Ku
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
ace.define("ace/theme/ayu-mirage",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-ayu-mirage",t.cssText=".ace-ayu-mirage .ace_gutter {color: rgb(125,127,129)}.ace-ayu-mirage .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12PQNbMHAAE2AKNSM6cKAAAAAElFTkSuQmCC) right repeat-y;}.ace-ayu-mirage .ace_print-margin {width: 1px;background: #333a48}.ace-ayu-mirage {color: #ddd}.ace-ayu-mirage .ace_cursor {color: #FFCC66}.ace-ayu-mirage .ace_marker-layer .ace_selection {background: #063e63;border-radius: 0;}.ace-ayu-mirage.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px black;}.ace-ayu-mirage .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-ayu-mirage .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #FFCC66}.ace-ayu-mirage .ace_marker-layer .ace_active-line {border: 2px solid #3a424a;box-sizing: border-box;}.ace-ayu-mirage .ace_marker-layer .ace_selected-word {background-color: rgba(125, 81, 64, 0.8);}.ace-ayu-mirage .ace_keyword.ace_operator {color: #F29E74}.ace-ayu-mirage .ace_constant.ace_language {color: #D4BFFF}.ace-ayu-mirage .ace_constant.ace_numeric {color: #D4BFFF}.ace-ayu-mirage .ace_punctuation,.ace-ayu-mirage .ace_punctuation.ace_tag {color: #bbb}.ace-ayu-mirage .ace_constant.ace_character {color: #D4BFFF}.ace-ayu-mirage .ace_constant.ace_character.ace_escape {color: #95E6CB}.ace-ayu-mirage .ace_constant.ace_other {color: #D4BFFF}.ace-ayu-mirage .ace_support.ace_function {color: #F28779}.ace-ayu-mirage .ace_support.ace_class {color: #5CCFE6}.ace-ayu-mirage .ace_support.ace_type {color: #5CCFE6}.ace-ayu-mirage .ace_meta.ace_tag,.ace-ayu-mirage .ace_tag-name.ace_tag,.ace-ayu-mirage .ace_storage,.ace-ayu-mirage .ace_keyword {color: #FFA759}.ace-ayu-mirage .ace_storage.ace_type {color: #FFA759}.ace-ayu-mirage .ace_invalid {color: #FF3333}.ace-ayu-mirage .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #FFA759}.ace-ayu-mirage .ace_string {color: #BAE67E}.ace-ayu-mirage .ace_string.ace_regexp {color: #95E6CB}.ace-ayu-mirage .ace_comment {color: #5C6773}.ace-ayu-mirage .ace_variable {color: #FFD580}.ace-ayu-mirage .ace_variable.ace_parameter {color: #D4BFFF}.ace-ayu-mirage .ace_entity.ace_other.ace_attribute-name {color: #FFD580}.ace-ayu-mirage .ace_entity.ace_name.ace_function {color: #FFD580}.ace-ayu-mirage .ace_entity.ace_name.ace_tag {color: #5CCFE6}.ace-ayu-mirage .ace_heading {color: #8987ff;}.ace-ayu-mirage .ace_list {color: #4ad3ac;}"})),ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-chrome",t.cssText=".ace-chrome .ace_gutter {color: #1069a9;}.ace-chrome .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12P4/PkzAAW2AtoE25PsAAAAAElFTkSuQmCC) right repeat-y;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color: rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {border: 2px solid #eee;box-sizing: border-box;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}"})),ace.define("ace/theme/dracula",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-dracula",t.cssText=".ace-dracula .ace_gutter {color: rgb(144,145,148)}.ace-dracula .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12PQNbMHAAE2AKNSM6cKAAAAAElFTkSuQmCC) right repeat-y;}.ace-dracula .ace_print-margin {width: 1px;background: #e8e8e8}.ace-dracula {color: #ddd}.ace-dracula .ace_cursor {color: #F8F8F0}.ace-dracula .ace_marker-layer .ace_selection {background: #063e63;border-radius: 0;}.ace-dracula.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px black;}.ace-dracula .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-dracula .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #F8F8F0}.ace-dracula .ace_marker-layer .ace_active-line {border: 2px solid #3a424a;box-sizing: border-box;}.ace-dracula .ace_marker-layer .ace_selected-word {background-color: rgba(125, 81, 64, 0.8);}.ace-dracula .ace_keyword {color: #d3a0ff}.ace-dracula .ace_keyword.ace_operator {color: #ddd}.ace-dracula .ace_constant.ace_language {color: #bd93f9}.ace-dracula .ace_constant.ace_numeric {color: #c3e8d1}.ace-dracula .ace_constant.ace_character {color: #bd93f9}.ace-dracula .ace_constant.ace_character.ace_escape {color: #ff79c6}.ace-dracula .ace_constant.ace_other {color: #bd93f9}.ace-dracula .ace_identifier {color: #aef1ff}.ace-dracula .ace_support.ace_function {color: #57afff}.ace-dracula .ace_support.ace_constant {color: #aef1ff}.ace-dracula .ace_support.ace_class {color: #aef1ff}.ace-dracula .ace_support.ace_type {color: #aef1ff}.ace-dracula .ace_meta.ace_tag,.ace-dracula .ace_storage {color: #57afff}.ace-dracula .ace_storage.ace_type {color: #57afff}.ace-dracula .ace_invalid {color: #F8F8F0;background-color: #ff79c6}.ace-dracula .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #bd93f9}.ace-dracula .ace_string {color: #f1fa8c}.ace-dracula .ace_comment {color: #7988b5}.ace-dracula .ace_constant,.ace-dracula .ace_variable {color: #a6ffbd}.ace-dracula .ace_variable.ace_parameter {color: #aef1ff}.ace-dracula .ace_entity.ace_other.ace_attribute-name {color: #aef1ff}.ace-dracula .ace_entity.ace_name.ace_function {color: #fff8d3}.ace-dracula .ace_xml-pe.ace_xml,.ace-dracula .ace_punctuation.ace_tag {color: #999}.ace-dracula .ace_tag-name.ace_tag,.ace-dracula .ace_entity.ace_name.ace_tag {color: #57afff}.ace-dracula .ace_heading {color: #aef1ff;}.ace-dracula .ace_markup.ace_list {color: #57afff;}"})),ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {color: #8F908A}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12PQNbMHAAE2AKNSM6cKAAAAAElFTkSuQmCC) right repeat-y;}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {color: #ddd}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #063e63;border-radius: 0;}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px black;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #F8F8F0}.ace-monokai .ace_marker-layer .ace_active-line {border: 2px solid #3a424a;box-sizing: border-box;}.ace-monokai .ace_marker-layer .ace_selected-word {background-color: rgba(125, 81, 64, 0.8);}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #bbb}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_heading {color: #66D9EF;}.ace-monokai .ace_markup.ace_list {color: #A6E22E;}"})),ace.define("ace/theme/xcode",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-xcode",t.cssText=".ace-xcode .ace_gutter {color: #1069a9;}.ace-xcode .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVQI12P4/PkzAAW2AtoE25PsAAAAAElFTkSuQmCC) right repeat-y;}.ace-xcode .ace_print-margin {width: 1px;background: #e8e8e8}.ace-xcode {color: black}.ace-xcode .ace_cursor {color: black}.ace-xcode .ace_marker-layer .ace_selection {background: #B5D5FF}.ace-xcode.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px #fff;}.ace-xcode .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-xcode .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-xcode .ace_marker-layer .ace_active-line {border: 2px solid #eee;box-sizing: border-box;}.ace-xcode .ace_marker-layer .ace_selected-word {border: 1px solid #B5D5FF}.ace-xcode .ace_constant.ace_language,.ace-xcode .ace_keyword,.ace-xcode .ace_meta,.ace-xcode .ace_variable.ace_language {color: #C800A4}.ace-xcode .ace_invisible {color: #BFBFBF}.ace-xcode .ace_constant.ace_character,.ace-xcode .ace_constant.ace_other {color: #275A5E}.ace-xcode .ace_constant.ace_numeric {color: #3A00DC}.ace-xcode .ace_entity.ace_other.ace_attribute-name,.ace-xcode .ace_support.ace_constant,.ace-xcode .ace_support.ace_function {color: #450084}.ace-xcode .ace_entity.ace_name.ace_tag,.ace-xcode .ace_support.ace_class,.ace-xcode .ace_support.ace_type {color: #790EAD}.ace-xcode .ace_heading {  color: #e20505;}.ace-xcode .ace_markup.ace_list {  color: #5400a3;}.ace-xcode .ace_storage {color: #C900A4}.ace-xcode .ace_string {color: #DF0002}.ace-xcode .ace_comment {color: #008E00}"})),m.module("addBranch").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:i18nTag(RES_I18N.Actions.Create(RES_I18N.Objects.Branch)),collapsable:!1}]},body:{flexLayout:"column",cls:"uk-form",margin:"top",cells:[{id:"addBranchInput",view:"input",i18nPlaceholders:RES_I18N.Objects.NameFor(RES_I18N.Objects.Branch),on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.qo().dispatch("onClick")})}},validateAsync:async function(){const t=this,n=t.getValue(),i=RES_I18N.Objects.NameFor(RES_I18N.Objects.Branch);let o;if(n)if(/[~^:\s\\]/.test(n)||n.endsWith("/")||n.includes("..")||n.startsWith(".")||n.toLowerCase().endsWith(".lock"))o=RES_I18N.ErrorMessages.InvalidFor(i);else{const t=e.modal.projectDir;(await e.gitClient.Sn(t)).includes(n)&&(o=RES_I18N.ErrorMessages.ExistsFor(i))}else o=RES_I18N.ErrorMessages.CannotBeEmptyFor(i);if(o)throw t.raiseConcern(o),new Error(o);return t.raiseConcern(null),n}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"addBranchCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"addBranchOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const t=e.modal.projectDir;e.Ct().validateAsync().then(n=>{t&&n&&e.gitClient.jn(t,n),e.modal.close()})}}}]},on:{onOpened:function(e,t,n){this.projectDir=n}}},document.getElementById("appContainer"))})),m.module("addGitAuth").require("git").__init__((function(e,{git:t}){e.git=t})).__init__((function(e){e.CredentialManager={prompt:function(t){return new Promise((function(n,i){e.Ko(t,(function(){e.git.ie(t).then(n,i)}),i)}))},getItemAsync:async function(t){const n=await e.git.ie(t);return n.username&&n.token?{username:n.username,token:n.token}:this.prompt(t)},getItemAsyncWithoutPrompt:function(t){return e.git.ne(t).then(n=>n?e.git.ie(t):null)},setItemAsync:function(t,n,i,o){return e.git.oe(t,n,i,o)}}})).def({Zo:function(){return $$("addGitAuthHostSelect")},Qo:function(){return $$("addGitTokenInput")},Yo:function(){return $$("addGitUsernameInput")},Jo:function(){return $$("addGitAuthorEmailInput")},Ko:function(e,t,n){const i=this;if(e){const t=i.Zo();t.setValue(e),t.dispatch("onChange")}i.modal.open({onResult:t,onDismiss:n})},Xo:async function(){const e=this.Yo().getValue(),t=this.Jo().getValue(),n=this.Qo().getValue(),i=this.Zo().getValue();await this.CredentialManager.setItemAsync(i,e,n,t)}}),m.module("addGitAuth").__init__((function(e){e.modal=UI.new({id:e.__name__,cls:"x-prompt",view:"modal",closeButton:!1,bgClose:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.GitCredentials,collapsable:!1},{flexSize:"none",cells:[{view:"label",textColor:"muted",label:i18nTag({en:"Provider",es:"Proveedor",ja:"プロバイダー",pt:"Provedor",ru:"Поставщик",zh:"提供者",zhTW:"提供者"})},{id:"addGitAuthHostSelect",view:"select",textColor:"primary",margin:"x",style:{border:"none",padding:"0"},data:[{value:"git",label:"Default"},{value:"github.com",label:"GitHub",optgroup:"Host"},{value:"bitbucket.org",label:"BitBucket",optgroup:"Host"},{value:"gitlab.com",label:"GitLab",optgroup:"Host"}],on:{onChange:function(){const t=this.getValue();$$("addGitAuthMessage").showBatch(t),e.modal.updateFieldsForProviderAsync(t)}}}]}]},body:{flexLayout:"column",margin:"top",cells:[{id:"addGitUsernameInput",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Placeholders.Username,on:{onKeyUp:function(t,n,i){"Enter"==i.key&&e.Qo().focus()}}},{id:"addGitTokenInput",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:{en:"Password/Token",es:"Contraseña/Token",ja:"パスワード/Token",pt:"Senha/Token",ru:"Пароль/Token",zh:"密码/Token",zhTW:"密碼/Token"},on:{onKeyUp:function(t,n,i){"Enter"==i.key&&this.getValue()&&e.Jo().focus()}}},{id:"addGitAuthorEmailInput",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Objects.AuthorEmail,type:"email",on:{onKeyUp:function(e,t,n){"Enter"==n.key&&$$("addGitAuthOkButton").dispatch("onClick")}}},{id:"addGitAuthMessage",margin:"top-sm left-sm",cells:[{batch:"github.com",htmlTag:"SPAN",template:"Create a <a href='https://github.com/settings/tokens' rel='noopener noreferrer' target='_blank'>GitHub token</a>."},{batch:"gitlab.com",htmlTag:"SPAN",template:"How to create a <a href='https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html' rel='noopener noreferrer' target='_blank'>GitLab token</a>."},{batch:"bitbucket.org",htmlTag:"SPAN",template:"How to create a <a href='https://confluence.atlassian.com/bitbucket/app-passwords-828781300.html' rel='noopener noreferrer' target='_blank'>BitBucket token</a>."}],on:{onInitialized:function(){this.showBatch(e.Zo().getValue())}}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"addGitAuthCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"addGitAuthOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){e.Xo().then(()=>{e.onModalResult&&(e.onModalResult(),e.onModalDismiss=null),e.modal.close()})}}}]},on:{onOpened:function(t,n,i){this.updateFieldsForProviderAsync(e.Zo().getValue()),e.onModalResult=i&&i.onResult,e.onModalDismiss=i&&i.onDismiss},onClosed:function(){e.onModalDismiss&&e.onModalDismiss()}},updateFieldsForProviderAsync:function(t){return e.git.ie(t).then(t=>{e.Qo().setValue(t.token),e.Yo().setValue(t.username),e.Jo().setValue(t.email)})}},document.getElementById("appContainer"))})),m.module("checkoutBranch").require("gitClient","session","prompt").__init__((function(e,{gitClient:t,session:n,prompt:i}){Object.assign(e,{gitClient:t,session:n,prompt:i})})).def({select:function(){return $$("checkoutBranchSelect")},ea:async function(e){const t=this,n=await t.gitClient.sn(e);await Promise.all(n.map(n=>t.gitClient._n(e,n.remote))),await t.ta(e),t.prompt.ue(RES_I18N.Objects.Fetch,"Successfully updated all remote branches.")},na:function(e){return e.filter(({name:e})=>"HEAD"!==e).map(e=>({label:e.name,value:e.name,optgroup:e.remote?`Remote: ${e.remote}`:"Local"}))},ta:async function(e){const[t,n]=await Promise.all([this.gitClient.yn(e),this.gitClient.Ht(e)]);this.select().setData(this.na(t)),this.select().setValue(n)},ia:async function(e){await this.ta(e),this.modal.open(e)},oa:async function({dir:e,branch:t,noChecks:n}){await(n?this.gitClient.Fn(e,t):this.gitClient.Tn(e,t)),await this.session.Ve(e),await this.session.Ge(this.session.Se())}}),m.module("checkoutBranch").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,style:{zIndex:1900},header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.Checkout,collapsable:!1}]},body:{cls:"uk-form",margin:"top",flexAlign:"middle",cells:[{id:"checkoutBranchSelect",view:"select",flexSize:"flex",data:[],style:{maxWidth:"calc(100% - 56px)"}},{view:"menuIcon",icon:"refresh",title:"Fetch All Remotes",margin:"x-sm",flexSize:"none",on:{onClick:function(){const t=e.modal.projectDir;t&&e.ea(t)}}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"checkoutBranchCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"checkoutBranchOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const t=e.modal.projectDir;t&&e.oa({dir:t,branch:e.select().getValue()}),e.modal.close()}}}]},on:{onOpened:function(e,t,n){this.projectDir=n}}},document.getElementById("appContainer"))})),m.module("cloneRepo").require("gitClient","git","addGitAuth","initRepo","project").__init__((function(e,{gitClient:t,git:n,addGitAuth:i,initRepo:o,project:a}){Object.assign(e,{gitClient:t,git:n,addGitAuth:i,initRepo:o,project:a})})).__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.CloneRepo,collapsable:!1}]},body:{flexLayout:"column",cells:[{view:"link",htmlTag:"SPAN",margin:"y-sm",template:`${i18nTag(RES_I18N.Actions.Set(RES_I18N.Objects.Credentials),"a")} to access for ${RES_I18N.Elements.PrivateRepository}.`,on:{onClick:function(t,n,i){"A"===i.target.tagName&&(e.modal.close(),e.addGitAuth.Ko())}}},{id:"cloneRepoUrlInput",view:"input",width:"full",size:"large",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Placeholders.HttpsUrl,on:{onKeyUp:function(e,t,n){this.validate((function(){"Enter"==n.key&&$$("cloneRepoOkButton").dispatch("onClick")}))}},validate:function(t){const n=this,i=n.getValue(),o=e.git.te(i);i?o?(n.raiseConcern(null),t&&t(o)):n.raiseConcern("Please enter a valid HTTPS repo url."):n.raiseConcern(null)}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"cloneRepoCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"cloneRepoOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const t=$$("cloneRepoUrlInput");t.setValue(e.git.J(t.getValue())),t.validate((function(t){e.modal.close(),e.aa(t.repoName,t.url)}))}}}]},on:{onOpened:function(){$$("cloneRepoUrlInput").setValue("")}}},document.getElementById("appContainer"))})).def({sa:function(e){this.modal.open({onResult:e})},aa:function(e,t){const n=this;return n.project.T({name:e,buildCallbackAsync:async function(e){const{dir:i}=e;e.git=!0,await n.gitClient.un(i,t)}}).then(GA_SendEvent_Success("clone_git_repo","git_core"),GA_SendEvent_Failure("clone_git_repo","git_core"))}}),m.module("commitMessage").require("git","gitClient","path").__init__((function(e,{git:t,gitClient:n,path:i}){Object.assign(e,{git:t,gitClient:n,path:i})})).def({commitMessage:function(){return $$("commitMessageInput")},authorName:function(){return $$("commitAuthorName")},authorEmail:function(){return $$("commitAuthorEmail")},qo:function(){return $$("commitMessageOkButton")},ra:function(){return $$("commitMessageCredentialSelect")},ca:async function(e){const t=this;let n;try{const{url:i}=await t.gitClient.rn(e);n=t.path.it(i)}catch(e){n=null}t.ra().setValue(n||"git");const i=await t.git.ie(n);return t.commitMessage().setValue(""),t.authorName().setValue(i.username),t.authorEmail().setValue(i.email),new Promise((function(e,n){t.modal.open({resolve:e,reject:n})}))}}),m.module("commitMessage").__init__((function(e){e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.CommitAll,collapsable:!1},{flexSize:"none",cells:[{view:"label",textColor:"muted",label:i18nTag(RES_I18N.Objects.Credentials)},{id:"commitMessageCredentialSelect",view:"select",textColor:"primary",margin:"x",style:{border:"none",padding:"0"},data:[{value:"git",label:"Default"},{value:"github.com",label:"GitHub",optgroup:"Host"},{value:"bitbucket.org",label:"BitBucket",optgroup:"Host"},{value:"gitlab.com",label:"GitLab",optgroup:"Host"}],on:{onChange:function(){e.git.ie(this.getValue()).then(t=>{e.authorName().setValue(t.username),e.authorEmail().setValue(t.email)})}}}]}]},body:{flexLayout:"column",margin:"top",cells:[{id:"commitMessageInput",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Objects.CommitMessage,validateAsync:async function(){const e=this,t=e.getValue();let n;if(t||(n=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.CommitMessage)),n)throw e.raiseConcern(n),new Error(n);return e.raiseConcern(null),t},on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.authorName().focus()})}}},{id:"commitAuthorName",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Objects.NameFor(RES_I18N.Objects.Author),validateAsync:async function(){const e=this,t=e.getValue();let n;if(t||(n=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Author))),n)throw e.raiseConcern(n),new Error(n);return e.raiseConcern(null),t},on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.authorEmail().focus()})}}},{id:"commitAuthorEmail",view:"input",autocapitalize:"off",autocorrect:"off",spellcheck:"false",i18nPlaceholders:RES_I18N.Objects.AuthorEmail,type:"email",validateAsync:async function(){const e=this,t=e.getValue();let n;if(t||(n=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.AuthorEmail)),n)throw e.raiseConcern(n),new Error(n);return e.raiseConcern(null),t},on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.qo().dispatch("onClick")})}}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"commitMessageCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.modal.close()}}},{id:"commitMessageOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){return Promise.all([e.commitMessage().validateAsync(),e.authorName().validateAsync(),e.authorEmail().validateAsync()]).then(([t,n,i])=>{e.modal.close(),e.modal.resolve&&e.modal.resolve({message:t,author:{name:n,email:i}})})}}}]},on:{onOpened:function(t,n,{resolve:i,reject:o}){Object.assign(this,{resolve:i,reject:o}),e.commitMessage().raiseConcern(null),e.authorName().raiseConcern(null),e.authorEmail().raiseConcern(null)}}},document.getElementById("appContainer"))})),m.module("initRepo").require("gitClient","session","model","gitRemotes").__init__((function(e,{gitClient:t,session:n,model:i,gitRemotes:o}){Object.assign(e,{gitClient:t,session:n,gitRemotes:o,model:i})})).def({la:async function(e){await this.gitClient.Gn(e),await this.session.Ve(e),await this.model.Ne(e,{git:!0})}}),m.module("gitBranches").require("string","checkoutBranch","addGitAuth","gitClient","session").__init__((function(e,{addGitAuth:t,gitClient:n,checkoutBranch:i,string:o,session:a}){Object.assign(e,{addGitAuth:t,gitClient:n,string:o,checkoutBranch:i,session:a}),a.observable.subscribe((function({action:t,projectDir:n}){if("syncGit"===t)return e.ua(n)}))})).def({ha:function(){return $$("gitBranchesOkButton")},da:function(){return $$("gitBranchesAddInput")},$i:function(){return $$("gitBranchesList")},pa:function(){return $$("gitBranchesListContainer")},ma:function(){return $$("gitBranchesRemoteList")},fa:function(){return $$("gitBranchesRemoteListContainer")},ga:function(){return $$("gitBranchesSearchInput")},va:function(e){this.da().setValue(""),this.addModal.open(e)},wa:async function(e){await this.ua(e),this.modal.open(e)},ua:async function(e){const t=this,[n,i]=await Promise.all([t.gitClient.yn(e),t.gitClient.Ht(e,!0).catch(()=>null)]),o=n.filter(e=>!e.remote);if(o.length){const e=t.$i();e.setData(o),e.deselectAll();const n=e.findOne("ref",i);n&&e.select(n),t.pa().showBatch("list")}else t.pa().showBatch("empty");const a=n.filter(e=>!!e.remote);a.length?(t.ma().setData(a),t.fa().showBatch("list")):t.fa().showBatch("empty")},Nn:async function(e,t){return await this.gitClient.On(e,t),this.ua(e)}}),m.module("gitBranches").__init__((function(e){e.addModal=UI.new({id:"gitBranchesAddModal",view:"modal",cls:"x-prompt",closeButton:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:i18nTag(RES_I18N.Actions.Create(RES_I18N.Objects.Branch)),collapsable:!1}]},body:{flexLayout:"column",cls:"uk-form",margin:"top",cells:[{id:"gitBranchesAddInput",view:"input",i18nPlaceholders:RES_I18N.Objects.NameFor(RES_I18N.Objects.Branch),on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.ha().dispatch("onClick")})}},validateAsync:async function(){const t=this,n=t.getValue();let i;if(n){if(/[~^:\s\\]/.test(n)||n.endsWith("/")||n.includes("..")||n.startsWith(".")||n.toLowerCase().endsWith(".lock"))throw i=RES_I18N.ErrorMessages.InvalidFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Branch)),t.raiseConcern(i),new Error(i);{const{projectDir:o}=e.addModal;if((await e.gitClient.Sn(o)).includes(n))throw i=RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.Branch),t.raiseConcern(i),new Error(i);return t.raiseConcern(null),n}}throw i=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Branch)),t.raiseConcern(i),new Error(i)}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"gitBranchesCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.addModal.close()}}},{id:"gitBranchesOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const{projectDir:t}=e.addModal;e.da().validateAsync().then(async n=>{await e.gitClient.Pn(t,n),await e.ua(t),e.addModal.close()})}}}]},on:{onOpened:function(e,t,n){this.projectDir=n}}},document.getElementById("appContainer"));const t=t=>t.ref.includes(e.ga().getValue());e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["scroll","blank"],style:{zIndex:1900},header:{flexSize:"none",cls:"x-menu-title-bar shadow",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.Branches,collapsable:!1},{cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{view:"menuToggle",icon:"search",title:"Search Branches",on:{onToggled:function(){const t=e.ga();this.isSelected()?(t.show(),t.focus()):t.hide()}}},{id:"gitBranchesAddButton",view:"menuIcon",icon:"plus",margin:"right",on:{onClick:function(){e.va(e.modal.projectDir)}}},{id:"gitBranchesCloseButton",view:"menuIcon",icon:"close",on:{onClick:function(){e.modal.close()}}}]}]},{id:"gitBranchesSearchInput",cls:"x-menu-search",view:"searchField",hidden:!0,flexSize:"flex",i18nPlaceholders:RES_I18N.Actions.SearchFor(RES_I18N.Objects.Branch),clearSearch:!0,on:{onInput:function(){e.$i().refresh()}}}]},body:{view:"scroller",cells:[{view:"menuTitle",label:RES_I18N.Elements.Local,style:{padding:"0.5em 1em"},on:{onToggled:function(t){const n=e.pa();t.visible?n.show():n.hide()}}},{id:"gitBranchesListContainer",flexSize:"none",cells:[{batch:"list",id:"gitBranchesList",view:"list",selectable:!0,flexSize:"flex",listStyle:"side",template:function(t){return{cls:"x-list-item",template:{cls:"x-list-item-meta",flexAlign:"middle",cells:[{flex:!1,flexSize:"flex",style:{minWidth:0},cells:[{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",label:e.string.at(t.name)},{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",textColor:"muted",label:e.string.at(t.ref)}]},{view:"menuIcon",tagClass:"",margin:"left",text:"large",icon:"pull",on:{onClick:function(){e.checkoutBranch.oa({dir:e.modal.projectDir,branch:t.name})}}},{view:"menuIcon",tagClass:"",margin:"left",text:"large",iconClass:"ti-trash",on:{onClick:function(){e.Nn(e.modal.projectDir,t.name)}}}]}}},filter:t,data:[]},{batch:"empty",textAlign:"center",fill:"height",flexLayout:"column",flexAlign:["center","middle"],cells:[{cls:"uk-h5",view:"label",padding:"large",attributes:i18nAttributes({en:"No Branches",es:"Sin Ramals",ja:"ブランチなし",pt:"Sem Ramos",ru:"Нет ветви",zh:"没有分支",zhTW:"沒有分支"}),style:{opacity:.5}}]}]},{view:"menuTitle",label:RES_I18N.Elements.RemoteBranches,style:{padding:"0.5em 1em"},on:{onToggled:function(t){const n=e.fa();t.visible?n.show():n.hide()}}},{id:"gitBranchesRemoteListContainer",flexLayout:"column",cells:[{batch:"list",id:"gitBranchesRemoteList",view:"list",selectable:!0,flexSize:"flex",listStyle:"side",template:function(t){return{cls:"x-list-item",template:{cls:"x-list-item-meta",flexAlign:"middle",cells:[{flex:!1,flexSize:"flex",style:{minWidth:0},cells:[{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",label:e.string.at(t.name)},{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",textColor:"muted",label:e.string.at(t.ref)}]},{view:"menuIcon",tagClass:"",margin:"left",text:"large",icon:"pull",on:{onClick:function(){e.checkoutBranch.oa({dir:e.modal.projectDir,branch:t.name})}}}]}}},filter:t,data:[]},{batch:"empty",textAlign:"center",fill:"height",flexLayout:"column",flexAlign:["center","middle"],cells:[{cls:"uk-h5",view:"label",padding:"large",attributes:i18nAttributes({en:"No Remote Branches",es:"Sin Ramals Remoto",ja:"リモートブランチなし",pt:"Sem Ramos Remoto",ru:"Нет ветви внешнего",zh:"没有远端分支",zhTW:"沒有远端分支"}),style:{opacity:.5}}]}]}]},on:{onOpened:function(e,t,n){this.projectDir=n}}},document.getElementById("appContainer"))})),m.module("gitRemotes").require("gitClient","git","prompt","share").__init__((function(e,{gitClient:t,git:n,prompt:i,share:o}){Object.assign(e,{gitClient:t,git:n,prompt:i,share:o})})).def({$i:function(){return $$("gitRemotesList")},ga:function(){return $$("gitRemotesSearchInput")},ba:function(){return $$("gitRemotesUpstreamModalTitle")},ya:function(){return $$("gitRemotesUpstreamModalBody")},Sa:function(){return $$("gitRemotesAddRemoteTitleIcon")},xa:function(){return $$("gitRemotesUpstreamRemoteSelect")},_a:function(){return $$("gitRemotesRemoteOnlySelect")},ka:function(){return $$("gitRemotesUpstreamBranchSelect")},ha:function(){return $$("gitRemotesAddModalOkButton")},Aa:function(){return $$("gitRemotesUrlInput")},Ia:function(){return $$("gitRemotesNameInput")},Ca:function(){return $$("gitRemotesContainer")},Ea:async function({projectDir:e,afterModalCallback:t}){const n=this,{remote:i,url:o}=await new Promise((i,o)=>{n.addModal.open({resolve:i,reject:o,projectDir:e}),t&&t({resolve:i,reject:o})});return await n.gitClient.Un(e,i,o),n.$a(e)},Bn:async function(e,t){return await this.gitClient.Bn(e,t),this.$a(e)},Ra:async function(e){const{remote:t}=await this.Ta({projectDir:e,remoteOnly:!0,title:RES_I18N.Objects.Fetch});await this.gitClient._n(e,t);const n=RES_I18N.Objects.Remote;this.prompt.ue(RES_I18N.Objects.SuccessfulFor(RES_I18N.Objects.Fetch),{en:`Successfully fetched ${n.en.toLowerCase()} [${t}].`,es:`Recuperada con éxito ${n.es.toLowerCase()} [${t}].`,ja:`正常にフェッチされました${n.ja} [${t}]`,pt:`Busca ${n.pt.toLowerCase()} com sucesso [${t}].`,zh:`成功获取${n.zh} [${t}]`,zhTW:`成功獲取${n.zhTW} [${t}]`})},Ta:async function({projectDir:e,remoteOnly:t,title:n,afterModalCallback:i}){const o=this;await(t?o.Fa(e):o.za(e));const{remote:a,branch:s}=await new Promise((a,s)=>{o.upstreamModal.open({resolve:a,reject:s,projectDir:e,remoteOnly:t,title:n}),i&&i()});return await Promise.all([o.gitClient.Yt(e,a),!t&&o.gitClient.Jt(e,s)]),{remote:a,branch:s}},Pa:async function(e){await this.share.Si({title:i18nTag(RES_I18N.Objects.RemoteUrl),value:e})},Fa:async function(e){const[t,n]=await Promise.all([this.gitClient.Zt(e),this.gitClient.sn(e)]),i=this._a();i.setData(n.map(({remote:e})=>({label:e,value:e}))),i.setValue(t||"origin")},za:async function(e){const[t,n]=await Promise.all([this.gitClient.Zt(e),this.gitClient.sn(e)]),i=this.xa(),o=t||"origin";return i.setData(n.map(({remote:e})=>({label:e,value:e}))),i.setValue(o),this.Na(e,o)},Na:async function(e,t){const[n,i,o]=await Promise.all([this.gitClient.Ht(e),this.gitClient.Qt(e),this.gitClient.Sn(e,t)]),a=this.ka();a.setData([n].concat(o).map(e=>({label:e,value:e}))),a.setValue(i||n)},$a:async function(e){const t=this,[n,i]=await Promise.all([t.gitClient.Zt(e),t.gitClient.sn(e)]);if(i.length){const e=t.$i();e.setData(i),e.deselectAll();const o=e.findOne("remote",n);o&&e.select(o),t.Ca().showBatch("list")}else t.Ca().showBatch("empty")},Oa:async function(e){await this.$a(e),this.modal.open(e)}}),m.module("gitRemotes").require("string").__init__((e,{string:t})=>{e.addModal=UI.new({id:"gitRemotesAddModal",view:"modal",cls:"x-prompt",closeButton:!1,bgclose:!1,center:!1,header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.Remote)),collapsable:!1}]},body:{flexLayout:"column",margin:"top",cells:[{id:"gitRemotesNameInput",view:"input",i18nPlaceholders:RES_I18N.Objects.NameFor(RES_I18N.Objects.Remote),on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.ha().dispatch("onClick")})}},validateAsync:async function(){const t=this,n=t.getValue();let i;if(n){if((await e.gitClient.sn(e.addModal.projectDir)).map(e=>e.remote).includes(n))throw i=RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.Remote),t.raiseConcern(i),new Error(i);return t.raiseConcern(null),n}throw i=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Remote)),t.raiseConcern(i),new Error(i)}},{id:"gitRemotesUrlInput",view:"input",i18nPlaceholders:RES_I18N.Placeholders.HttpsUrl,on:{onKeyUp:function(t,n,i){this.validateAsync().then(()=>{"Enter"==i.key&&e.ha().dispatch("onClick")})}},validateAsync:async function(){const t=this,n=t.getValue(),i=e.git.te(n);let o;if(n){if(i)return t.raiseConcern(null),i.url;throw o=RES_I18N.ErrorMessages.InvalidFor(RES_I18N.Objects.RemoteUrl),t.raiseConcern(o),new Error(o)}throw o=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.RemoteUrl),t.raiseConcern(o),new Error(o)}}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"gitRemotesAddModalCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.addModal.close(),this.reject&&this.reject()}}},{id:"gitRemotesAddModalOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const t=e.Aa(),n=e.Ia();return t.setValue(e.git.J(t.getValue())),n.getValue()||n.setValue("origin"),Promise.all([n.validateAsync(),t.validateAsync()]).then(([n,i])=>e.gitClient.kn(i).then(()=>{const t=e.addModal;t.close(),t.resolve&&t.resolve({remote:n,url:i})},()=>{t.raiseConcern(i18nTag({en:"Failed to connect. GIT URL may not be valid.",es:"No se pudo conectar. El enlace puede estar roto.",ja:"接続に失敗しました。リンクが壊れている可能性があります。",pt:"Falha ao conectar. O link pode estar quebrado.",ru:"Не удалось подключиться. GIT URL может быть недействительным.",zh:"连接失败。链接可能中断了。",zhTW:"無法連線。連接可能已經中斷。"}))}))}}}]},on:{onOpened:function(t,n,{resolve:i,reject:o,projectDir:a}){e.Ia().setValue(""),e.Aa().setValue(""),Object.assign(this,{resolve:i,reject:o,projectDir:a})}}},document.getElementById("appContainer")),e.upstreamModal=UI.new({id:"gitRemotesUpstreamModal",view:"modal",cls:"x-prompt",closeButton:!1,bgclose:!1,center:!1,style:{zIndex:1900},header:{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{id:"gitRemotesUpstreamModalTitle",view:"menuTitle",label:"",collapsable:!1},{id:"gitRemotesAddRemoteTitleIcon",cls:"x-menu-icons",view:"menuIcon",icon:"plus",title:"Add Remote",flexSize:"none",on:{onClick:function(){const t=e.upstreamModal.projectDir;t&&e.Ea({projectDir:t}).then(()=>e.za(t))}}}]},body:{id:"gitRemotesUpstreamModalBody",margin:"top",cells:[{batch:"upstream",view:"form",formStyle:"horizontal",fill:"width",fieldset:[{id:"gitRemotesUpstreamRemoteSelect",formLabel:RES_I18N.Elements.Remotes,view:"select",style:{maxWidth:"calc(100% - 128px)"},data:[],on:{onChange:function(){e.Na(e.upstreamModal.projectDir,this.getValue())}}},{id:"gitRemotesUpstreamBranchSelect",formLabel:RES_I18N.Elements.Branches,view:"select",style:{maxWidth:"calc(100% - 128px)"},data:[]}]},{batch:"remoteOnly",cells:[{id:"gitRemotesRemoteOnlySelect",flexSize:"flex",view:"select",data:[]},{cls:"x-menu-icons",view:"menuIcon",icon:"plus",margin:"left",title:"Add Remote",flexSize:"none",on:{onClick:function(){const t=e.upstreamModal.projectDir;t&&e.Ea({projectDir:t}).then(()=>e.Fa(t))}}}]}]},footer:{flexAlign:"right",margin:"y",cells:[{id:"gitRemotesUpstreamModalCancelButton",view:"button",label:RES_I18N.Elements.Cancel,on:{onClick:function(){e.upstreamModal.close(),e.upstreamModal.reject&&e.upstreamModal.reject()}}},{id:"gitRemotesUpstreamModalOkButton",view:"button",label:RES_I18N.Elements.Ok,style:{minWidth:"64px"},on:{onClick:function(){const{resolve:t,projectDir:n,remoteOnly:i}=e.upstreamModal;e.upstreamModal.close(),n&&t&&t(i?{remote:e._a().getValue()}:{remote:e.xa().getValue(),branch:e.ka().getValue()})}}}]},on:{onOpened:function(t,n,{resolve:i,reject:o,projectDir:a,remoteOnly:s,title:r}){Object.assign(this,{resolve:i,reject:o,projectDir:a,remoteOnly:s}),s?(e.ya().showBatch("remoteOnly"),e.Sa().hide()):(e.ya().showBatch("upstream"),e.Sa().show()),r&&(e.ba().config.label=("string"==typeof r?r:i18nTag(r))+": "+i18nTag(s?RES_I18N.Actions.Select(RES_I18N.Objects.Remote):RES_I18N.Actions.Select(RES_I18N.Objects.Upstream)),e.ba().updateLabel())}}},document.getElementById("appContainer")),e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",center:!1,closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["blank"],style:{zIndex:1900},header:{flexSize:"none",cls:"x-menu-title-bar shadow",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.Remotes,collapsable:!1},{cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{view:"menuToggle",icon:"search",title:"Search Remotes",on:{onToggled:function(){const t=e.ga();this.isSelected()?(t.show(),t.focus()):t.hide()}}},{id:"gitRemotesAddButton",view:"menuIcon",icon:"plus",title:"Add Remote",margin:"right",on:{onClick:function(){const{projectDir:t}=e.modal;e.Ea({projectDir:t})}}},{id:"gitRemotesCloseButton",view:"menuIcon",icon:"close",on:{onClick:function(){e.modal.close()}}}]}]},{id:"gitRemotesSearchInput",cls:"x-menu-search",view:"searchField",hidden:!0,flexSize:"flex",i18nPlaceholders:RES_I18N.Actions.SearchFor(RES_I18N.Objects.Remote),clearSearch:!0,on:{onInput:function(){e.$i().refresh()}}}]},body:{id:"gitRemotesContainer",view:"scroller",cells:[{id:"gitRemotesList",batch:"list",view:"list",selectable:!0,flexSize:"flex",listStyle:"side",template:function(n){return{cls:"x-list-item",template:{cls:"x-list-item-meta",flexAlign:"middle",cells:[{flex:!1,flexSize:"flex",style:{minWidth:0},cells:[{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",label:t.at(n.remote)},{view:"label",cls:"x-flex-text-overflow-ellipsis",htmlTag:"DIV",textColor:"muted",label:t.at(n.url)}]},{view:"menuIcon",margin:"left",tagClass:"",text:"large",iconClass:"ti-share",on:{onClick:function(){e.Pa(n.url)}}},{view:"menuIcon",margin:"left",tagClass:"",text:"large",iconClass:"ti-trash",on:{onClick:function(){e.Bn(e.modal.projectDir,n.remote)}}}]}}},filter:t=>t.remote.includes(e.ga().getValue()),data:[]},{batch:"empty",textAlign:"center",fill:"height",flexLayout:"column",flexAlign:["center","middle"],cells:[{cls:"uk-h5",view:"label",padding:"large",attributes:i18nAttributes({en:"No Remotes. Click ＋ to add a remote.",es:"Sin remotos. Haga clic en ＋ para agregar un remoto.",ja:"リモートなし。 ＋をクリックして、リモートを追加します。",pt:"Sem remotos. Clique em ＋ para adicionar um remoto.",ru:"Нет Bнешние. Нажмите ＋, чтобы добавить Bнешние.",zh:"没有远端。单击＋添加远端。",zhTW:"沒有遠端。單擊＋添加遠端。"}),style:{opacity:.5}}]}]},on:{onOpened:function(e,t,n){this.projectDir=n}}},document.getElementById("appContainer"))}),m.module("gitLogger").require("gitClient","prompt").__init__((function(e,{gitClient:t,prompt:n}){Object.assign(e,{gitClient:t,prompt:n})})).def({$i:function(){return $$("gitLoggerList")},Ct:function(){return $$("gitLoggerSearchInput")},Ua:async function(e){const t=this;try{const[n,i]=await Promise.all([t.gitClient.yn(e),t.gitClient.Xt(e)]);(await Promise.all(n.map(n=>t.gitClient.in(e,n.ref)))).forEach((e,t)=>{const o=i.find(t=>t.oid===e);o&&(n[t].remote?o.remote=n[t].remote+"/"+n[t].name:o.head=n[t].name)}),t.$i().setData(i),t.modal.open()}catch(e){throw t.prompt.ue("Git Log Failed",e.message||"An error occurred in gathering log info."),e}}}),m.module("gitLogger").__init__(e=>{e.modal=UI.new({id:e.__name__,view:"modal",cls:"x-prompt",closeButton:!1,dialogClass:"uk-flex uk-flex-column",dialogStyle:["scroll","blank"],header:{flexSize:"none",cls:"x-menu-title-bar shadow",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.LogHistory,collapsable:!1},{cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{view:"menuToggle",icon:"search",title:"Search Files",on:{onToggled:function(){const t=e.Ct();this.isSelected()?(t.show(),t.focus()):t.hide()}}},{id:"gitLoggerCloseButton",view:"menuIcon",icon:"close",title:"Close",on:{onClick:function(){e.modal.close()}}}]}]},{id:"gitLoggerSearchInput",cls:"x-menu-search",view:"searchField",hidden:!0,i18nPlaceholders:RES_I18N.Actions.SearchFor(RES_I18N.Objects.Log),clearSearch:!0,on:{onInput:function(){e.$i().refresh()}}}]},body:{view:"scroller",cells:[{id:"gitLoggerList",view:"list",padding:"x-sm y",batch:"list",selectable:!0,flexSize:"flex",listStyle:"side",filter:t=>{const n=e.Ct().getValue();return t.message.includes(n)||t.oid.includes(n)},template:e=>{const{author:t,oid:n,head:i,remote:o,message:a}=e,{timestamp:s,name:r,email:c}=t,l=new Date(1e3*s).toLocaleString(),u=[];return i&&u.push(`<span class='uk-badge uk-badge-notification'>HEAD: ${i}</span>`),o&&u.push(`<span class='uk-badge uk-badge-notification uk-badge-danger'>${o}</span>`),`${u.length?`<div>${u.join(" ")}</div>`:""}<span class='x-commit-title'>Commit:</span><small class='x-commit-oid uk-margin-small-right'>${n}</small>\n              <div><span class='x-commit-title'>Author:</span>${r} &lt;${c}&gt;</div>\n              <div><span class='x-commit-title'>Date:</span>${l}</div>\n              <div class='x-commit-message'>${a}</div>`},data:[]}]}},document.getElementById("appContainer"))}),m.module("fileTreeController").require("model","path","session","fileTree").__init__((function(e,{model:t,path:n,session:i}){e.model=t,e.path=n,e.session=i})).__init__((function(e){e.FileTreeController=function(e){this.tree=e},e.FileTreeController.prototype={root:function(){return this.tree().findOne("root",!0)},sync:function(t){const n=this,i=e.path.xe,o={};return GFS.readdirDeep(t,{folders:!0,files:!1}).then((function(e){e.sort(n.compareObjectsByPathDepth),e.forEach(e=>{if(!i(e)){const t=o[PathUtils.dirname(e)];o[e]=n.addBranch(e,t)}})})).then((function(){return GFS.readdirDeep(t).then(e=>{e.map(e=>{if(!i(e)){const t=o[PathUtils.dirname(e)];n.addLeaf(e,t)}})})}))},updateParentStatus:function(t){if(t){const n=e.Ba(t);n!==t.status&&this.markStatus(t,n)}},compareObjectsByPathDepth:function(e,t){const n=/\//g,i=(e.match(n)||[]).length,o=(t.match(n)||[]).length;return i>o?1:i<o?-1:0},showInTree:function(e){const t=this;e.split("/").forEach((function(e,n,i){t.openBranch(i.slice(0,n+1).join("/"))}))},get:function(e,t){const n=this.tree().findOne("path",e);if(!n&&t)throw new Error(`Path ${e} not found.`);return n},markActive:function(e){this.tree().deselectAll();const t=this.get(e);t&&this.tree().select(t)},markStatus:function(e,t){const n=this;if(e){n.tree().updateItemStatus(e,t);const i=e.$parent?n.tree().getItem(e.$parent):null;i&&n.updateParentStatus(i)}},clearAll:function(){this.tree().clearAll()},addRoot:function(e){const t=PathUtils.basename(e).replace(/«[^»]*»/g,"");return this.add({$branch:!0,$draggable:!1,label:t,name:t,path:e,root:!0,file:!1})},addBranch:function(e,t){if(!(t=t||this.getParentBranch(e)))return void $LOG.warn("Could not find parent for: "+e);const n=PathUtils.basename(e);return this.add({$branch:!0,$parent:t.id,$draggable:!0,$droppable:!0,label:n,name:n,path:e,root:!1,file:!1})},setFileDefaultFlag:function(e,t){e&&this.tree().updateItem(e,{isDefaultLaunchFile:t})},openBranch:function(e){if(this.get(e))return this.tree().open(this.get(e,!0))},closeBranch:function(e){if(this.get(e))return this.tree().close(this.get(e,!0))},getParentBranch:function(e){return this.get(PathUtils.dirname(e))},addLeaf:function(e,t){if(!(t=t||this.getParentBranch(e)))return void $LOG.warn("Could not find parent for: "+e);const n=PathUtils.basename(e),i={$branch:!1,$parent:t.id,$draggable:!0,$droppable:!1,label:n,name:n,path:e,root:!1,file:!0};return this.add(i)},add:function(e){const t=this.get(e.path);return t||(this.tree().add(e),e)},remove:function(e){if(e){const t=this,n=e.$parent?t.tree().getItem(e.$parent):null;t.tree().remove(e),n&&t.updateParentStatus(n)}}}})).def({Ba:function(e){const{EMPTY:t,CONFLICT:n,SAME:i,IGNORED:o,ADDED:a,CHANGED:s}=GitStatusTypes,r=e.$children.reduce((e,t)=>e|t.status,t);return r&n||r&s||r&a||r&o||r&i}}),m.module("files").def({La:function(e){const t=this,n=PathUtils.dirname(e);t.prompt.q(RES_I18N.Actions.Rename(RES_I18N.Objects.Project),PathUtils.basename(e),{showInput:!0,onResult:function(n){return t.Ga(e,n)},onValidate:async e=>{const i=`${n}/${e}`;let o;if(e){const n=t.path.et(e);n?o=RES_I18N.ErrorMessages.InvalidCharsFound(n):await GFS.exists(i)&&(o=RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.Path))}else o=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.NameFor(RES_I18N.Objects.Project));return o?Promise.reject(o):i}})},Ga:async function(e,t){const[n,i,o,a,s,r]=await Promise.all([ENV.metadataDirAsync(e),ENV.metadataDirAsync(t),ENV.trashDirAsync(e),ENV.trashDirAsync(t),ENV.tmpDirAsync(e),ENV.tmpDirAsync(t)]);await Promise.all([GFS.exists(n).then(e=>e&&GFS.mv(n,i)),GFS.exists(o).then(e=>e&&GFS.mv(o,a)),GFS.exists(s).then(e=>e&&GFS.mv(s,r))]),await this.model.Ne(e,{dir:t}),await GFS.mv(e,t,{updateStatus:!0})},Da:function({oldpath:e,path:t}){try{return GFS.mv(e,t,{updateStatus:!0})}catch(e){throw e.message&&this.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Rename(RES_I18N.Objects.Path)),e.message),e}},Ma:async function(){const e=this,{CONFLICT:t}=GitStatusTypes,n=e.metadata.Ce(),i=n.filter(({status:e})=>e&t).length;try{if(i)return Promise.reject({message:`You have ${i} unmerged file(s) in conflict.`,name:"Commit Failed",files:n});if(0===n.length)return Promise.reject({message:i18nTag({en:"No files were changed or added since the last commit.",es:"No se cambiaron o añadieron ficheros desde la última consignación (commit).",ja:"最後のコミットから変更/追加されたファイルはありません。",pt:"Nenhum arquivo foi alterado ou adicionado desde a última submissão.",ru:"Ни один файл не был изменен или добавлен с момента последней фиксации.",zh:"在上次提交后没有添加或更改过文件",zhTW:"從上次提交以來沒有任何檔案變動或加入"}),name:i18nTag({en:"No Changes",es:"Sin Cambios",ja:"変更なし",pt:"Sem Alterações",zh:"没有变化",zhTW:"沒有變化"}),files:n})}catch(t){throw e.prompt.ue(t.name,t.message),t}return n},Wa:async function(e){const t=await this.Ma(),{message:n,author:i}=await this.commitMessage.ca(e);await this.gitClient.En(e,t),await this.gitClient.Rn(e,n,i).then(GA_SendEvent_Success("commit_all","git_core"),GA_SendEvent_Failure("commit_all","git_core")),await this.session.Ve(e)},Va:async function(e){const t=this,n=await t.gitClient.Ht(e);if(n)return t.checkoutBranch.oa({dir:e,branch:n,noChecks:!0}).then(GA_SendEvent_Success("git_revert_all","git_core"),GA_SendEvent_Failure("git_revert_all","git_core"));t.prompt.ue("Revert Failed","Revert failed due to missing HEAD commit. Please perform a checkout to fix this problem.")},Ha:function(){const e=this.historyTracker;e.truncate(0),e.clearRedo()},qa:function(e){const t=this.historyTracker;t.pushUndo(e),t.truncate(20),t.clearRedo()},Ka:function(){const e=this;if(!e.historyTracker.canUndo())return Promise.reject({source:"files.model",fn:"pvUndoLastActionAsync",message:"No undo action exists."});const t=e.historyTracker.popUndo(),n=t.action;let i;switch(n){case"delete":i=e.Za(t);break;case"updatePath":i=e.Qa(t);break;case"addFile":i=e.Ya(t);break;case"addFolder":i=e.Ja(t);break;default:i=Promise.reject({source:"files.model",fn:"pvUndoLastActionAsync",action:n,message:"Undo history action unrecognized"})}return i.then(t=>{e.historyTracker.pushRedo(t)}).then(GA_SendEvent_Success("undo_action","undo_redo"),GA_SendEvent_Failure("undo_action","undo_redo"))},Xa:function(){const e=this;if(!e.historyTracker.canRedo())return Promise.reject({source:"files.model",fn:"pvRedoLastActionAsync",message:"No redo action exists."});const t=e.historyTracker.popRedo(),n=t.action;let i;switch(n){case"delete":i=e.ts(t);break;case"updatePath":i=e.os(t);break;case"addFile":i=e.as(t);break;case"addFolder":i=e.ss(t);break;default:i=Promise.reject({source:"files.model",fn:"pvRedoLastActionAsync",action:n,message:"Redo history action unrecognized"})}return i.then(t=>{e.historyTracker.pushUndo(t)}).then(GA_SendEvent_Success("redo_action","undo_redo"),GA_SendEvent_Failure("redo_action","undo_redo"))},Za:async function(e){const{oldpath:t,path:n}=e;return await GFS.mv(n,t,{updateStatus:!0}),e},ts:async function(e){const{oldpath:t,path:n}=e;return await GFS.mv(t,n,{updateStatus:!0}),e},Ya:async function(e){const t=await ENV.trashDirAsync(),{oldpath:n,path:i}=await GFS.rm(e.path,{tmpDir:t,updateStatus:!0});return Object.assign(e,{oldpath:n,path:i})},as:async function(e){return await this.Za(e),Object.assign(e,{path:e.oldpath})},Ja:function(e){return this.Ya(e)},ss:function(e){return this.Za(e)},Qa:async function(e){const{path:t,oldpath:n}=e;return await this.Da({oldpath:t,path:n}),e},os:async function(e){const{path:t,oldpath:n}=e;return await this.Da({oldpath:n,path:t}),e},rs:function(e){const t=this.session.Ae();return this.gitClient.wn(t,PathUtils.relativeTo(e,t))},cs:async function(e){const t=this,n=t.session.Ae(),i=await t.gitClient.Vt(n,PathUtils.relativeTo(e,n)).then(GA_SendEvent_Success("git_revert_file","git_core"),GA_SendEvent_Failure("git_revert_file","git_core"));if(null!==i)return await GFS.write(e,i,{updateStatus:!0}),t.observable.run({action:"update",path:e});await t.ls(e)},us:async function(e){const t=this,n=await t.gitClient.sn(e);return 0===n.length&&t.prompt.ue({en:"No Remote",es:"No Remoto",ja:"リモートなし",pt:"No Remoto",ru:"Нет внешнего",zh:"没有远端",zhTW:"沒有遠端"},{en:"Please add a remote.",es:"Por favor agregue un remoto.",ja:"リモートを追加してください",pt:"Por favor, adicione um remoto.",ru:"Пожалуйста, добавьте внешний.",zh:"请添加一个远端",zhTW:"請添加一個遠端"}),n.length>0},hn:async function(e){const t=this;if(await t.us(e)){const{remote:n,branch:i}=await t.gitRemotes.Ta({projectDir:e,title:RES_I18N.Objects.Pull}),o=await t.gitClient.an(e,n);await t.gitClient.cn(e,o,i).then(GA_SendEvent_Success("pull_git_repo","git_core"),GA_SendEvent_Failure("pull_git_repo","git_core"))}},hs:async function(e){const t=this;if(await t.us(e)){const{remote:n,branch:i}=await t.gitRemotes.Ta({projectDir:e,title:RES_I18N.Objects.Push}),o=await t.gitClient.an(e,n);await t.gitClient.In(e,o,i).then(GA_SendEvent_Success("push_git_repo","git_core"),GA_SendEvent_Failure("push_git_repo","git_core"));const a=RES_I18N.Objects.Remote;t.prompt.ue(RES_I18N.Objects.SuccessfulFor(RES_I18N.Objects.Push),{en:`Successfully pushed to ${a.en.toLowerCase()} [${n}].`,es:`Empujado con éxito a ${a.es.toLowerCase()} [${n}].`,ja:`${a.ja} [${n}] にプッシュされました`,pt:`Enviado com sucesso para ${a.pt.toLowerCase()} [${n}].`,zh:`成功推送到${a.zh} [${n}]`,zhTW:`成功推送到${a.zhTW} [${n}]`})}},ds:async function(e){return GFS.rm(e,{tmpDir:await ENV.trashDirAsync(),updateStatus:!0})},ls:async function(e){const{oldpath:t,path:n}=await this.ds(e);this.qa({action:"delete",label:RES_I18N.Elements.Delete,oldpath:t,path:n})},ps:async function(e,t){const n=this;if(!t){const i=n.editor.mi();switch(PathUtils.ext(e)){case".html":t=n.templates.qe(i);break;case".js":t=n.templates.He(i);break;case".css":t=n.templates.Ke(i);break;default:t=""}}await n.fs(e,t)},gs:function(e,t){return this.vs(e,PathUtils.join(t,PathUtils.basename(e)),"Move")},vs:async function(e,t,n){return await this.Da({oldpath:e,path:t}),this.qa({action:"updatePath",label:n,oldpath:e,path:t})},ws:async function(e,t){try{await GFS.write(e,t,{updateStatus:!0})}catch(e){throw e.message&&this.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Create(RES_I18N.Objects.File)),e.message),e}},fs:async function(e,t){await this.ws(e,t),this.qa({action:"addFile",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.File)),path:e,content:t})},bs:async function(e){try{await GFS.mkdir(e)}catch(e){throw e.message&&this.prompt.ue(RES_I18N.Actions.Failed(RES_I18N.Actions.Create(RES_I18N.Objects.Folder)),e.message),e}},ys:async function(e){return await this.bs(e),this.qa({action:"addFolder",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.Folder)),path:e})},Ss:function(e){const t=this;return new Promise((function(n,i){t.prompt.q({en:`${e} CONFLICTS FOUND`,es:`${e} CONFLICTOS ENCONTRADOS`,ja:`${e}対立が見つかりました`,pt:`${e} CONFLITOS ENCONTRADOS`,zh:`发现${e}个冲突`,zhTW:`發現${e}個衝突`},null,{message:{en:`Do you want to recreate these ${e} files?`},cancelLabel:{en:"Keep",es:"Manten",ja:"保持",pt:"Manter",zh:"保留",zhTW:"保留"},okLabel:{en:"Recreate",es:"Recrear",ja:"再作成する",pt:"Recriar",zh:"重新创建",zhTW:"重新創建"},onResult:n,onDismiss:i})}))},xs:async function(e,t){const n=this,i=[];for(let o=0;o<t.length;o++)i.push(n._s(t[o]).then(({data:t,name:n})=>({path:PathUtils.join(e,n),name:n,data:t})));let o=!1;const a=await Promise.all(i),s=a.map(e=>e.path),r=await n.ks(s);r.length>0&&await n.Ss(r.length).then((function(){o=!0}),(function(){o=!1})),await Promise.all(a.map(async({path:e,data:t})=>{r.includes(e)?o&&(await n.ls(e),await n.fs(e,t)):await n.fs(e,t)}))},ks:async function(e){return(await Promise.all(e.map(e=>GFS.exists(e)))).map((t,n)=>t?e[n]:null).filter(e=>!!e)},_s:function(e){return new Promise((function(t,n){const i=new FileReader;i.addEventListener("error",(function(){n(i.error)})),i.addEventListener("load",(function(){t({name:e.name,data:i.result})})),i.readAsArrayBuffer(e)}))}}),m.module("files").require("model","path","session","messages","templates","prompt","history","diff","project","gitClient","checkoutBranch","gitBranches","commitMessage","gitRemotes","initRepo","string","fileTreeController","metadata","gitLogger","zipper","memory","share").__init__((function(e,{path:t,model:n,session:i,messages:o,templates:a,prompt:s,editor:r,viewer:c,history:l,diff:u,project:h,gitClient:d,checkoutBranch:p,gitBranches:m,commitMessage:f,gitRemotes:g,initRepo:v,string:w,fileTreeController:b,metadata:y,gitLogger:S,zipper:x,memory:_,share:k}){Object.assign(e,{path:t,model:n,session:i,messages:o,templates:a,prompt:s,editor:r,viewer:c,history:l,diff:u,project:h,gitClient:d,checkoutBranch:p,gitBranches:m,commitMessage:f,gitRemotes:g,initRepo:v,string:w,fileTreeController:b,metadata:y,gitLogger:S,zipper:x,memory:_,share:k}),e.minimatch=window.minimatch,e.observable=new ObservableClass,e.historyTracker=new l.HistoryTracker,e.treeController=new b.FileTreeController(e.Gt),e.fileQuery={searchPhrase:""},y.observable.subscribe(({path:t,action:n,status:i})=>{const o=e.Dt();switch(n){case"updateStatus":{const n=o.get(t);n&&o.markStatus(n,i),e.As();break}}});const A=e.path.xe;GFS.observable.subscribe(({action:t,type:n,path:o,oldpath:a})=>{const s=i.Ae();if(!s)return;const r=e.Dt();if(s){const e=(e,t)=>e&&PathUtils.childOf(e,t)&&!A(e);if(e(a,s)||e(o,s))switch(t){case"mv":case"rmdir":case"rm":{const e=r.get(a);e&&r.remove(e),$LOG.log(`[file:${t}] ${a}`);break}}if(e(a,s)||e(o,s))switch(t){case"mv":"file"===n?r.get(o)||r.addLeaf(o):"folder"===n&&(r.get(o)||(o===s?r.addRoot(o):r.addBranch(o)),r.sync(o)),$LOG.log(`[file:sync] ${n}: ${o}`);break;case"write":r.get(o)||r.addLeaf(o);break;case"mkdir":r.get(s)||r.addRoot(s),PathUtils.normalizePath(o)!==s&&PathUtils.relativeTo(o,s).split("/").map((e,t,n)=>{const i=`${s}/${n.slice(0,t+1).join("/")}`;i===s||r.get(i)||r.addBranch(i)})}}}),i.observable.subscribe(async({action:t,project:n})=>{switch(t){case"setProject":e.Is(n);break;case"open":{const t=e.Dt();let{dir:i,currentFilePath:o}=n;if(t.clearAll(),e.Ha(),e.Ci().showBatch("list"),t.addRoot(i),await t.sync(i),o)return o.startsWith(i)||(o=PathUtils.join(i,o)),e.observable.run({action:"open",path:o,showInTree:!0,skipSessionSave:!0});await e.observable.run({action:"open",path:null}),await y.V(n),_.ce()}}})})).def({u:function(){return $$("menuContainer")},Dt:function(){return this.treeController},Gt:function(){return $$("filesTree")},Cs:function(){return $$("filesGitList")},Ci:function(){return $$("filesContainer")},contextMenu:function(){return $$("fileContextMenu")},Es:function(){return $$("filesGitInitMenu")},$s:function(){return $$("filesBranchesRemotesMenu")},Rs:function(){return $$("filesAddMenuList")},Ts:function(){return $$("filesAddMenuIcon")},Fs:function(){this.Ts().dropdownPopup.close(),this.dropdownMenu.close()},As:UIkit2.Utils.debounce((function(){const e=this.metadata.Ce();e.sort(),this.Cs().setData(e)}),150),Is:function(e){if(e){const{git:t,dir:n}=e;$$("filesActionsContainer").showBatch(["search","add"]),$$("filesGitActionsContainer").showBatch(t?"git":"init"),t&&this.gitClient.Ht(n).then(e=>{$$("filesCurrentBranchItem").setValue(i18nTag(RES_I18N.Objects.BranchWithName(e||"")))})}else $$("filesActionsContainer").showBatch(),$$("filesGitActionsContainer").showBatch()},zs:function(e){const{dir:t,defaultLaunchFilePath:n}=this.session.Se(),i=this.Dt();return i.setFileDefaultFlag(e,!0),n&&i.setFileDefaultFlag(i.get(n),!1),this.model.Ne(t,{defaultLaunchFilePath:PathUtils.relativeTo(e.path,t)})},Ps:function(e,t){const n=this;n.prompt.q(RES_I18N.Actions.New(RES_I18N.Objects.File),"",{placeholders:RES_I18N.Placeholders.EnterNameOrPath,showInput:!0,onResult:function(e){return n.ps(e,t).then(()=>n.observable.run({action:"open",path:e})).then(GA_SendEvent_Success("add_file","files"),GA_SendEvent_Failure("add_file","files"))},onValidate:n.Ns.bind(n,e.path)})},Io:function(e,t){const n=this;(e=e||n.Dt().root())&&n.Ps(e,t)},Os:function(e){const t=this;t.prompt.q(RES_I18N.Actions.New(RES_I18N.Objects.Folder),"",{placeholders:RES_I18N.Placeholders.EnterNameOrPath,showInput:!0,onResult:function(e){return t.ys(e).then(GA_SendEvent_Success("add_folder","files"),GA_SendEvent_Failure("add_folder","files"))},onValidate:t.Ns.bind(t,e.path)})},Us:function(e){const t=this;(e=e||t.Dt().root())&&t.Os(e)},Bs:function(e){const t=this;t.prompt.q(RES_I18N.Actions.Rename(e.file?RES_I18N.Objects.File:RES_I18N.Objects.Folder),e.label,{placeholders:RES_I18N.Placeholders.EnterNameOrPath,showInput:!0,onResult:function(n){return t.vs(e.path,n,"Rename").then(GA_SendEvent_Success("rename_file","files"),GA_SendEvent_Failure("rename_file","files"))},onValidate:t.Ns.bind(t,PathUtils.dirname(e.path))})},Ls:function(e){const t=this,n=e.label;t.prompt.q(RES_I18N.Actions.Delete(e.file?RES_I18N.Objects.File:RES_I18N.Objects.Folder),"",{message:RES_I18N.Actions.Delete({en:`: ${n}?`,es:`: ${n}?`,ja:`「${n}」`,pt:`: ${n}?`,ru:`: ${n}?`,zh:`:「${n}」?`,zhTW:`:「$${n}」?`}),onResult:function(){return t.ls(e.path).then(GA_SendEvent_Success("delete_file","files"),GA_SendEvent_Failure("delete_file","files"))}})},Gs:function(e){const t=this.string.at(PathUtils.basename(e));this.prompt.q(RES_I18N.Actions.Revert(RES_I18N.Objects.File),null,{message:{en:`Revert changes to: ${t}?`,es:`¿Descartar todos los cambios: ${t}?`,ja:`${t} へのすべての変更を破棄しますか？`,pt:`Descartar todas as mudanças: ${t}`,ru:`Вы действительно хотите откатить все изменения в: ${t}`,zh:`丢弃对 ${t} 的全部修改?`,zhTW:`要放棄所有對 ${t} 的更動嗎?`},onResult:this.cs.bind(this,e)})},Ds:function(e){this.prompt.q(RES_I18N.Elements.RevertAll,null,{message:{en:"Revert all changes back to the HEAD commit? Warning: changes will be permanently lost!",es:"¿Revertir todos los cambios a la confirmación HEAD? Advertencia: ¡los cambios se perderán permanentemente!",ja:"本当すべての変更を取り消して、HEADのリビジョンに戻りますか。変更を破棄して?",pt:"Reverter todas as alterações de volta para o commit HEAD? Aviso: as alterações serão perdidas permanentemente!",zh:"确定要复原中的所有变更并回到HEAD版本？警告：更改将永久丢失!",zhTW:"確定要復原中的所有變更並回到HEAD版本？警告：更改將永久丟失!"},okLabel:RES_I18N.Elements.Revert,onResult:this.Va.bind(this,e)})},Ns:async function(e,t){let n;const i=PathUtils.join(e,t);if(0===t.length)n=RES_I18N.ErrorMessages.CannotBeEmptyFor(RES_I18N.Objects.Path);else{const e=this.path.et(t);e?n=RES_I18N.ErrorMessages.InvalidCharsFound(e):await GFS.exists(i)&&(n=RES_I18N.ErrorMessages.ExistsFor(RES_I18N.Objects.Path))}return n?Promise.reject(n):i},Ms:function(){const e=$$("filesUndoIcon"),t=$$("filesRedoIcon");if(e){const t=this.historyTracker.getLastUndo();t?(e.enable(),e.setLabel(RES_I18N.Elements.Undo+": "+t.label)):e.disable()}if(t){const e=this.historyTracker.getLastRedo();e?(t.enable(),t.setLabel(RES_I18N.Elements.Redo+": "+e.label)):t.disable()}},Ws:function(e,t){const n=e&&e.path||"";return n.slice(n.indexOf("/")).toLowerCase().includes(t)},Vs:function(e){const t=this,n=t.fileQuery.searchPhrase.toLowerCase();let i=!0;if(n){i=!1;const o=RegExp("("+t.string.st(n)+")","ig");o.test(e.name)?(e.label=e.name.replace(o,'<span class="x-search-highlight">$&</span>'),t.Gt().refreshItem(e)):e.label!==e.name&&(e.label=e.name,t.Gt().refreshItem(e)),i=e.$branch?e.$children.some(e=>t.Ws(e,n)):t.Ws(e,n)}else e.label!==e.name&&(e.label=e.name,t.Gt().refreshItem(e));return i&&!e.$parentClosed}}),m.module("files").require("fileTree").__init__((function(e,{fileTree:t}){const n={id:"filesBarContainer",flexSize:"none",flexLayout:"column",cls:"x-menu-title-bar shadow",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",attributes:i18nAttributes({en:"Files",es:"Archivos",ja:"ファイル",pt:"Arquivos",ru:"файлы",zh:"文件",zhTW:"檔案"}),on:{onToggled:function(e){const t=$$("filesScroller");e.visible?t.show():t.hide()}}},{id:"filesActionsContainer",cls:"x-menu-icons",flexSize:"none",defaultBatch:"none",cells:[{batch:"search",view:"menuToggle",cls:"x-menu-icon",icon:"search",title:"Search Files",on:{onToggled:function(){const e=$$("filesSearch");this.isSelected()?(e.show(),e.focus()):e.hide()}}},{id:"filesAddMenuIcon",view:"menuIcon",batch:"add",icon:"plus",title:"Add Files",dropdownOptions:{pos:"bottom-right",relativeTo:"filesBarContainer",dropdownAnimation:""},dropdown:{id:"filesAddMenuList",view:"list",listStyle:"dropdown",data:[{view:"link",value:"file",iconClass:"ti-file",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.File))},{view:"link",value:"folder",iconClass:"ti-folder",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.Folder))},s("filesUploadButton"),{$divider:!0},{id:"filesUndoIcon",view:"link",value:"undo",iconClass:"ti-back-left",label:RES_I18N.Elements.Undo,disabled:!0},{id:"filesRedoIcon",view:"link",value:"redo",iconClass:"ti-back-right",label:RES_I18N.Elements.Redo,disabled:!0}],on:{onOpen:function(){$$("filesUploadButton").reset(),e.Ms()},onItemClick:function(t){if(e.session.Se())switch(t.value){case"file":e.Io();break;case"folder":e.Us();break;case"undo":e.Ka();break;case"redo":e.Xa()}}}}}]}]},{id:"filesSearch",cls:"x-menu-search",view:"searchField",batch:"search",hidden:!0,flexSize:"none",i18nPlaceholders:RES_I18N.Actions.Enter(RES_I18N.Objects.NameFor(RES_I18N.Objects.File)),clearSearch:!0,on:{onFocus:function(){e.u().$blockDrawerPan=!0,UI.addClass(this.el,"uk-focus")},onBlur:function(){e.u().$blockDrawerPan=!1,UI.removeClass(this.el,"uk-focus")},onInput:function(){e.fileQuery.searchPhrase=this.getValue(),e.Gt().refresh()}}}]},i={id:"filesGitBarContainer",flexSize:"none",flexLayout:"column",cls:"x-menu-title-bar shadow collapsed",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",attributes:i18nAttributes({en:"SOURCE CONTROL",es:"CONTROL DE VERSIONES",ja:"ソース管理",pt:"CONTROLE DE VERSÃO",ru:"Управления источником",zh:"源代码控制",zhTW:"源代碼控制"}),visible:!1,on:{onToggled:function(e){const t=$$("filesGitScroller");e.visible?t.show():t.hide()}}},{id:"filesGitActionsContainer",cls:"x-menu-icons",flexSize:"none",defaultBatch:"none",cells:[{view:"menuIcon",batch:"init",icon:"plus",title:"Git Init",on:{onClick:function(){const t=e.session.Ae();t&&e.initRepo.la(t)}}},{view:"menuIcon",batch:"git",icon:"git-fork",title:"Branches/Remotes",dropdownOptions:{pos:"bottom-right",relativeTo:"filesGitBarContainer",dropdownAnimation:"",dropdownClass:"uk-dropdown-close x-dropdown-large"},dropdown:{id:"filesBranchesRemotesMenu",view:"list",listStyle:"dropdown",data:[{view:"link",value:"git:branches",icon:"git-branch",label:RES_I18N.Elements.Branches},{view:"link",value:"git:checkout",icon:"pull",label:RES_I18N.Elements.Checkout},{view:"link",value:"git:remotes",icon:"social",label:RES_I18N.Elements.Remotes},{view:"link",value:"git:fetch",icon:"download",label:i18nTag(RES_I18N.Objects.Fetch)},{view:"link",value:"git:log",icon:"list",label:RES_I18N.Elements.LogHistory}],on:{onItemClick:function(t){const n=e.session.Ae();if(n)switch(t.value){case"git:branches":e.gitBranches.wa(n);break;case"git:remotes":e.gitRemotes.Oa(n);break;case"git:fetch":e.gitRemotes.Ra(n);break;case"git:checkout":e.checkoutBranch.ia(n);break;case"git:log":e.gitLogger.Ua(n)}}}}},{view:"menuIcon",batch:"git",icon:"git-branch",title:"Git Operations",dropdownOptions:{pos:"bottom-right",relativeTo:"filesGitBarContainer",dropdownAnimation:"",dropdownClass:"uk-dropdown-close x-dropdown-large"},dropdown:{view:"list",listStyle:"dropdown",data:[{id:"filesCurrentBranchItem",view:"label",cls:"uk-nav-header",label:i18nTag(RES_I18N.Objects.BranchWithName(""))},{id:"filesCommitAllMenuItem",view:"link",value:"git:commit",icon:"file-edit",label:RES_I18N.Elements.CommitAll},{view:"link",value:"git:pull",icon:"pull",label:i18nTag(RES_I18N.Objects.Pull)},{id:"filesPushMenuItem",view:"link",value:"git:push",icon:"push",label:i18nTag(RES_I18N.Objects.Push)},{id:"filesRevertAllMenuItem",view:"link",value:"git:revert",iconClass:"ti-back-left",label:RES_I18N.Elements.RevertAll}],on:{onOpen:function(){const t=e.session.Ae();if(!t)return;const n=(e,t)=>t?`${e} <span class='x-menu-alt-text uk-text-primary'>${t}</span>`:e;e.gitClient.Zt(t).then(i=>{e.gitClient.$n(t,i).then(e=>{$$("filesPushMenuItem").setLabel(n(i18nTag(RES_I18N.Objects.Push),e))})});const i=e.Cs().data,o=i?i.length:0;$$("filesCommitAllMenuItem").setLabel(n(RES_I18N.Elements.CommitAll,o)),$$("filesRevertAllMenuItem").setLabel(n(RES_I18N.Elements.RevertAll,o))},onItemClick:function(t){const n=e.session.Ae();if(n)switch(t.value){case"git:commit":return e.Wa(n);case"git:revert":return e.Ds(n);case"git:pull":return e.hn(n);case"git:push":return e.hs(n)}}}}}]}]}]};e.dropdownMenu=UI.new({view:"dropdown",dropdownAnimation:"",dropdown:{id:"fileContextMenu",view:"list",data:[{id:"pasteItemContextButton",view:"link",value:"paste",iconClass:"ti-paste",label:RES_I18N.Elements.Paste,batch:"pastable"},{$divider:!0,batch:"pastable"},{id:"newFileContextButton",view:"link",value:"new",iconClass:"ti-file",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.File)),batch:"folder"},{id:"newFolderContextButton",view:"link",value:"folder",iconClass:"ti-folder",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.Folder)),batch:"folder"},s("uploadFileContextButton"),{$divider:!0,batch:"folder"},{id:"cutItemContextButton",view:"link",value:"cut",iconClass:"ti-cut",label:RES_I18N.Elements.Cut,batch:"cutable"},{id:"renameItemContextButton",view:"link",value:"rename",iconClass:"ti-pencil",label:RES_I18N.Elements.Rename,batch:"renameable"},{id:"deleteItemContextButton",view:"link",value:"delete",iconClass:"ti-trash",label:RES_I18N.Elements.Delete,batch:"editable"},{id:"shareItemContextButton",view:"link",value:"share",iconClass:"ti-link",label:RES_I18N.Elements.ShareLink,batch:"file:edit"},{id:"exportItemContextButton",view:"link",value:"export",iconClass:"ti-share",label:RES_I18N.Elements.Export,batch:"exportable"},{$divider:!0,batch:"git:divider"},{view:"link",value:"diff",iconClass:"ti-exchange-vertical",label:i18nTag(RES_I18N.Actions.View(RES_I18N.Objects.Diff)),batch:"git:changed"},{view:"link",value:"resolve-conflict",icon:"check",label:RES_I18N.Elements.MarkResolved,batch:"git:conflict"},{view:"link",value:"revert",iconClass:"ti-back-left",label:RES_I18N.Elements.Revert,batch:"git:changed"},{$divider:!0,batch:"file"},{view:"link",value:"edit",iconClass:"ti-pencil-alt",label:RES_I18N.Elements.Edit,batch:"file:edit"},{view:"link",value:"preview",iconClass:"ti-image",label:i18nTag(RES_I18N.Objects.Preview),batch:"file:preview"},{id:"setAsDefaultItemContextButton",view:"link",value:"default",icon:"star",label:"Launch Default",batch:"file:default"}],on:{onOpen:function(t,n,i){const o=["renameable"];if(this.masterConfig=i,i.root||(o.push("editable"),o.push("cutable")),i.file){const t=PathUtils.ext(i.path||""),n=e.editor.Xn(t),a=e.viewer.Xn(t);let s=!1;o.push("file"),console.log(i.status),i.status&GitStatusTypes.CHANGED&&(e.path.tt(i.path)||(o.push("git:changed"),s=!0)),i.status&GitStatusTypes.CONFLICT&&(o.push("git:conflict"),s=!0),s&&o.push("git:divider"),i.isDefaultLaunchFile||".html"!=t||o.push("file:default"),!n&&a||o.push("file:edit"),a&&o.push("file:preview")}else{if(this.source){const e=this.source.path,t=i.path;e===t||t.startsWith(e)||o.push("pastable")}o.push("folder")}o.push("exportable"),this.showBatch(o),$$("uploadFileContextButton").reset()},onClose:function(){this.masterConfig=null},onItemClick:async function(t){const n=this,i=n.masterConfig,o=i&&i.path;switch(t.value){case"cut":n.source=i,GA_SendEvent("cut_file","files");break;case"paste":{const t=n.source&&n.source.path;e.Dt().get(t)&&(t===o||o.startsWith(t)||(e.gs(t,o),i.$branch&&i.$closed&&e.Gt().open(i))),n.source=null,GA_SendEvent("paste_file","files");break}case"edit":e.observable.run({action:"open",path:o});break;case"share":e.share.Si({title:RES_I18N.Elements.ShareLink,message:"The url below is self-contained and can be accessed without an internet connection if you downloaded the app.",value:await e.share.xi(o)});break;case"export":i.file?e.zipper.gt(o):e.zipper.ut(o);break;case"preview":e.observable.run({action:"open",path:o,preview:!0});break;case"folder":e.Us(i);break;case"new":e.Io(i);break;case"rename":i.root?e.La(o):e.Bs(i);break;case"delete":e.Ls(i);break;case"diff":e.diff.Po(o);break;case"revert":e.Gs(o);break;case"resolve-conflict":e.rs(o);break;case"default":e.zs(i)}}}}},document.body);const o={id:"filesContainer",batch:"projects",flex:!1,flexLayout:"",flexSize:"",fill:"height",cells:[{id:"filesTree",view:"fileTree",batch:"list",flexSize:"flex",dataTransfer:"path",data:[],filter:e.Vs.bind(e),allowDrag:!0,context:!0,draggable:function(){return!UI.support.touch},droppable:function(e){return!e.file},on:{onAdd:function(e){e.$closed=e.$branch&&e.$depth>0},onItemContext:function(t,n,i){i&&UI.preventEvent(i),e.dropdownMenu.open(t),e.dropdownMenu.position(i.clientY+2,i.clientX),e.dropdownMenu.moveWithinBoundary()},onItemDragStart:function(){e.u().$blockDrawerPan=!0},onItemDragEnd:function(){e.u().$blockDrawerPan=!1},onItemDrop:function(t,n){e.gs(n.path,t.path),t.$branch&&t.$closed&&e.Gt().open(t)},onItemClick:function(t,n,i){UI.preventEvent(i),e.Fs(),"I"==i.target.tagName&&UI.hasClass(i.target,"menu")?(e.dropdownMenu.open(t),e.dropdownMenu.positionNextTo(n,"bottom-right",this.config.dropdownMarginX,this.config.dropdownMarginY),e.dropdownMenu.moveWithinBoundary(),this.toggle(t)):t.$branch||e.observable.run({action:"open",path:t.path})}}},{batch:"list",view:"spacer",height:128}],on:{onInitialized:function(){this.showBatch()}}},a={id:"filesGitList",view:"list",cls:"x-file-git-list",listStyle:"side",itemTagClass:"uk-flex",template:function({status:n,path:i}){const o=e.session.Ae(),a=t.yt(n),s=PathUtils.basename(i),r=PathUtils.dirname(PathUtils.relativeTo(i,o));return`<div class='uk-flex-item-1'>${`<span class='x-git-list-name x-text-overflow-ellipsis ${a}'>${s}</span>`}${"."!==r?`<span class='x-git-ignored x-git-list-dir x-text-overflow-ellipsis'>${r}</span>`:""}</div><div class='x-menu-icons'><i title='Revert' class='uk-icon-refresh revert'></i></div>`},on:{onItemClick:function({path:t},n,i){UI.preventEvent(i),"I"==i.target.tagName?UI.hasClass(i.target,"revert")&&e.Gs(t):e.diff.Po(t)}}};function s(t){return{id:t,view:"link",uploader:"multiple",value:"upload",batch:"folder",iconClass:"ti-upload",label:i18nTag(RES_I18N.Actions.Upload(RES_I18N.Objects.File)),reset:function(){this._uploader.value=""},on:{onClick:function(t,n,i){this.reset(),this.parentConfig=e.contextMenu().masterConfig,e.session.Ae()||UI.preventEvent(i)},onFileChange:function(t,n){const i=e.session.Ae();if(i){const t=this.parentConfig?this.parentConfig.path:i;e.xs(t,n.files),GA_SendEvent("upload_files","files")}}}}}e.view=UI.new({batch:"files",fill:"height",flexLayout:"column",cls:"x-max-width-100",cells:[n,{id:"filesScroller",view:"scroller",flexSize:"flex",cells:[o],on:{onScroll:function(){e.Fs()}}},i,{id:"filesGitScroller",view:"scroller",hidden:!0,flexSize:"flex",cells:[a],on:{onScroll:function(){e.Fs()}}}]})})),m.module("projects").def({Hs:UIkit2.Utils.debounce((function(){this.M()}),100,!1),M:async function(){const e=await this.model.Oe();e.sort((e,t)=>t.modifiedAt-e.modifiedAt),this.container().showBatch(e.length>0?"list":"empty"),this.$i().setData(e),this.qs()}}),m.module("projects").require("prompt","project","messages","session","date","path","zipper","cloneRepo","addGitAuth","checkoutBranch","gitClient","model","landing","string","files").__init__((function(e,{prompt:t,project:n,messages:i,session:o,date:a,addGitAuth:s,path:r,cloneRepo:c,zipper:l,main:u,checkoutBranch:h,gitClient:d,model:p,landing:m,string:f,files:g}){Object.assign(e,{prompt:t,project:n,messages:i,session:o,date:a,addGitAuth:s,path:r,cloneRepo:c,zipper:l,main:u,checkoutBranch:h,gitClient:d,model:p,landing:m,string:f,files:g,observable:new ObservableClass}),o.observable.subscribe(({action:t})=>{"open"!==t&&"close"!==t||e.qs()}),p.observable.subscribe(({type:t})=>{"project"!==t&&"projects"!==t||e.Hs()})})).def({qs:function(){const e=this.$i();e.refresh(),e.deselectAll();const t=e.findOne("dir",this.session.Ae());t&&e.select(t)},Ti:function(){return $$("projectsSearch")},container:function(){return $$("projectsContainer")},$i:function(){return $$("projectsList")},Ks:function(){this.projectMenu.close()},Zs:function(e){const t=this,n=String(Math.random()).slice(2,5),i=t.string.at(PathUtils.basename(e));t.prompt.q(RES_I18N.Actions.Delete(RES_I18N.Objects.Project),"",{message:{en:`Type '${n}' to confirm. '${i}' will be permanently deleted. It can NOT be recovered!`,es:`Escriba '${n}' para confirmar. '${i}' se borrará permanentemente. ¡No se podrá recuperar!`,ja:`「${n}」と入力して確認します。「${i}」 は完全に削除されます。削除後は取り消す事はできません！`,pt:`Digite '${n}' para confirmar. '${i}' será excluído permanentemente.`,zh:`输入「${n}」 进行确认。「${i}」将被永久删除。这个操作不能恢复！`,zhTW:`輸入「${n}」 進行確認。「${i}」會被永久刪除而「無法還原」！`},showInput:!0,onValidate:async function(e){return e},onResult:function(o){if(o!==n)return t.prompt.Lt(`What you typed did not match '${n}'.`),!0;t.model.P(e).then((function(){t.messages.dt("deleteProjectMessage",{name:i})}))}})}}),m.module("projects").__new__((function(e){const t={cls:"x-menu-title-bar shadow",id:"projectsBarContainer",flexSize:"none",flexLayout:"column",cells:[{flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",attributes:i18nAttributes({en:"PROJECTS",es:"PROYECTO",ja:"プロジェクト",pt:"PROJETOS",ru:"проектов",zh:"项目",zhTW:"專案"}),collapsable:!1,on:{onToggled:function(e){const t=$$("projectsScroller");e.visible?t.show():t.hide()}}},{id:"projectsActionsContainer",cls:"x-menu-icons",flexSize:"none",defaultBatch:"",cells:[{id:"projectsSearchButton",cls:"x-menu-icon",view:"menuToggle",icon:"search",title:"Search Projects",on:{onToggled:function(){const t=e.Ti();this.isSelected()?(t.show(),t.focus()):t.hide()}}},{id:"projectsGitButton",view:"menuIcon",icon:"git-fork",title:"Git Clone",dropdownOptions:{pos:"bottom-right",relativeTo:"projectsBarContainer",dropdownAnimation:""},dropdown:{id:"projectsGitListMenu",view:"list",listStyle:"dropdown",data:[{view:"link",value:"git:clone",icon:"git-fork",label:RES_I18N.Elements.CloneRepo},{view:"link",value:"git:auth",iconClass:"ti-lock",label:RES_I18N.Elements.GitCredentials}],on:{onItemClick:function(t){switch(t.value){case"git:auth":e.addGitAuth.Ko();break;case"git:clone":e.cloneRepo.sa()}}}}},{id:"projectsAddButton",view:"menuIcon",icon:"plus",title:"Add Project",dropdownOptions:{pos:"bottom-right",relativeTo:"projectsBarContainer",dropdownAnimation:""},dropdown:{id:"projectsAddListMenu",view:"list",listStyle:"dropdown",data:[{view:"link",value:"new",iconClass:"ti-archive",label:i18nTag(RES_I18N.Actions.New(RES_I18N.Objects.Project))},{id:"projectsImportZipButton",view:"link",value:"import:zip",iconClass:"ti-zip",label:i18nTag(RES_I18N.Actions.Import(RES_I18N.Objects.Echo("ZIP"))),uploader:!0,on:{onClick:function(){this._uploader.value=""},onFileChange:function(t,n){const i=n.files[0];i&&m.modules.files._s(i).then(({name:t,data:n})=>e.project.Do(t,n),t=>e.prompt.dt(RES_I18N.ErrorMessages.DecodeError,t))}}},{$divider:!0},{view:"link",value:"update",iconClass:"ti-comment-alt",label:i18nTag({en:"Change Log",es:"Registro de Cambios",ja:"変更ログ",pt:"Histórico de Mudanças",ru:"Журнал изменений",zh:"改动日志",zhTW:"變更日誌"})},{view:"link",value:"lab",iconClass:"ti-package",label:i18nTag(RES_I18N.Actions.View(RES_I18N.Objects.Labs))}],on:{onItemClick:function(t){switch(t.value){case"new":e.project.modal.open();break;case"update":e.main.Ci().showLanding(),e.landing.Ei().switchToTab("update");break;case"lab":e.main.Ci().showLanding(),e.landing.Ei().switchToTab("lab")}}}}}]}]},{id:"projectsSearch",cls:"x-menu-search",view:"searchField",hidden:!0,flexSize:"flex",i18nPlaceholders:RES_I18N.Actions.Enter(RES_I18N.Objects.NameFor(RES_I18N.Objects.Project)),clearSearch:!0,on:{onFocus:function(){e.observable.run({action:"blockDrawer",block:!0}),UI.addClass(this.el,"uk-focus")},onBlur:function(){e.observable.run({action:"blockDrawer",block:!1}),UI.removeClass(this.el,"uk-focus")},onInput:function(){e.projectQuery.searchPhrase=this.getValue(),e.$i().refresh()}}}]};e.projectMenu=UI.new({view:"dropdown",dropdown:{view:"list",listStyle:"dropdown",data:[{view:"link",value:"download",iconClass:"ti-zip",label:i18nTag(RES_I18N.Actions.Export(RES_I18N.Objects.Echo("ZIP")))},{view:"link",value:"rename",iconClass:"ti-pencil",label:RES_I18N.Elements.Rename},{view:"link",value:"delete",iconClass:"ti-trash",label:RES_I18N.Elements.Delete}],on:{onItemClick:function(t){const n=this.project&&this.project.dir;if(n)switch(t.value){case"download":e.zipper.ut(n);break;case"rename":e.files.La(n);break;case"delete":e.Zs(n)}},onOpened:function(e,t,n){this.project=n}}}},document.body);const n={id:"projectsContainer",fill:"height",batch:"projects",flex:!1,flexLayout:"",flexSize:"",cells:[{id:"projectsList",view:"list",batch:"list",flexSize:"flex",listStyle:"side",filter:function(t){const n=e.projectQuery.searchPhrase.toLowerCase(),i=PathUtils.basename(t.dir).replace(/«[^»]*»/g,"");let o=!0;if(n)if(o=i.toLowerCase().includes(n),o){const o=RegExp("("+e.string.st(n)+")","ig");t.label=i.replace(o,'<span class="x-search-highlight">$&</span>'),t.$dirty=!0}else t.$dirty=i!==t.label,t.label=i;else t.$dirty=t.label!==i,t.label=i;t.$dirty&&(this.refreshItem(t),t.$dirty=!1);return o},template:function(t){const{dir:n,modifiedAt:i,git:o,label:a}=t,s=`${o?"GIT ":""}${PathUtils.isIDB(n)?"IDB":""}`,r=e.date.Je.bind(e.date);return{cls:"x-list-item",template:{cls:"x-list-item-meta",flexAlign:"middle",cells:[{view:"image",htmlTag:"SVG",margin:"right-sm",width:40,height:40,on:{onInitialized:function(){jdenticon.update(this.el,n)}}},{flex:!1,flexSize:"flex",style:{minWidth:0},cells:[{view:"label",flex:!0,htmlTag:"DIV",label:`<span class='x-text-overflow-ellipsis'>${a}</span>`+(s?`<small class='uk-text-muted uk-margin-small-left'>${s}</span>`:"")},{view:"label",text:"small",htmlTag:"DIV",attributes:i18nAttributes({en:"Modified "+r(i),es:"Modificado "+r(i),ja:"修正済み"+r(i,"ja"),pt:"Modificado "+r(i,"pt"),ru:"Изменено "+r(i,"ru"),zh:"修改于"+r(i,"zh"),zhTW:"修改"+r(i,"zhTW")})}]},{view:"menuIcon",tagClass:"",icon:"more-vertical",on:{onClick:function(n,i,o){o&&UI.preventEvent(o),e.projectMenu.open(t),e.projectMenu.positionNextTo(this.el,"bottom-right"),e.projectMenu.moveWithinBoundary()}}}]}}},on:{onItemClick:function({dir:t}){return e.session.V(t)}}},{batch:"empty",textAlign:"center",flexLayout:"column",flexAlign:["center","middle"],cells:[{view:"label",cls:"uk-h5",padding:"large",label:"No projects found.",style:{height:"160px",opacity:.5}}]},{batch:"list",view:"spacer",height:128}]};e.view=UI.new({batch:"projects",fill:"height",cls:"x-max-width-100",flexLayout:"column",cells:[t,{id:"projectsScroller",view:"scroller",flexSize:"flex",cells:[n],on:{onScroll:function(){e.Ks()}}}]}),e.projectQuery={searchPhrase:""}})),m.module("search").require("prompt","path","session","editor","messages","string","searchSettings").__init__((e,{path:t,prompt:n,session:i,editor:o,messages:a,string:s,searchSettings:r})=>{Object.assign(e,{path:t,prompt:n,session:i,editor:o,messages:a,string:s,searchSettings:r,observable:new ObservableClass}),e.entityMap={"&":"&amp","<":"&lt",">":"&gt",'"':"&quot","'":"&#39","/":"&#x2F","`":"&#x60","=":"&#x3D"},e.session.observable.subscribe(({action:t})=>{"open"===t&&e.Qi()}),e.searchSettings.observable.subscribe(({action:t})=>{switch(t){case"updateSettings":e.Yi()}}),e.Qi()}).def({Qs:function(){return 500},Qi:function(){const e=this;e.searchResults=[],e.searchTerm=null,e.running=!1,e.Gt()&&(e.Gt().setData([]),e.container().clearResults(),e.replaceInput().setValue(""),e.findInput().setValue(""))},u:function(){return $$("menuContainer")},statusLabel:function(){return $$("searchStatusLabel")},findInput:function(){return $$("searchFindInput")},replaceInput:function(){return $$("searchReplaceInput")},Gt:function(){return $$("searchTree")},container:function(){return $$("searchContainer")},progress:function(){return $$("searchProgress")},isMatchCaseOn:function(){return $$("searchCaseSensitiveIcon").isSelected()},isMatchWholeWordOn:function(){return $$("searchWholeWordIcon").isSelected()},isRegExOn:function(){return $$("searchRegExIcon").isSelected()},clearAll:function(){this.Gt().clearAll()},Ys:function(e,t,n,i){return e=t?e:this.string.st(e),e=i?"\\b"+e+"\\b":e,new RegExp(e,n?"gm":"igm")},Js:function(){const e=this,t=e.searchResults||[];return e.running?(e.messages.dt("searchBusyError"),!1):0!==t.length},Xs:function(e){const t=this,n=t.searchResults;if(!t.Js())return;const i={};let o;for(let t,a=0;a<n.length;a++)t=n[a],o=i[t.path]||[],i[t.path]=o,o.push({range:{start:t.start,end:t.end},text:e});return t.running=!0,PromisePool({data:Object.keys(i),promiseGenerator:function(e){return t.editor.Qn({changes:i[e],path:e})},useRaf:!0}).then(()=>(t.running=!1,t.Yi()),e=>(t.running=!1,Promise.reject(e))).then(GA_SendEvent_Success("search_replace","search"),GA_SendEvent_Failure("search_replace","search"))},er:function(){const e=this;if(e.Js()){const t=e.string.at(e.replaceInput().getValue()||""),n=e.string.at(e.searchTerm||"");e.prompt.q(RES_I18N.Elements.ReplaceAll,null,{message:{en:`Replace all occurrences of 「${n}」 with 「${t}」?`,es:`Reemplaza todas las ocurrencias 「${n}」 con 「${t}」?`,ja:`すべての「${n}」を「${t}」に置き換えますか？`,pt:`Substituir todas as ocorrências 「${n}」 com 「${t}」?`,zh:`替换「${e.searchTerm}」为「${t}」?`,zhTW:`取代「${e.searchTerm}」為「${t}」?`},onResult:function(){e.Xs(e.replaceInput().getValue())},type:"confirm"})}},tr:function(){const e=this,t=e.Gt(),n={};let i=e.searchResults;if(0===i.length)return void e.container().displayNoResults();i=i.filter((function(i){const o=i.path;if(n[o]=1,t.getItem(o)||t.add({$branch:!0,file:!0,id:o,path:o,cls:"x-search-branch",label:PathUtils.basename(o)}),i.nodeId){const n=t.getItem(i.nodeId);t.updateItem(n,{label:e.nr(i.line,i.match,i.start.row),row:i.start.row,column:i.start.column})}else i.nodeId=t.add({$branch:!1,$parent:o,search:!0,cls:"x-search-item",label:e.nr(i.line,i.match,i.start.row),path:i.path,row:i.start.row,column:i.start.column,file:i.file});return!0}));const o=i.length,a=Object.keys(n).length;UI.setAttributes(e.statusLabel().element,i18nAttributes({en:`${o} results in ${a} files`,es:`${o} resultados en ${a} archivos`,ja:`${o}は${a}つのファイルになります`,pt:`${o} resultados em ${a} arquivos`,zh:`${o}文件中有${a}个结果`,zhTW:`${o}文件中有${a}個結果`}))},ir:function(e,t,n,i,o){const a=this,s=[];let r;for(let c=0;c<o&&(r=t.exec(e),r);c++){const o=a.or(e,r.index,r[0].length,i);s.push({start:a.ar(e,r.index),end:a.ar(e,t.lastIndex),range:o,line:e.slice(o.start,o.end),match:{start:r.index-o.start,end:t.lastIndex-o.start},path:n})}return s},Yi:function(){const e=this,t=e.findInput().getValue(),n=e.isMatchWholeWordOn(),i=e.isMatchCaseOn(),o=e.isRegExOn();if("string"!=typeof t||0===t.length)return Promise.reject("Invalid search pattern.");const a=e.Ys(t,o,i,n),s=e.session.Ae(),r=e.Qs(),c=e.searchSettings.Mt();if(!s)return Promise.reject("No current project.");e.searchTerm=t;const l=e.searchResults=[],u=e.progress();return e.Gt().clearAll(),UI.setAttributes(e.statusLabel().element,i18nAttributes({en:"Searching…",es:"Buscando…",ja:"検索中…",pt:"A procurar…",zh:"搜索…",zhTW:"搜尋中…"})),u.setValue(0),u.reveal(),GFS.readdirDeep(s).then(t=>{const n=(t=t.filter(t=>!e.path.xe(t)&&!e.path.tt(t)&&(!c||c.includes(t)))).length;let i=0,o=0;return PromisePool({data:t,promiseGenerator:t=>l!==e.searchResults?($LOG.log("Search aborted."),Promise.reject("Search aborted.")):(o=++i/n*100,o-u.getValue()>5&&u.setValue(o),GFS.readFile(t,{encoding:"utf8"}).then(n=>{const i=e.ir(n,a,t,32,r);return l.push.apply(l,i),l.length>=r?(l.length=r,$LOG.log("[search] Max results reached."),Promise.reject("Exceeded max number of results.")):l!==e.searchResults?($LOG.log("Search aborted."),Promise.reject("Search aborted.")):void(i.length&&e.tr())})),maxConcurrency:1,retryAttempts:0,useRaf:!0})}).then(GA_SendEvent_Success("search_find_display","search"),GA_SendEvent_Failure("search_find_display","search")).then((function(){e.sr(),e.tr()}),(function(t){return e.sr(),e.tr(),Promise.reject(t)}))},sr:function(){const e=this.progress();e.setValue(100),setTimeout((function(){e.conceal(),e.setValue(0)}),500)},or:function(e,t,n,i){i=(i=i||1e4)>n?i-n:0;const o=t+n;let a=e.slice(Math.max(t-i,0),t),s=e.slice(o,o+i);return a=a.split(/[\n\r]/).pop(),a=a.replace(/^\s+/,""),s=s.split(/[\n\r]/).shift(),s=s.replace(/\s+$/,""),a.length+s.length>i&&(a=a.slice(Math.max(0,a.length-Math.floor(i/2))),s=s.slice(0,i-a.length)),{start:t-a.length,end:o+s.length}},ar:function(e,t){const n=(e=e.slice(0,t)).split(/\r\n|\r|\n/g);return{row:n.length-1,column:n.pop().length}},nr:function(e,t,n){const i=this,o=t?t.start:-1,a=t?t.end:-1;return`<small class='x-search-item-row uk-text-muted'>${n+1}</small>`+e.split("").map((e,t)=>{let n=i.entityMap[e]||e;return t===o&&(n='<span class="x-search-highlight">'+n),t===a-1&&(n+="</span>"),n}).join("")}}),m.module("search").require("fileTree").__init__((function(e){const t=UI.new({id:"searchBarContainer",flexSize:"none",flexLayout:"column",cells:[{cls:"x-menu-title-bar",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.Find,on:{onToggled:function(e){const t=$$("searchFindInput");e.visible?(t.show(),t.focus()):t.hide()}}},{cls:"x-menu-icons",flexSize:"none",cells:[{id:"searchSettingsIcon",view:"menuIcon",iconClass:"ti-filter",title:"Filter Files",style:{fontSize:"1em",marginRight:"24px"},on:{onClick:function(){e.searchSettings.modal.open()}}}]}]},{id:"searchFindInput",cls:"x-menu-search",view:"searchField",i18nPlaceholders:{en:"Find Text",es:"Buscar Texto",ja:"検索キーワード",pt:"Pesquisar Texto",ru:"Найти текст",zh:"搜索关键词",zhTW:"搜索關鍵詞"},clearSearch:!0,searchOptions:[{id:"searchRegExIcon",view:"menuToggle",outline:!0,cls:"ace_icon regex",title:"Use RegEx"},{id:"searchCaseSensitiveIcon",view:"menuToggle",outline:!0,cls:"ace_icon case-sensitive",title:"Match Case"},{id:"searchWholeWordIcon",view:"menuToggle",outline:!0,cls:"ace_icon whole-word",title:"Match Whole Word"}],updateSearchAsync:function(){return e.Yi()},on:{onKeyUp:function(e,t,n){"Enter"===n.key&&this.updateSearchAsync()},onFocus:function(){e.observable.run({action:"blockDrawer",block:!0})},onBlur:function(){e.observable.run({action:"blockDrawer",block:!1})}}},{cls:"x-menu-title-bar",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.Replace,visible:!1,on:{onToggled:function(e){const t=$$("searchReplaceInput");e.visible?(t.show(),t.focus()):t.hide()}}}]},{id:"searchReplaceInput",view:"searchField",cls:"x-menu-search",hidden:!0,i18nPlaceholders:{en:"Replace Text",es:"Reemplazar Texto",ja:"代替テキスト",pt:"Substituir Texto",ru:"Заменить текст",zh:"替换文字",zhTW:"替換文字"},clearSearch:!0,on:{onKeyUp:function(t,n,i){"Enter"===i.key&&e.er()},onFocus:function(){e.u().$blockDrawerPan=!0},onBlur:function(){e.u().$blockDrawerPan=!1}}},{cls:"x-menu-title-bar shadow",flexSize:"none",flexSpace:"between",flexAlign:"middle",cells:[{view:"menuTitle",label:RES_I18N.Elements.FindResults,on:{onToggled:function(e){const t=$$("searchContainer");e.visible?t.show():t.hide()}}},{flexSize:"none",cells:[{id:"searchStatusLabel",view:"label",label:"",htmlTag:"SMALL",margin:"x"}]}]},{id:"searchProgress",view:"progress",size:"mini",color:"primary"}]}),n={id:"searchContainer",batch:"search",fill:"height",flexLayout:"column",cells:[{id:"searchTree",view:"fileTree",batch:"list",flexSize:"flex",allowDrag:!1,indentWidth:8,data:[],draggable:function(){return!1},orderAfter:function(e,t){const n=e.$parent==t.id,i=e.$depth<t.$depth,o=e.$parent==t.$parent;return n||i||o&&(e.$branch<t.$branch||e.row>t.row&&!e.$branch&&!t.$branch||e.label.toLowerCase()>t.label.toLowerCase()&&e.$branch&&t.branch)},on:{onAdded:function(){this.$count>1&&e.container().showBatch(["list"])},onItemClick:function(t){t.search&&e.observable.run({action:"jumpToFile",path:t.path,item:t})}}},{batch:"empty",textAlign:"center",fill:"height",flexLayout:"column",flexAlign:["center","middle"],cells:[{id:"searchEmptyMessage",cls:"uk-h5",view:"label",padding:"large",attributes:i18nAttributes({en:"Find & Replace in Files",es:"Buscar y Reemplazar en Archivos",ja:"複数のファイルから検索",pt:"Localizar e Substituir em Ficheiros",ru:"Найти и Заменить в файлах",zh:"在多个文件中查找…",zhTW:"多重檔案尋找"}),style:{height:"160px",opacity:.5}}]},{batch:"list",view:"spacer",height:256}],clearResults:function(){e.statusLabel().setValue("&nbsp"),this.showBatch(["empty"])},displayNoResults:function(){e.statusLabel().setValue("0 results")}};e.view=UI.new({batch:"search",fill:"screen",cls:"x-max-width-100",flexLayout:"column",cells:[t,{id:"searchScroller",view:"scroller",flexSize:"flex",cells:[n]}]})})),m.module("settings").__init__((function(e){e.supportAnimation=UIkit2.support.animation,e.supportTransition=UIkit2.support.transition})).def({rr:function(e){e?(UI.removeClass(document.body,"no-animation"),UIkit2.support.animation=this.supportAnimation,UIkit2.support.transition=this.supportTransition):(UI.addClass(document.body,"no-animation"),UIkit2.support.animation=!1,UIkit2.support.transition=!1)}}),m.module("settings").require("editor","session","preview","addGitAuth","vibrate","path").__init__((function(e,{editor:t,session:n,preview:i,addGitAuth:o,vibrate:a,path:s}){Object.assign(e,{editor:t,session:n,preview:i,addGitAuth:o,vibrate:a,path:s,darkThemes:["monokai","ayu-mirage","dracula"]})})).def({editorForm:function(){return $$("settingsEditorForm")},appearanceForm:function(){return $$("settingsAppearanceForm")},previewForm:function(){return $$("settingsPreviewForm")},touchForm:function(){return $$("settingsTouchForm")},cr:function(){const e={};return UI.extend(e,this.editorForm().getValues()),UI.extend(e,this.appearanceForm().getValues()),UI.extend(e,this.previewForm().getValues()),UI.extend(e,this.touchForm().getValues()),e.dark=this.darkThemes.includes(e.appearanceTheme),e},G:async function(){await GFS.write(await ENV.settingsConfigPathAsync(),JSON.stringify(this.cr()),{atomic:!0})},lr:async function(){const e=this.cr();try{UI.extend(e,JSON.parse(await GFS.readFile(await ENV.settingsConfigPathAsync(),{encoding:"utf8"})))}catch(e){$LOG.log("[settings] deserialize error")}return e},C:function(e){-1!==this.darkThemes.indexOf(e)?UI.addClass(document.documentElement,"dark"):UI.removeClass(document.documentElement,"dark"),this.editor.ii(e)},U:function(e){this.editor.ui(e)},B:function(e){this.editor.pi(e)},L:function(e){this.editor.di(e)},ur:function(e){this.editor.si("ace"===e?null:e)},hr:function(e){ENV.locale=e;const t=e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();document.documentElement.setAttribute("lang",t),Object.keys(UI.components).map(e=>UI.components[e]).filter(e=>e.i18nPlaceholders).forEach(t=>{const n=t.config.i18nPlaceholders;t.set("placeholder",n[e]||n.en||"")})},D:async function(){const e=await this.lr();this.dr(e),this.pr(e),this.mr(e),this.gr(e)},pr:function(e){this.appearanceForm().setValues(e),this.rr(e.appearanceAnimations),e.appearanceTheme&&this.C(e.appearanceTheme),e.appearanceLanguage&&this.hr(e.appearanceLanguage)},dr:function(e){const t=this.editorForm();t.setValues(e),t.getFieldset().$components.forEach((function(t){m.isDefined(e[t.name])&&t.dispatch("onChange")}))},mr:function(e){this.previewForm().setValues(e),this.preview.$o(e.previewUseLiveMode)},gr:function(e){this.touchForm().setValues(e),this.touchForm().getFieldset().$components.forEach((function(t){m.isDefined(e[t.name])&&t.dispatch("onChange")}))}}),m.module("settings").__new__((function(e){e.deviceTouchSupport=UI.support.touch})).__init__((function(e,{logger:t,addGitAuth:n,cookieBanner:i,editor:o}){const a={id:"settingsEditorForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabelAttributes:i18nAttributes({en:"Autocomplete / Check Syntax",es:"Autocompletar / Verificar Sintaxis",ja:"自動補完    / 構文を確認する",pt:"Autocompletar / Verificar Sintaxe",ru:"Автозавершение / Проверьте синтаксис",zh:"自动补全     / 检查语法",zhTW:"自動補全     / 檢查語法"}),view:"toggle",name:"editorAutocomplete",checked:!0,on:{onChange:function(t,n,i){o.oi(this.getValue()),o.Jn(this.getValue()),i&&(e.G(),GA_SendEvent("change_autocomplete","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Font Size",es:"Tamaño de Fuente",ja:"フォントサイズ",pt:"Tamanho da Fonte",ru:"Pазмер шрифта",zh:"字号",zhTW:"字型"}),view:"select",name:"editorFontSize",data:[{value:"10px",label:"10px"},{value:"11px",label:"11px"},{value:"12px",label:"12px"},{value:"13px",label:"13px"},{value:"14px",label:"14px"},{value:"15px",label:"15px"},{value:"16px",label:"16px"}],on:{onInitialized:function(){this.setValue(window.innerWidth<=480?"12px":"14px")},onChange:function(t,n,i){e.U(this.getValue()),i&&(e.G(),GA_SendEvent("change_font_size","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Indent Guide",es:"Guías de Sangría",ja:"インデントガイド",pt:"Guia de Indentação",ru:"Подсказки для отступов",zh:"缩进对齐线",zhTW:"縮排對齊線"}),view:"toggle",name:"editorIndentGuides",checked:!0,on:{onChange:function(t,n,i){o.hi(this.getValue()),i&&e.G()}}},{formLabelAttributes:i18nAttributes({en:"Keybindings",es:"Atajos de teclado",ja:"キーバインド",pt:"Combinações de teclas",ru:"Сочетания клавиш",zh:"键绑定",zhTW:"鍵綁定"}),view:"select",name:"editorKeybinding",data:[{value:"ace",label:"Ace"},{value:"ace/keyboard/sublime",label:"Sublime"},{value:"ace/keyboard/vscode",label:"VSCode"}],on:{onInitialized:function(){this.setValue(null)},onChange:function(t,n,i){e.ur(this.getValue()),i&&(e.G(),GA_SendEvent("change_keybindings","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Line Numbers",es:"Números de Línea",ja:"行番号を表示",pt:"Números de Linha",ru:"Hомера строк",zh:"显示行号",zhTW:"顯示行號"}),view:"toggle",name:"editorLineNumbers",checked:!0,on:{onChange:function(t,n,i){e.L(this.getValue()),i&&e.G()}}},{formLabelAttributes:i18nAttributes({en:"Tab Size",es:"Tamaño de Tab",ja:"タブ幅",pt:"Tamanho do Tab",ru:"Ширина отступа",zh:"Tab 长度",zhTW:"Tab 長度"}),view:"select",name:"editorTabSize",data:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"8",label:"8"}],on:{onInitialized:function(){this.setValue("2")},onChange:function(t,n,i){e.B(this.getValue()),i&&(e.G(),GA_SendEvent("change_tab_size","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Word Wrap",es:"Ajuste de Línea",ja:"自動折り返し",pt:"Quebra de Linha",ru:"Перенос строк",zh:"自动换行",zhTW:"自動換行"}),view:"toggle",name:"editorWordWrap",checked:!0,on:{onChange:function(t,n,i){o.ai(this.getValue()),i&&(e.G(),GA_SendEvent("change_word_wrap","settings"))}}}]},s={id:"settingsMobileForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabelAttributes:i18nAttributes({en:"Orientation",es:"Orientación",ja:"デバイスの向き",pt:"Orientação",ru:"Oриентация",zh:"方向",zhTW:"設備方向"}),view:"select",name:"touchOrientation",data:[{value:"portrait",label:"Portrait"},{value:"landscape",label:"Landscape"},{value:"auto",label:"Auto"}],on:{onInitialized:async function(){this.setValue(await DS.getOrientation())},onChange:function(){DS.setOrientation(this.getValue())}}}]},r={id:"settingsTouchForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabelAttributes:i18nAttributes({en:"Touch Features",es:"Funciones Táctiles",ja:"タッチ機能",pt:"Recursos de Toque",ru:"Особенности сенсорного экрана",zh:"触控功能",zhTW:"觸控功能"}),view:"toggle",name:"touchFeatures",checked:e.deviceTouchSupport,on:{onChange:function(t,n,i){const o=document.documentElement;this.getValue()?e.deviceTouchSupport&&(UI.support.touch=!0,UI.removeClass(o,"uk-notouch"),UI.addClass(o,"uk-touch")):(UI.support.touch=!1,UI.removeClass(o,"uk-touch"),UI.addClass(o,"uk-notouch")),i&&(e.G(),GA_SendEvent("change_touch_features","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Haptic Keypress",es:"Táctil Háptica",ja:"触覚キープレス",pt:"Tecla Táctil",ru:"Tактильная клавиша",zh:"触觉按键",zhTW:"觸覺按鍵"}),view:"toggle",name:"touchHapticKeypress",checked:!0,on:{onChange:function(t,n,i){o.fi(this.getValue()),i&&(e.G(),GA_SendEvent("change_haptic_keypress","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Keyboard Position",es:"Posición del Teclado",ja:"キーボードの位置",pt:"Posição do Teclado",ru:"Положение клавиатуры",zh:"键盘位置",zhTW:"鍵盤位置"}),view:"select",name:"touchKeyboardPosition",data:[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"}],on:{onInitialized:function(){this.setValue(o.ace.userAgent.isIOS?"top":"bottom")},onChange:function(t,n,i){o.li(this.getValue()),i&&(e.G(),GA_SendEvent("change_keyboard_position","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Extra Keyboard",es:"Teclado Extra",ja:"追加のキーボード",pt:"Teclado Extra",zh:"额外的键盘",zhTW:"額外的鍵盤"}),view:"toggle",name:"touchExtraKeyboard",checked:!0,on:{onChange:function(t,n,i){o.ri(this.getValue()),i&&(e.G(),GA_SendEvent("change_extra_keyboard","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Touch Keyboard",es:"Teclado Táctil",ja:"タッチキーボード",pt:"Teclado de Toque",zh:"软键盘",zhTW:"軟鍵盤"}),view:"toggle",name:"touchKeyboard",checked:!0,on:{onChange:function(t,n,i){o.ci(this.getValue()),i&&(e.G(),GA_SendEvent("change_touch_keyboard","settings"))}}}]},c={id:"settingsGitForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabel:i18nTag(RES_I18N.Objects.Credentials),view:"link",label:RES_I18N.Elements.Open,on:{onClick:function(){n.Ko()}}}]},l={id:"settingsAppearanceForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabelAttributes:i18nAttributes({en:"Animations",es:"Animaciones",ja:"アニメーション",pt:"Animações",ru:"Анимации",zh:"动画效果",zhTW:"動畫效果"}),view:"toggle",name:"appearanceAnimations",checked:!0,on:{onChange:function(t,n,i){e.rr(this.getValue()),i&&(e.G(),GA_SendEvent("change_animations","settings"))}}},{formLabel:"Language",view:"select",name:"appearanceLanguage",data:[{value:"en",label:"English"},{value:"es",label:"Español"},{value:"pt",label:"Portugues"},{value:"ru",label:"Pусский"},{value:"ja",label:"日本語"},{value:"zh",label:"简体中文"},{value:"zhTW",label:"繁體中文"}],on:{onInitialized:function(){this.setValue({en:"en","en-us":"en","en-ca":"en","en-gb":"en","en-in":"en",es:"es","es-ar":"es","es-gt":"es","es-cr":"es","es-pa":"es","es-do":"es","es-es":"es","es-mx":"es","es-ve":"es","es-co":"es","es-pe":"es","es-ec":"es","es-cl":"es","es-uy":"es","es-py":"es","es-bo":"es","es-sv":"es","es-hn":"es","es-ni":"es","es-pr":"es","es-us":"es",ja:"ja","ja-jp":"ja",pt:"pt","pt-br":"pt",ru:"ru","ru-ru":"ru",zh:"zh","zh-cn":"zh","zh-sg":"zh","zh-hk":"zhTW","zh-tw":"zhTW"}[navigator.language.toLowerCase()]||"en")},onChange:function(t,n,i){e.hr(this.getValue()),i&&(e.G(),GA_SendEvent("change_language","settings"))}}},{formLabelAttributes:i18nAttributes({en:"Theme",es:"Tema",ja:"テーマ",pt:"Temas",ru:"Тема",zh:"主题",zhTW:"佈景主題"}),view:"select",name:"appearanceTheme",data:[{value:"ayu-light",label:"Ayu Light",optgroup:"Light"},{value:"chrome",label:"Chrome",optgroup:"Light"},{value:"xcode",label:"XCode",optgroup:"Light"},{value:"ayu-mirage",label:"Ayu Mirage",optgroup:"Dark"},{value:"dracula",label:"Dracula",optgroup:"Dark"},{value:"monokai",label:"Monokai",optgroup:"Dark"}],on:{onInitialized:function(){this.setValue("xcode")},onChange:function(t,n,i){e.C(this.getValue()),i&&(e.G(),GA_SendEvent("change_theme","settings"))}}}]},u={id:"settingsPreviewForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabel:"Live Preview",view:"toggle",name:"previewUseLiveMode",checked:!0,on:{onChange:function(t,n,i){e.preview.$o(this.getValue()),i&&(e.G(),GA_SendEvent("change_live_preview","settings"))}}}]},h={id:"settingsAboutForm",view:"form",margin:"top",formStyle:"horizontal line",fieldset:[{formLabelAttributes:i18nAttributes({en:"Build",es:"Versión",ja:"バージョン",pt:"Versão",ru:"Версия",zh:"版本号",zhTW:"版本號"}),view:"label",label:"",on:{onInitialized:async function(){const e=await DS.versionName();this.setValue(e||window.$version||"dev")}}},{formLabelAttributes:i18nAttributes({en:"Terms Agreement",es:"Términos de Uso",ja:"利用条件",pt:"Termos de Uso",ru:"Условия эксплуатации",zh:"使用条款",zhTW:"使用條款"}),view:"link",label:RES_I18N.Elements.Open,on:{onClick:function(){i.banner.show()}}},{formLabel:RES_I18N.Elements.LogHistory,view:"link",label:RES_I18N.Elements.Open,on:{onClick:function(){t.modal.open()}}},{formLabel:"<a class='uk-text-danger uk-text-nowrap' href='https://github.com/spckio/spck-issues/issues' rel='noopener noreferrer' target='_blank'\n            data-i18n-en='Report an Issue' data-i18n-es='Reportar un Problema' data-i18n-ja='問題の報告' data-i18n-pt='Informar um Problema' data-i18n-zh='报告问题' data-i18n-zh-tw='回報問題'></a>"}]};function d(e){return e.hidden=!DS.supported,e}function p(t){return t.hidden=!e.deviceTouchSupport,t}function m(e,t){return{cls:"x-menu-title-bar",view:"menuTitle",attributes:i18nAttributes(e),on:{onToggled:function(e){const n=$$(t);e.visible?n.show():n.hide()}}}}e.view=UI.new({batch:"settings",id:e.__name__,fill:"height",flexLayout:"column",cls:"x-max-width-100",cells:[{cls:"x-menu-title-bar shadow",view:"menuTitle",attributes:i18nAttributes({en:"SETTINGS",es:"Opciones",ja:"環境設定",pt:"Preferências",ru:"Настройки",zh:"设置",zhTW:"設定"}),collapsable:!1},{view:"scroller",flexSize:"flex",cells:[m({en:"GIT"},"settingsGitForm"),c,m({en:"APPEARANCE",es:"APARIENCIA",ja:"出現",pt:"APARÊNCIA",ru:"Внешность",zh:"外观",zhTW:"出現"},"settingsAppearanceForm"),l,m({en:"EDITOR",ja:"エディタ設定",ru:"Pедактор",zh:"编辑器",zhTW:"編輯器"},"settingsEditorForm"),a,m(RES_I18N.Objects.Preview,"settingsPreviewForm"),u,d(m({en:"MOBILE",es:"MÓVIL",ja:"モバイル",pt:"MÓVEL",ru:"Mобильный",zh:"移动",zhTW:"移動"},"settingsMobileForm")),d(s),p(m({en:"TOUCH",es:"TOQUE",ja:"タッ",pt:"TOQUE",ru:"Cенсорный",zh:"触控功能",zhTW:"觸控功能"},"settingsTouchForm")),p(r),m({en:"ABOUT",es:"ACERCA DE",ja:"について",pt:"SOBRE",ru:"О Spck",zh:"关于",zhTW:"關於"},"settingsAboutForm"),h,{view:"spacer",height:64}]}]})}));